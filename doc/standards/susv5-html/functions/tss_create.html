<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>tss_create</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/truncate.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/tss_delete.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="tss_create" id="tss_create"></a> <a name="tag_17_640" id="tag_17_640"></a><!-- tss_create -->
<h4 class="mansect"><a name="tag_17_640_01" id="tag_17_640_01"></a>NAME</h4>
<blockquote>tss_create — thread-specific data key creation</blockquote>
<h4 class="mansect"><a name="tag_17_640_02" id="tag_17_640_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/threads.h.html">threads.h</a>&gt;<br>
<br>
int tss_create(tss_t *</tt><i>key</i><tt>, tss_dtor_t</tt> <i>dtor</i><tt>);<br></tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_640_03" id="tag_17_640_03"></a>DESCRIPTION</h4>
<blockquote>
<div class="box"><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]"
border="0"> The functionality described on this reference page is aligned with the ISO&nbsp;C standard. Any conflict between the
requirements described here and the ISO&nbsp;C standard is unintentional. This volume of POSIX.1-2024 defers to the ISO&nbsp;C
standard. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></div>
<p>The <i>tss_create</i>() function shall create a thread-specific storage pointer with destructor <i>dtor</i>, which can be
null.</p>
<p>A null pointer value shall be associated with the newly created key in all existing threads. Upon subsequent thread creation,
the value associated with all keys shall be initialized to a null pointer value in the new thread.</p>
<p>Destructors associated with thread-specific storage shall not be invoked at process termination.</p>
<p>The behavior is undefined if the <i>tss_create</i>() function is called from within a destructor.</p>
<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> The
<i>tss_create</i>() function shall not be affected if the calling thread executes a signal handler during the call. <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_640_04" id="tag_17_640_04"></a>RETURN VALUE</h4>
<blockquote>
<p>If the <i>tss_create</i>() function is successful, it shall set the thread-specific storage pointed to by <i>key</i> to a value
that uniquely identifies the newly created pointer and shall return <tt>thrd_success</tt>; otherwise, <tt>thrd_error</tt> shall be
returned and the thread-specific storage pointed to by <i>key</i> has an indeterminate value.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_640_05" id="tag_17_640_05"></a>ERRORS</h4>
<blockquote>
<p>No errors are defined.</p>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_640_06" id="tag_17_640_06"></a>EXAMPLES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_640_07" id="tag_17_640_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>The <i>tss_create</i>() function performs no implicit synchronization. It is the responsibility of the application writer to
ensure that it is called exactly once per key before use of the key.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_640_08" id="tag_17_640_08"></a>RATIONALE</h4>
<blockquote>
<p>If the value associated with a key needs to be updated during the lifetime of the thread, it may be necessary to release the
storage associated with the old value before the new value is bound. Although the <a href=
"../functions/tss_set.html"><i>tss_set</i>()</a> function could do this automatically, this feature is not needed often enough to
justify the added complexity. Instead, the application is responsible for freeing the stale storage:</p>
<pre>
<tt>old = tss_get(key);
new = allocate();
destructor(old);
tss_set(key, new);
</tt></pre>
<p>There is no notion of a destructor-safe function. If an application does not call <a href=
"../functions/thrd_exit.html"><i>thrd_exit</i>()</a> or <a href="../functions/pthread_exit.html"><i>pthread_exit</i>()</a> from a
signal handler, or if, while calling async-unsafe functions, it blocks any signal whose handler might call <a href=
"../functions/thrd_exit.html"><i>thrd_exit</i>()</a> or <a href="../functions/pthread_exit.html"><i>pthread_exit</i>()</a>, all
functions can be safely called from destructors.</p>
<p>The <i>tss_create</i>() function is not affected by signal handlers for the reasons stated in XRAT <a href=
"../xrat/V4_xsh_chap01.html#tag_22_02_03"><i>B.2.3 Error Numbers</i></a>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_640_09" id="tag_17_640_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_640_10" id="tag_17_640_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/pthread_exit.html#"><i>pthread_exit</i>()</a>, <a href=
"../functions/pthread_key_create.html#"><i>pthread_key_create</i>()</a>, <a href=
"../functions/thrd_exit.html#"><i>thrd_exit</i>()</a>, <a href="../functions/tss_delete.html#"><i>tss_delete</i>()</a>, <a href=
"../functions/tss_get.html#"><i>tss_get</i>()</a></p>
<p>XBD <a href="../basedefs/threads.h.html"><i>&lt;threads.h&gt;</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_640_11" id="tag_17_640_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 8. Included for alignment with the ISO/IEC&nbsp;9899:2018 standard.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/truncate.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/tss_delete.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
