<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>General Concepts</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../basedefs/V1_chap03.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../basedefs/V1_chap05.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright Â© 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a>
<h2><a name="tag_04" id="tag_04"></a>4. General Concepts</h2>
<p>For the purposes of POSIX.1-2024, the general concepts given in <a href="#tag_04">4. General Concepts</a> apply. <basefont size=
"2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>No shading to denote extensions or options occurs in this chapter. Where the terms and definitions given in this chapter are
used elsewhere in text related to extensions and options, they are shaded as appropriate.</dd>
</dl>
<basefont size="3">
<h3><a name="tag_04_01" id="tag_04_01"></a>4.1 Case Insensitive Comparisons</h3>
<p>When a standard utility or function that uses regular expressions or pattern matching specifies that matching shall be case
insensitive, then if a string would match the regular expression or pattern when doing a case-sensitive match, the same string with
any of its characters replaced with their case counterparts, as defined by the <b>toupper</b> and <b>tolower</b> character mappings
(see <a href="../basedefs/V1_chap07.html#tag_07_03_01"><i>7.3.1 LC_CTYPE</i></a>), shall also match when doing a case-insensitive
match.</p>
<p>This definition of case-insensitive processing is intended to allow matching of multi-character collating elements as well as
characters, as each character in the string is matched using both its cases. For example, in a locale with a <tt>"Ch"</tt>
multi-character collating element (see <a href="../basedefs/V1_chap07.html#tag_07_03_02"><i>7.3.2 LC_COLLATE</i></a>), the bracket
expression <tt>"[[.Ch.]]"</tt> (see <a href="../basedefs/V1_chap09.html#tag_09_03_05"><i>9.3.5 RE Bracket Expression</i></a> item
4) matches the strings <tt>"ch"</tt>, <tt>"Ch"</tt>, <tt>"cH"</tt>, and <tt>"CH"</tt> when matching without regard to case.</p>
<h3><a name="tag_04_02" id="tag_04_02"></a>4.2 Concurrent Execution</h3>
<p>Functions that suspend the execution of the calling thread shall not cause the execution of other threads to be indefinitely
suspended.</p>
<h3><a name="tag_04_03" id="tag_04_03"></a>4.3 Default Initialization</h3>
<p>Default initialization causes an object to be initialized according to these rules:</p>
<ul>
<li>
<p>If it has pointer type, it is initialized to a null pointer.</p>
</li>
<li>
<p>If it has arithmetic type, it is initialized to (positive or unsigned) zero.</p>
</li>
<li>
<p>If it is an aggregate, every member is initialized (recursively) according to these rules.</p>
</li>
<li>
<p>If it is a union, the first named member is initialized (recursively) according to these rules.</p>
</li>
</ul>
<p>For an object of aggregate type with an explicit initializer, the initialization shall occur in initializer list order, each
initializer provided for a particular subobject overriding any previously listed initializer for the same subobject; all subobjects
that are not initialized explicitly shall be initialized implicitly according to the rules for default initialization.</p>
<p>Objects with static storage duration but no explicit initializer shall be initialized implicitly according to the rules for
default initialization.</p>
<p>An explicit initializer of <tt>{ 0 }</tt> works to perform explicit default initialization for any object of scalar or aggregate
type, and for any storage duration. <basefont size="2"></p>
<dl>
<dt><b>Notes:</b></dt>
<dd>
<ol>
<li>
<p>The ISO&nbsp;C standard does not require a compiler to set any field alignment padding bits in a structure or array definition
to a particular value. Because of this, a structure initialized using <tt>{ 0 }</tt> might not <a href=
"../functions/memcmp.html"><i>memcmp</i>()</a> as equal to the same structure initialized using <a href=
"../functions/memset.html"><i>memset</i>()</a> to zero. For consistent results, portable applications comparing structures should
test each field individually.</p>
</li>
<li>
<p>If an implementation treats the all-zero bit pattern of a floating-point object as equivalent to positive 0, then <a href=
"../functions/memset.html"><i>memset</i>()</a> to zero and <a href="../functions/calloc.html"><i>calloc</i>()</a> have the same
effects as default initialization for all named members of a structure. Implementations that define __STDC_IEC_559__ guarantee that
the all-zero bit pattern of a floating-point object represents 0.0.</p>
</li>
</ol>
</dd>
</dl>
<basefont size="3">
<h3><a name="tag_04_04" id="tag_04_04"></a>4.4 Directory Operations</h3>
<p>All file system operations that read or search a directory or that modify the contents of a directory (for example creating,
unlinking, or renaming a file) shall operate atomically. That is, each operation shall either have its entire effect and succeed,
or shall not affect the file system and shall fail. Furthermore, these operations shall be serializable; that is, the state of the
file system and of the results of each operation shall always be values that would be obtained if the operations were executed one
after the other.</p>
<h3><a name="tag_04_05" id="tag_04_05"></a>4.5 Directory Protection</h3>
<p>If a directory is writable and the mode bit S_ISVTX is set on the directory, a process may remove or rename files within that
directory only if one or more of the following is true:</p>
<ul>
<li>
<p>The effective user ID of the process is the same as that of the owner ID of the file.</p>
</li>
<li>
<p>The effective user ID of the process is the same as that of the owner ID of the directory.</p>
</li>
<li>
<p>The process has appropriate privileges.</p>
</li>
<li>
<p>Optionally, the file is writable by the process. Whether or not files that are writable by the process can be removed or renamed
is implementation-defined.</p>
</li>
</ul>
<p>If the S_ISVTX bit is set on a non-directory file, the behavior is unspecified.</p>
<h3><a name="tag_04_06" id="tag_04_06"></a>4.6 Extended Security Controls</h3>
<p>An implementation may provide implementation-defined extended security controls (see <a href=
"../basedefs/V1_chap03.html#tag_03_135"><i>3.135 Extended Security Controls</i></a>). These permit an implementation to provide
security mechanisms to implement different security policies than those described in POSIX.1-2024. These mechanisms shall not alter
or override the defined semantics of any of the interfaces in POSIX.1-2024.</p>
<h3><a name="tag_04_07" id="tag_04_07"></a>4.7 File Access Permissions</h3>
<p>The standard file access control mechanism uses the file permission bits, as described below.</p>
<p>Implementations may provide <i>additional</i> or <i>alternate</i> file access control mechanisms, or both. An additional access
control mechanism shall only further restrict the access permissions defined by the file permission bits. An alternate file access
control mechanism shall:</p>
<ul>
<li>
<p>Specify file permission bits for the file owner class, file group class, and file other class of that file, corresponding to the
access permissions.</p>
</li>
<li>
<p>Be enabled only by explicit user action, on a per-file basis by the file owner or a user with appropriate privileges.</p>
</li>
<li>
<p>Be disabled for a file after the file permission bits are changed for that file with <a href=
"../functions/chmod.html"><i>chmod</i>()</a>. The disabling of the alternate mechanism need not disable any additional mechanisms
supported by an implementation.</p>
</li>
</ul>
<p>Whenever a process requests file access permission for read, write, or execute/search, if no additional mechanism denies access,
access shall be determined as follows:</p>
<ul>
<li>
<p>If a process has appropriate privileges:</p>
<ul>
<li>
<p>If read, write, or directory search permission is requested, access shall be granted.</p>
</li>
<li>
<p>If execute permission is requested, access shall be granted if execute permission is granted to at least one user by the file
permission bits or by an alternate access control mechanism; otherwise, access shall be denied.</p>
</li>
</ul>
</li>
<li>
<p>Otherwise:</p>
<ul>
<li>
<p>The file permission bits of a file contain read, write, and execute/search permissions for the file owner class, file group
class, and file other class.</p>
</li>
<li>
<p>Access shall be granted if an alternate access control mechanism is not enabled and the requested access permission bit is set
for the class (file owner class, file group class, or file other class) to which the process belongs, or if an alternate access
control mechanism is enabled and it allows the requested access; otherwise, access shall be denied.</p>
</li>
</ul>
</li>
</ul>
<h3><a name="tag_04_08" id="tag_04_08"></a>4.8 File Hierarchy</h3>
<p>Files in the system are organized in a hierarchical structure in which all of the non-terminal nodes are directories and all of
the terminal nodes are any other type of file. Since multiple directory entries may refer to the same file, the hierarchy is
properly described as a &quot;directed graph&quot;.</p>
<h3><a name="tag_04_09" id="tag_04_09"></a>4.9 Filenames</h3>
<p>Uppercase and lowercase letters shall retain their unique identities between conforming implementations.</p>
<h3><a name="tag_04_10" id="tag_04_10"></a>4.10 Filename Portability</h3>
<p>For a filename to be portable across implementations conforming to POSIX.1-2024, it shall consist only of the portable filename
character set as defined in <a href="../basedefs/V1_chap03.html#tag_03_265"><i>3.265 Portable Filename Character Set</i></a>.
<basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>Applications should avoid using filenames that have the &lt;hyphen-minus&gt; character as the first character since this may
cause problems when filenames are passed as command line arguments.</dd>
</dl>
<basefont size="3">
<h3><a name="tag_04_11" id="tag_04_11"></a>4.11 File System Cache</h3>
<p>If the file system is accessed via a memory cache, file-related requirements stated in the rest of this standard shall apply to
the cache, except where explicitly stated otherwise: this includes directory atomicity and serializability requirements (see
<a href="#tag_04_04">4.4 Directory Operations</a>), file times update requirements (see <a href="#tag_04_12">4.12 File Times
Update</a>), and read-write serializability requirements (see <a href="../functions/write.html#tag_17_699"><i>write</i>()</a>).
Cache entries shall be transferred to the underlying storage as the result of successful calls to <a href=
"../functions/fdatasync.html"><i>fdatasync</i>()</a>, <a href="../functions/fsync.html"><i>fsync</i>()</a>, or <a href=
"../functions/aio_fsync.html"><i>aio_fsync</i>()</a>, and may be transferred to storage automatically at other times. Such
transfers shall be atomic, with minimum units being directory entries (for directory contents), aligned data blocks of the
fundamental file system block size (for regular-file contents; see <a href=
"../basedefs/sys_statvfs.h.html"><i>&lt;sys/statvfs.h&gt;</i></a>), and all attributes of a single file (for file attributes).
<basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>If the system crashes before the cache is fully transferred, later operations' effects may be present in storage with earlier
effects missing.</dd>
</dl>
<basefont size="3"> <basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>Operations that create or modify multiple directory entries, aligned data blocks, or file attributes (e.g., <a href=
"../functions/mkdir.html"><i>mkdir</i>()</a>, <a href="../functions/rename.html"><i>rename</i>()</a>, <a href=
"../functions/write.html"><i>write</i>()</a> with large buffer size, <a href="../functions/open.html"><i>open</i>()</a> with
O_CREAT) may have only part of their effects transferred to storage, and after a crash these operations may appear to have been
only partly done, with the parts not necessarily done in any order. For example, only the second half of a <a href=
"../functions/write.html"><i>write</i>()</a> may be transferred; or <tt>rename("a","b")</tt> may result in <b>b</b> being created
without <b>a</b> being removed.</dd>
</dl>
<basefont size="3"> <basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>Although conforming file systems are required to perform all caching as described above, some file systems may support
non-conforming configurations (for example via mount options) for which this is not the case. Applications that are used on
non-conforming file systems cannot rely on files being synchronized properly.</dd>
</dl>
<basefont size="3">
<h3><a name="tag_04_12" id="tag_04_12"></a>4.12 File Times Update</h3>
<p>Many operations have requirements to update file timestamps. These requirements do not apply to streams that have no underlying
file description (for example, memory streams created by <a href="../functions/open_memstream.html"><i>open_memstream</i>()</a>
have no underlying file description).</p>
<p>Each file has three distinct associated timestamps: the time of last data access, the time of last data modification, and the
time the file status last changed. These values are returned in the file characteristics structure <b>struct stat</b>, as described
in <a href="../basedefs/sys_stat.h.html"><i>&lt;sys/stat.h&gt;</i></a>.</p>
<p>Each function or utility in POSIX.1-2024 that reads or writes data (even if the data does not change) or performs an operation
to change file status (even if the file status does not change) indicates which of the appropriate timestamps shall be marked for
update. If an implementation of such a function or utility marks for update one of these timestamps in a place or time not
specified by POSIX.1-2024, this shall be documented, except that any changes caused by pathname resolution need not be documented.
For the other functions or utilities in POSIX.1-2024 (those that are not explicitly required to read or write file data or change
file status, but that in some implementations happen to do so), the effect is unspecified.</p>
<p>An implementation may update timestamps that are marked for update immediately, or it may update such timestamps periodically.
At the point in time when an update occurs, any marked timestamps shall be set to the current time and the update marks shall be
cleared. All timestamps that are marked for update shall be updated when the file ceases to be open by any process or before a
<a href="../functions/fstat.html"><i>fstat</i>()</a>, <a href="../functions/fstatat.html"><i>fstatat</i>()</a>, <a href=
"../functions/fsync.html"><i>fsync</i>()</a>, <a href="../functions/futimens.html"><i>futimens</i>()</a>, <a href=
"../functions/lstat.html"><i>lstat</i>()</a>, <a href="../functions/stat.html"><i>stat</i>()</a>, <a href=
"../functions/utimensat.html"><i>utimensat</i>()</a>, or <a href="../functions/utimes.html"><i>utimes</i>()</a> is successfully
performed on the file. Other times at which updates are done are unspecified. Marks for update, and updates themselves, shall not
be done for files on read-only file systems; see <a href="../basedefs/V1_chap03.html#tag_03_295"><i>3.295 Read-Only File
System</i></a>.</p>
<p>The resolution of timestamps of files in a file system is implementation-defined, but shall be no coarser than one-second
resolution. The three timestamps shall always have values that are supported by the file system. Whenever any of a file's
timestamps are to be set to a value <i>V</i> according to the rules of the preceding paragraphs of this section, the implementation
shall immediately set the timestamp to the greatest value supported by the file system that is not greater than <i>V</i>.</p>
<h3><a name="tag_04_13" id="tag_04_13"></a>4.13 Host and Network Byte Orders</h3>
<p>When data is transmitted over the network, it is sent as a sequence of octets (8-bit unsigned values). If an entity (such as an
address or a port number) can be larger than 8 bits, it needs to be stored in several octets. The convention is that all such
values are stored with 8 bits in each octet, and with the first (lowest-addressed) octet holding the most-significant bits. This is
called &quot;network byte order&quot;.</p>
<p>Network byte order may not be convenient for processing actual values. For this, it is more sensible for values to be stored as
ordinary integers. This is known as &quot;host byte order&quot;. In host byte order:</p>
<ul>
<li>
<p>The most significant bit might not be stored in the first byte in address order.</p>
</li>
<li>
<p>Bits might not be allocated to bytes in any obvious order at all.</p>
</li>
</ul>
<p>8-bit values stored in <b>uint8_t</b> objects do not require conversion to or from host byte order, as they have the same
representation. 16 and 32-bit values can be converted using the <a href="../functions/htonl.html"><i>htonl</i>()</a>, <a href=
"../functions/htons.html"><i>htons</i>()</a>, <a href="../functions/ntohl.html"><i>ntohl</i>()</a>, and <a href=
"../functions/ntohs.html"><i>ntohs</i>()</a> functions. When reading data that is to be converted to host byte order, it should
either be received directly into a <b>uint16_t</b> or <b>uint32_t</b> object or should be copied from an array of bytes using
<a href="../functions/memcpy.html"><i>memcpy</i>()</a> or similar. Passing the data through other types could cause the byte order
to be changed. Similar considerations apply when sending data.</p>
<h3><a name="tag_04_14" id="tag_04_14"></a>4.14 Measurement of Execution Time</h3>
<p>The mechanism used to measure execution time shall be implementation-defined. The implementation shall also define to whom the
CPU time that is consumed by interrupt handlers and system services on behalf of the operating system will be charged. See <a href=
"../basedefs/V1_chap03.html#tag_03_90"><i>3.90 CPU Time (Execution Time)</i></a>.</p>
<h3><a name="tag_04_15" id="tag_04_15"></a>4.15 Memory Ordering and Synchronization</h3>
<h4><a name="tag_04_15_01" id="tag_04_15_01"></a>4.15.1 Memory Ordering</h4>
<h5 class="header4"><a name="tag_04_15_01_01" id="tag_04_15_01_01"></a>4.15.1.1 Data Races</h5>
<p>The value of an object visible to a thread <i>T</i> at a particular point is the initial value of the object, a value stored in
the object by <i>T</i>, or a value stored in the object by another thread, according to the rules below.</p>
<p>Two expression evaluations <i>conflict</i> if one of them modifies a memory location and the other one reads or modifies the
same memory location.</p>
<p>This standard defines a number of atomic operations (see <a href="../basedefs/stdatomic.h.html"><i>&lt;stdatomic.h&gt;</i></a>)
and operations on mutexes (see <a href="../basedefs/threads.h.html"><i>&lt;threads.h&gt;</i></a>) that are specially identified as
synchronization operations. These operations play a special role in making assignments in one thread visible to another. A
synchronization operation on one or more memory locations is either an <i>acquire operation</i>, a <i>release operation</i>, both
an acquire and release operation, or a <i>consume operation</i>. A synchronization operation without an associated memory location
is a <i>fence</i> and can be either an acquire fence, a release fence, or both an acquire and release fence. In addition, there are
<i>relaxed atomic operations</i>, which are not synchronization operations, and atomic <i>read-modify-write operations</i>, which
have special characteristics. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>For example, a call that acquires a mutex will perform an acquire operation on the locations composing the mutex.
Correspondingly, a call that releases the same mutex will perform a release operation on those same locations. Informally,
performing a release operation on <i>A</i> forces prior side effects on other memory locations to become visible to other threads
that later perform an acquire or consume operation on <i>A</i>. Relaxed atomic operations are not included as synchronization
operations although, like synchronization operations, they cannot contribute to data races.</dd>
</dl>
<basefont size="3">
<p>All modifications to a particular atomic object <i>M</i> occur in some particular total order, called the modification order of
<i>M</i>. If <i>A</i> and <i>B</i> are modifications of an atomic object <i>M</i>, and <i>A</i> happens before <i>B</i>, then
<i>A</i> shall precede <i>B</i> in the modification order of <i>M</i>, which is defined below. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>This states that the modification orders must respect the &quot;happens before&quot; relation.</dd>
</dl>
<basefont size="3"> <basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>There is a separate order for each atomic object. There is no requirement that these can be combined into a single total order
for all objects. In general this will be impossible since different threads may observe modifications to different variables in
inconsistent orders.</dd>
</dl>
<basefont size="3">
<p>A <i>release sequence</i> headed by a release operation <i>A</i> on an atomic object <i>M</i> is a maximal contiguous
sub-sequence of side effects in the modification order of <i>M</i>, where the first operation is <i>A</i> and every subsequent
operation either is performed by the same thread that performed the release or is an atomic read-modify-write operation.</p>
<p>Certain system interfaces <i>synchronize with</i> other system interfaces performed by another thread. In particular, an atomic
operation <i>A</i> that performs a release operation on an object <i>M</i> shall synchronize with an atomic operation <i>B</i> that
performs an acquire operation on <i>M</i> and reads a value written by any side effect in the release sequence headed by <i>A</i>.
<basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>Except in the specified cases, reading a later value does not necessarily ensure visibility as described below. Such a
requirement would sometimes interfere with efficient implementation.</dd>
</dl>
<basefont size="3"> <basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>The specifications of the synchronization operations define when one reads the value written by another. For atomic variables,
the definition is clear. All operations on a given mutex occur in a single total order. Each mutex acquisition &quot;reads the value
written&quot; by the last mutex release.</dd>
</dl>
<basefont size="3">
<p>An evaluation <i>A</i> <i>carries a dependency</i> to an evaluation <i>B</i> if:</p>
<ul>
<li>
<p>the value of <i>A</i> is used as an operand of <i>B</i>, unless:</p>
<ul>
<li>
<p><i>B</i> is an invocation of the <a href="../functions/kill_dependency.html"><i>kill_dependency</i>()</a> macro,</p>
</li>
<li>
<p><i>A</i> is the left operand of a <tt>&amp;&</tt> or <tt>||</tt> operator,</p>
</li>
<li>
<p><i>A</i> is the left operand of a <tt>?:</tt> operator, or</p>
</li>
<li>
<p><i>A</i> is the left operand of a <tt>,</tt> (comma) operator; or</p>
</li>
</ul>
</li>
<li>
<p><i>A</i> writes a scalar object or bit-field <i>M</i>, <i>B</i> reads from <i>M</i> the value written by <i>A</i>, and <i>A</i>
is sequenced before <i>B</i>, or</p>
</li>
<li>
<p>for some evaluation <i>X</i>, <i>A</i> carries a dependency to <i>X</i> and <i>X</i> carries a dependency to <i>B</i>.</p>
</li>
</ul>
<p>An evaluation <i>A</i> is <i>dependency-ordered before</i> an evaluation <i>B</i> if:</p>
<ul>
<li>
<p><i>A</i> performs a release operation on an atomic object <i>M</i>, and, in another thread, <i>B</i> performs a consume
operation on <i>M</i> and reads a value written by any side effect in the release sequence headed by <i>A</i>, or</p>
</li>
<li>
<p>for some evaluation <i>X</i>, <i>A</i> is dependency-ordered before <i>X</i> and <i>X</i> carries a dependency to <i>B</i>.</p>
</li>
</ul>
<p>An evaluation <i>A</i> <i>inter-thread happens before</i> an evaluation <i>B</i> if <i>A</i> synchronizes with <i>B</i>,
<i>A</i> is dependency-ordered before <i>B</i>, or, for some evaluation <i>X</i>:</p>
<ul>
<li>
<p><i>A</i> synchronizes with <i>X</i> and <i>X</i> is sequenced before <i>B</i>,</p>
</li>
<li>
<p><i>A</i> is sequenced before <i>X</i> and <i>X</i> inter-thread happens before <i>B</i>, or</p>
</li>
<li>
<p><i>A</i> inter-thread happens before <i>X</i> and <i>X</i> inter-thread happens before <i>B</i>.</p>
</li>
</ul>
<basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>The &quot;inter-thread happens before&quot; relation describes arbitrary concatenations of &quot;sequenced before&quot;, &quot;synchronizes with&quot;,
and &quot;dependency-ordered before&quot; relationships, with two exceptions. The first exception is that a concatenation is not permitted
to end with &quot;dependency-ordered before&quot; followed by &quot;sequenced before&quot;. The reason for this limitation is that a consume
operation participating in a &quot;dependency-ordered before&quot; relationship provides ordering only with respect to operations to which
this consume operation actually carries a dependency. The reason that this limitation applies only to the end of such a
concatenation is that any subsequent release operation will provide the required ordering for a prior consume operation. The second
exception is that a concatenation is not permitted to consist entirely of &quot;sequenced before&quot;. The reasons for this limitation are
(1) to permit &quot;inter-thread happens before&quot; to be transitively closed and (2) the &quot;happens before&quot; relation, defined below,
provides for relationships consisting entirely of &quot;sequenced before&quot;.</dd>
</dl>
<basefont size="3">
<p>An evaluation <i>A</i> <i>happens before</i> an evaluation <i>B</i> if <i>A</i> is sequenced before <i>B</i> or <i>A</i>
inter-thread happens before <i>B</i>. The implementation shall ensure that a cycle in the &quot;happens before&quot; relation never occurs.
<basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>This cycle would otherwise be possible only through the use of consume operations.</dd>
</dl>
<basefont size="3">
<p>A <i>visible side effect</i> <i>A</i> on an object <i>M</i> with respect to a value computation <i>B</i> of <i>M</i> satisfies
the conditions:</p>
<ul>
<li>
<p><i>A</i> happens before <i>B</i>, and</p>
</li>
<li>
<p>there is no other side effect <i>X</i> to <i>M</i> such that <i>A</i> happens before <i>X</i> and <i>X</i> happens before
<i>B</i>.</p>
</li>
</ul>
<p>The value of a non-atomic scalar object <i>M</i>, as determined by evaluation <i>B</i>, shall be the value stored by the visible
side effect <i>A</i>. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>If there is ambiguity about which side effect to a non-atomic object is visible, then there is a data race and the behavior is
undefined.</dd>
</dl>
<basefont size="3"> <basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>This states that operations on ordinary variables are not visibly reordered. This is not actually detectable without data
races, but it is necessary to ensure that data races, as defined here, and with suitable restrictions on the use of atomics,
correspond to data races in a simple interleaved (sequentially consistent) execution.</dd>
</dl>
<basefont size="3">
<p>The value of an atomic object <i>M</i>, as determined by evaluation <i>B</i>, shall be the value stored by some side effect
<i>A</i> that modifies <i>M</i>, where <i>B</i> does not happen before <i>A</i>. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>The set of side effects from which a given evaluation might take its value is also restricted by the rest of the rules
described here, and in particular, by the coherence requirements below.</dd>
</dl>
<basefont size="3">
<p>If an operation <i>A</i> that modifies an atomic object <i>M</i> happens before an operation <i>B</i> that modifies <i>M</i>,
then <i>A</i> shall be earlier than <i>B</i> in the modification order of <i>M</i>. (This is known as &quot;write-write
coherence&quot;.)</p>
<p>If a value computation <i>A</i> of an atomic object <i>M</i> happens before a value computation <i>B</i> of <i>M</i>, and
<i>A</i> takes its value from a side effect <i>X</i> on <i>M</i>, then the value computed by <i>B</i> shall either be the value
stored by <i>X</i> or the value stored by a side effect <i>Y</i> on <i>M</i>, where <i>Y</i> follows <i>X</i> in the modification
order of <i>M</i>. (This is known as &quot;read-read coherence&quot;.)</p>
<p>If a value computation <i>A</i> of an atomic object <i>M</i> happens before an operation <i>B</i> on <i>M</i>, then <i>A</i>
shall take its value from a side effect <i>X</i> on <i>M</i>, where <i>X</i> precedes <i>B</i> in the modification order of
<i>M</i>. (This is known as &quot;read-write coherence&quot;.)</p>
<p>If a side effect <i>X</i> on an atomic object <i>M</i> happens before a value computation <i>B</i> of <i>M</i>, then the
evaluation <i>B</i> shall take its value from <i>X</i> or from a side effect <i>Y</i> that follows <i>X</i> in the modification
order of <i>M</i>. (This is known as &quot;write-read coherence&quot;.) <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>This effectively disallows implementation reordering of atomic operations to a single object, even if both operations are
&quot;relaxed&quot; loads. By doing so, it effectively makes the &quot;cache coherence&quot; guarantee provided by most hardware available to POSIX
atomic operations.</dd>
</dl>
<basefont size="3"> <basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>The value observed by a load of an atomic object depends on the &quot;happens before&quot; relation, which in turn depends on the
values observed by loads of atomic objects. The intended reading is that there must exist an association of atomic loads with
modifications they observe that, together with suitably chosen modification orders and the &quot;happens before&quot; relation derived as
described above, satisfy the resulting constraints as imposed here.</dd>
</dl>
<basefont size="3">
<p>An application contains a data race if it contains two conflicting actions in different threads, at least one of which is not
atomic, and neither happens before the other. Any such data race results in undefined behavior.</p>
<h5 class="header4"><a name="tag_04_15_01_02" id="tag_04_15_01_02"></a>4.15.1.2 Memory Order and Consistency</h5>
<p>The enumerated type <b>memory_order</b>, defined in <a href="../basedefs/stdatomic.h.html"><i>&lt;stdatomic.h&gt;</i></a> (if
supported), specifies the detailed regular (non-atomic) memory synchronization operations as defined in <a href=
"#tag_04_15_01_01">4.15.1.1 Data Races</a> and may provide for operation ordering. Its enumeration constants specify memory order
as follows:</p>
<p>For <tt>memory_order_relaxed</tt>, no operation orders memory.</p>
<p>For <tt>memory_order_release</tt>, <tt>memory_order_acq_rel</tt>, and <tt>memory_order_seq_cst</tt>, a store operation performs
a release operation on the affected memory location.</p>
<p>For <tt>memory_order_acquire</tt>, <tt>memory_order_acq_rel</tt>, and <tt>memory_order_seq_cst</tt>, a load operation performs
an acquire operation on the affected memory location.</p>
<p>For <tt>memory_order_consume</tt>, a load operation performs a consume operation on the affected memory location.</p>
<p>There shall be a single total order <i>S</i> on all <tt>memory_order_seq_cst</tt> operations, consistent with the &quot;happens
before&quot; order and modification orders for all affected locations, such that each <tt>memory_order_seq_cst</tt> operation <i>B</i>
that loads a value from an atomic object <i>M</i> observes one of the following values:</p>
<ul>
<li>
<p>the result of the last modification <i>A</i> of <i>M</i> that precedes <i>B</i> in <i>S</i>, if it exists, or</p>
</li>
<li>
<p>if <i>A</i> exists, the result of some modification of <i>M</i> that is not <tt>memory_order_seq_cst</tt> and that does not
happen before <i>A</i>, or</p>
</li>
<li>
<p>if <i>A</i> does not exist, the result of some modification of <i>M</i> that is not <tt>memory_order_seq_cst</tt>.</p>
</li>
</ul>
<basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>Although it is not explicitly required that <i>S</i> include lock operations, it can always be extended to an order that does
include lock and unlock operations, since the ordering between those is already included in the &quot;happens before&quot; ordering.</dd>
</dl>
<basefont size="3"> <basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>Atomic operations specifying <tt>memory_order_relaxed</tt> are relaxed only with respect to memory ordering. Implementations
must still guarantee that any given atomic access to a particular atomic object be indivisible with respect to all other atomic
accesses to that object.</dd>
</dl>
<basefont size="3">
<p>For an atomic operation <i>B</i> that reads the value of an atomic object <i>M</i>, if there is a <tt>memory_order_seq_cst</tt>
fence <i>X</i> sequenced before <i>B</i>, then <i>B</i> observes either the last <tt>memory_order_seq_cst</tt> modification of
<i>M</i> preceding <i>X</i> in the total order <i>S</i> or a later modification of <i>M</i> in its modification order.</p>
<p>For atomic operations <i>A</i> and <i>B</i> on an atomic object <i>M</i>, where <i>A</i> modifies <i>M</i> and <i>B</i> takes
its value, if there is a <tt>memory_order_seq_cst</tt> fence <i>X</i> such that <i>A</i> is sequenced before <i>X</i> and <i>B</i>
follows <i>X</i> in <i>S</i>, then <i>B</i> observes either the effects of <i>A</i> or a later modification of <i>M</i> in its
modification order.</p>
<p>For atomic modifications <i>A</i> and <i>B</i> of an atomic object <i>M</i>, <i>B</i> occurs later than <i>A</i> in the
modification order of <i>M</i> if:</p>
<ul>
<li>
<p>there is a <tt>memory_order_seq_cst</tt> fence <i>X</i> such that <i>A</i> is sequenced before <i>X</i>, and <i>X</i> precedes
<i>B</i> in <i>S</i>, or</p>
</li>
<li>
<p>there is a <tt>memory_order_seq_cst</tt> fence <i>Y</i> such that <i>Y</i> is sequenced before <i>B</i>, and <i>A</i> precedes
<i>Y</i> in <i>S</i>, or</p>
</li>
<li>
<p>there are <tt>memory_order_seq_cst</tt> fences <i>X</i> and <i>Y</i> such that <i>A</i> is sequenced before <i>X</i>, <i>Y</i>
is sequenced before <i>B</i>, and <i>X</i> precedes <i>Y</i> in <i>S</i>.</p>
</li>
</ul>
<p>Atomic read-modify-write operations shall always read the last value (in the modification order) stored before the write
associated with the read-modify-write operation.</p>
<p>An atomic store shall only store a value that has been computed from constants and input values by a finite sequence of
evaluations, such that each evaluation observes the values of variables as computed by the last prior assignment in the sequence.
The ordering of evaluations in this sequence shall be such that:</p>
<ul>
<li>
<p>If an evaluation <i>B</i> observes a value computed by <i>A</i> in a different thread, then <i>B</i> does not happen before
<i>A</i>.</p>
</li>
<li>
<p>If an evaluation <i>A</i> is included in the sequence, then all evaluations that assign to the same variable and happen before
<i>A</i> are also included.</p>
</li>
</ul>
<basefont size="2">
<dl>
<dt><b>Note:</b></dt>
<dd>The second requirement disallows &quot;out-of-thin-air&quot;, or &quot;speculative&quot; stores of atomics when relaxed atomics are used. Since
unordered operations are involved, evaluations can appear in this sequence out of thread order.</dd>
</dl>
<basefont size="3">
<h4><a name="tag_04_15_02" id="tag_04_15_02"></a>4.15.2 Memory Synchronization</h4>
<p>In order to avoid data races, applications shall ensure that non-lock-free access to any memory location by more than one thread
of control (threads or processes) is restricted such that no thread of control can read or modify a memory location while another
thread of control might be modifying it. Such access can be restricted using functions that synchronize thread execution and also
synchronize memory with respect to other threads. The following functions shall synchronize memory with respect to other threads on
all successful calls:</p>
<table cellpadding="3">
<tr valign="top">
<td align="left">
<p class="tent"><br>
<a href="../functions/cnd_broadcast.html"><i>cnd_broadcast</i>()</a><br>
<a href="../functions/cnd_signal.html"><i>cnd_signal</i>()</a><br>
<a href="../functions/fork.html"><i>fork</i>()</a><br>
<a href="../functions/pthread_barrier_wait.html"><i>pthread_barrier_wait</i>()</a><br>
<a href="../functions/pthread_cond_broadcast.html"><i>pthread_cond_broadcast</i>()</a><br>
<a href="../functions/pthread_cond_signal.html"><i>pthread_cond_signal</i>()</a><br>
<a href="../functions/pthread_create.html"><i>pthread_create</i>()</a><br>
<a href="../functions/pthread_join.html"><i>pthread_join</i>()</a><br>
<a href="../functions/pthread_spin_lock.html"><i>pthread_spin_lock</i>()</a><br>
<a href="../functions/pthread_spin_trylock.html"><i>pthread_spin_trylock</i>()</a><br>
<a href="../functions/pthread_spin_unlock.html"><i>pthread_spin_unlock</i>()</a><br>
&nbsp;</p>
</td>
<td align="left">
<p class="tent"><br>
<a href="../functions/pthread_rwlock_clockrdlock.html"><i>pthread_rwlock_clockrdlock</i>()</a><br>
<a href="../functions/pthread_rwlock_clockwrlock.html"><i>pthread_rwlock_clockwrlock</i>()</a><br>
<a href="../functions/pthread_rwlock_rdlock.html"><i>pthread_rwlock_rdlock</i>()</a><br>
<a href="../functions/pthread_rwlock_timedrdlock.html"><i>pthread_rwlock_timedrdlock</i>()</a><br>
<a href="../functions/pthread_rwlock_timedwrlock.html"><i>pthread_rwlock_timedwrlock</i>()</a><br>
<a href="../functions/pthread_rwlock_tryrdlock.html"><i>pthread_rwlock_tryrdlock</i>()</a><br>
<a href="../functions/pthread_rwlock_trywrlock.html"><i>pthread_rwlock_trywrlock</i>()</a><br>
<a href="../functions/pthread_rwlock_unlock.html"><i>pthread_rwlock_unlock</i>()</a><br>
<a href="../functions/pthread_rwlock_wrlock.html"><i>pthread_rwlock_wrlock</i>()</a><br>
<a href="../functions/sem_clockwait.html"><i>sem_clockwait</i>()</a><br>
<a href="../functions/sem_post.html"><i>sem_post</i>()</a><br>
&nbsp;</p>
</td>
<td align="left">
<p class="tent"><br>
<a href="../functions/sem_timedwait.html"><i>sem_timedwait</i>()</a><br>
<a href="../functions/sem_trywait.html"><i>sem_trywait</i>()</a><br>
<a href="../functions/sem_wait.html"><i>sem_wait</i>()</a><br>
<a href="../functions/semctl.html"><i>semctl</i>()</a><br>
<a href="../functions/semop.html"><i>semop</i>()</a><br>
<a href="../functions/thrd_create.html"><i>thrd_create</i>()</a><br>
<a href="../functions/thrd_join.html"><i>thrd_join</i>()</a><br>
<a href="../functions/wait.html"><i>wait</i>()</a><br>
<a href="../functions/waitid.html"><i>waitid</i>()</a><br>
<a href="../functions/waitpid.html"><i>waitpid</i>()</a><br>
&nbsp;</p>
</td>
</tr>
</table>
<p class="tent">The <a href="../functions/pthread_once.html"><i>pthread_once</i>()</a> and <a href=
"../functions/call_once.html"><i>call_once</i>()</a> functions shall synchronize memory for the first successful call in each
thread for a given <b>pthread_once_t</b> or <b>once_flag</b> object, respectively. If the <i>init_routine</i> called by <a href=
"../functions/pthread_once.html"><i>pthread_once</i>()</a> or <a href="../functions/call_once.html"><i>call_once</i>()</a> is a
cancellation point and is canceled, a successful call to <a href="../functions/pthread_once.html"><i>pthread_once</i>()</a> for the
same <b>pthread_once_t</b> object or to <a href="../functions/call_once.html"><i>call_once</i>()</a> for the same <b>once_flag</b>
object, made from a cancellation cleanup handler shall also synchronize memory.</p>
<p class="tent">The <a href="../functions/pthread_mutex_clocklock.html"><i>pthread_mutex_clocklock</i>()</a>, <a href=
"../functions/pthread_mutex_lock.html"><i>pthread_mutex_lock</i>()</a>, <sup>[<a href=
"javascript:open_code('RPP')">RPP|TPP</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> <a href=
"../functions/pthread_mutex_setprioceiling.html"><i>pthread_mutex_setprioceiling</i>()</a>, <img src="../images/opt-end.gif" alt=
"[Option End]" border="0"> <a href="../functions/pthread_mutex_timedlock.html"><i>pthread_mutex_timedlock</i>()</a>, and <a href=
"../functions/pthread_mutex_trylock.html"><i>pthread_mutex_trylock</i>()</a> functions shall synchronize memory on all calls that
acquire the mutex, including those that return [EOWNERDEAD]. The <a href=
"../functions/pthread_mutex_unlock.html"><i>pthread_mutex_unlock</i>()</a> function shall synchronize memory on all calls that
release the mutex. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>If the mutex type is PTHREAD_MUTEX_RECURSIVE, calls to the locking functions do not acquire the mutex if the calling thread
already owns it, and calls to <a href="../functions/pthread_mutex_unlock.html"><i>pthread_mutex_unlock</i>()</a> do not release the
mutex if it has a lock count greater than one.</dd>
</dl>
<basefont size="3">
<p class="tent">The <a href="../functions/pthread_cond_clockwait.html"><i>pthread_cond_clockwait</i>()</a>, <a href=
"../functions/pthread_cond_wait.html"><i>pthread_cond_wait</i>()</a>, and <a href=
"../functions/pthread_cond_timedwait.html"><i>pthread_cond_timedwait</i>()</a> functions shall synchronize memory on all calls that
release and re-acquire the specified mutex, including calls that return [EOWNERDEAD], both when the mutex is released and when it
is re-acquired. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>If the mutex type is PTHREAD_MUTEX_RECURSIVE, calls to <a href=
"../functions/pthread_cond_clockwait.html"><i>pthread_cond_clockwait</i>()</a>, <a href=
"../functions/pthread_cond_wait.html"><i>pthread_cond_wait</i>()</a>, and <a href=
"../functions/pthread_cond_timedwait.html"><i>pthread_cond_timedwait</i>()</a> do not release and re-acquire the mutex if it has a
lock count greater than one.</dd>
</dl>
<basefont size="3">
<p class="tent">The <a href="../functions/mtx_lock.html"><i>mtx_lock</i>()</a>, <a href=
"../functions/mtx_timedlock.html"><i>mtx_timedlock</i>()</a>, and <a href="../functions/mtx_trylock.html"><i>mtx_trylock</i>()</a>
functions shall synchronize memory on all calls that acquire the mutex. The <a href=
"../functions/mtx_unlock.html"><i>mtx_unlock</i>()</a> function shall synchronize memory on all calls that release the mutex.
<basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>If the mutex is a recursive mutex, calls to the locking functions do not acquire the mutex if the calling thread already owns
it, and calls to <a href="../functions/mtx_unlock.html"><i>mtx_unlock</i>()</a> do not release the mutex if it has a lock count
greater than one.</dd>
</dl>
<basefont size="3">
<p class="tent">The <a href="../functions/cnd_wait.html"><i>cnd_wait</i>()</a> and <a href=
"../functions/cnd_timedwait.html"><i>cnd_timedwait</i>()</a> functions shall synchronize memory on all calls that release and
re-acquire the specified mutex, both when the mutex is released and when it is re-acquired. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>If the mutex is a recursive mutex, calls to <a href="../functions/cnd_wait.html"><i>cnd_wait</i>()</a> and <a href=
"../functions/cnd_timedwait.html"><i>cnd_timedwait</i>()</a> do not release and re-acquire the mutex if it has a lock count greater
than one.</dd>
</dl>
<basefont size="3">
<p class="tent">Unless explicitly stated otherwise, if one of the functions named in this section returns an error, it is
unspecified whether the invocation causes memory to be synchronized.</p>
<p class="tent">Applications can allow more than one thread of control to read a memory location simultaneously.</p>
<p class="tent">For purposes of determining the existence of a data race, all lock and unlock operations on a particular
synchronization object that synchronize memory shall behave as atomic operations, and they shall occur in some particular total
order (see <a href="#tag_04_15_01">4.15.1 Memory Ordering</a>).</p>
<h3><a name="tag_04_16" id="tag_04_16"></a>4.16 Pathname Resolution</h3>
<p class="tent">Pathname resolution is performed for a process to resolve a pathname to a particular directory entry for a file in
the file hierarchy. There may be multiple pathnames that resolve to the same directory entry, and multiple directory entries for
the same file. When a process resolves a pathname of an existing directory entry, the entire pathname shall be resolved as
described below. When a process resolves a pathname of a directory entry that is to be created immediately after the pathname is
resolved, pathname resolution terminates when all components of the path prefix of the last component have been resolved. It is
then the responsibility of the process to create the final component.</p>
<p class="tent">Each filename in the pathname is located in the directory specified by its predecessor (for example, in the
pathname fragment <b>a/b</b>, file <b>b</b> is located in the directory specified by <b>a</b>). Pathname resolution shall fail if
this cannot be accomplished. If the pathname begins with a &lt;slash&gt;, the predecessor of the first filename in the pathname
shall be taken to be the root directory of the process (such pathnames are referred to as &quot;absolute pathnames&quot;). If the pathname
does not begin with a &lt;slash&gt;, the predecessor of the first filename of the pathname shall be taken to be either the current
working directory of the process or for certain interfaces the directory identified by a file descriptor passed to the interface
(such pathnames are referred to as &quot;relative pathnames&quot;).</p>
<p class="tent">The interpretation of a pathname component is dependent on the value of {NAME_MAX} and _POSIX_NO_TRUNC associated
with the path prefix of that component. If any pathname component is longer than {NAME_MAX}, the implementation shall consider this
an error.</p>
<p class="tent">A pathname that contains at least one non-&lt;slash&gt; character and that ends with one or more trailing
&lt;slash&gt; characters shall not be resolved successfully unless the last pathname component before the trailing &lt;slash&gt;
characters resolves (with symbolic links followedâsee below) to an existing directory or a directory entry that is to be created
for a directory immediately after the pathname is resolved. Interfaces using pathname resolution may specify additional
constraints<a href="#tag_foot_1"><sup><small>1</small></sup></a> when a pathname that does not name an existing directory contains
at least one non-&lt;slash&gt; character and contains one or more trailing &lt;slash&gt; characters.</p>
<p class="tent">If a symbolic link is encountered during pathname resolution, the behavior shall depend on whether the pathname
component is at the end of the pathname and on the function being performed. If all of the following are true, then pathname
resolution is complete:</p>
<ol>
<li class="tent">This is the last pathname component of the pathname.</li>
<li class="tent">The pathname has no trailing &lt;slash&gt;.</li>
<li class="tent">The function is required to act on the symbolic link itself, or certain arguments direct that the function act on
the symbolic link itself.</li>
</ol>
<p class="tent">In all other cases, the system shall prefix the remaining pathname, if any, with the contents of the symbolic link,
except that if the contents of the symbolic link is the empty string, then either pathname resolution shall fail with functions
reporting an [ENOENT] error and utilities writing an equivalent diagnostic message, or the pathname of the directory containing the
symbolic link shall be used in place of the contents of the symbolic link. If the contents of the symbolic link consist solely of
&lt;slash&gt; characters, then all leading &lt;slash&gt; characters of the remaining pathname shall be omitted from the resulting
combined pathname, leaving only the leading &lt;slash&gt; characters from the symbolic link contents. In the cases where prefixing
occurs, if the combined length exceeds {PATH_MAX}, and the implementation considers this to be an error, pathname resolution shall
fail with functions reporting an [ENAMETOOLONG] error and utilities writing an equivalent diagnostic message. Otherwise, the
resolved pathname shall be the resolution of the pathname just created. If the resulting pathname does not begin with a
&lt;slash&gt;, the predecessor of the first filename of the pathname is taken to be the directory containing the symbolic link.</p>
<p class="tent">If the system detects a loop in the pathname resolution process, pathname resolution shall fail with functions
reporting an [ELOOP] error and utilities writing an equivalent diagnostic message. The same may happen if during the resolution
process more symbolic links were followed than the implementation allows. This implementation-defined limit shall not be smaller
than {SYMLOOP_MAX}.</p>
<p class="tent">The special filename dot shall refer to the directory specified by its predecessor. The special filename dot-dot
shall refer to the parent directory of its predecessor directory. As a special case, in the root directory, dot-dot may refer to
the root directory itself.</p>
<p class="tent">A pathname consisting of a single &lt;slash&gt; shall resolve to the root directory of the process. A null pathname
shall not be successfully resolved. If a pathname begins with two successive &lt;slash&gt; characters, the first component
following the leading &lt;slash&gt; characters may be interpreted in an implementation-defined manner, although more than two
leading &lt;slash&gt; characters shall be treated as a single &lt;slash&gt; character.</p>
<p class="tent">Pathname resolution for a given pathname shall yield the same results when used by any interface in POSIX.1-2024 as
long as there are no changes to any files evaluated during pathname resolution for the given pathname between resolutions.</p>
<h3><a name="tag_04_17" id="tag_04_17"></a>4.17 Process ID Reuse</h3>
<p class="tent">A process group ID shall not be reused by the system until the process group lifetime ends.</p>
<p class="tent">A process ID shall not be reused by the system until the process lifetime ends. In addition, if there exists a
process group whose process group ID is equal to that process ID, the process ID shall not be reused by the system until the
process group lifetime ends. A process that is not a system process shall not have a process ID of 1.</p>
<h3><a name="tag_04_18" id="tag_04_18"></a>4.18 Scheduling Policy</h3>
<p class="tent">A scheduling policy affects process or thread ordering:</p>
<ul>
<li class="tent">When a process or thread is a running thread and it becomes a blocked thread</li>
<li class="tent">When a process or thread is a running thread and it becomes a preempted thread</li>
<li class="tent">When a process or thread is a blocked thread and it becomes a runnable thread</li>
<li class="tent">When a running thread calls a function that can change the priority or scheduling policy of a process or
thread</li>
<li class="tent">In other scheduling policy-defined circumstances</li>
</ul>
<p class="tent">Conforming implementations shall define the manner in which each of the scheduling policies may modify the
priorities or otherwise affect the ordering of processes or threads at each of the occurrences listed above. Additionally,
conforming implementations shall define in what other circumstances and in what manner each scheduling policy may modify the
priorities or affect the ordering of processes or threads.</p>
<h3><a name="tag_04_19" id="tag_04_19"></a>4.19 Seconds Since the Epoch</h3>
<p class="tent">A value that approximates the number of seconds that have elapsed since the Epoch. A Coordinated Universal Time
name (specified in terms of seconds (<i>tm_sec</i>), minutes (<i>tm_min</i>), hours (<i>tm_hour</i>), days since January 1 of the
year (<i>tm_yday</i>), and calendar year minus 1900 (<i>tm_year</i>)) is related to a time represented as seconds since the Epoch,
according to the expression below.</p>
<p class="tent">If the year is &lt;1970 or the value is negative, the relationship is undefined. If the year is &gt;=1970 and the
value is non-negative, the value is related to a Coordinated Universal Time name according to the C-language expression, where
<i>tm_sec</i>, <i>tm_min</i>, <i>tm_hour</i>, <i>tm_yday</i>, and <i>tm_year</i> are all integer types:</p>
<pre>
<i>tm_sec</i><tt> + </tt><i>tm_min</i><tt>*60 + </tt><i>tm_hour</i><tt>*3600 + </tt><i>tm_yday</i><tt>*86400 +
    (</tt><i>tm_year</i><tt>-70)*31536000 + ((</tt><i>tm_year</i><tt>-69)/4)*86400 -
    ((</tt><i>tm_year</i><tt>-1)/100)*86400 + ((</tt><i>tm_year</i><tt>+299)/400)*86400
</tt></pre>
<p class="tent">The relationship between the actual date and time in Coordinated Universal Time, as determined by the International
Earth Rotation Service, and the system's current value for seconds since the Epoch is unspecified.</p>
<p class="tent">How any changes to the value of seconds since the Epoch are made to align to a desired relationship with the
current actual time is implementation-defined. As represented in seconds since the Epoch, each and every day shall be accounted for
by exactly 86400 seconds. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>The last three terms of the expression add in a day for each year that follows a leap year starting with the first leap year
since the Epoch. The first term adds a day every 4 years starting in 1973, the second subtracts a day back out every 100 years
starting in 2001, and the third adds a day back in every 400 years starting in 2001. The divisions in the formula are integer
divisions; that is, the remainder is discarded leaving only the integer quotient.</dd>
</dl>
<basefont size="3">
<h3><a name="tag_04_20" id="tag_04_20"></a>4.20 Semaphore</h3>
<p class="tent">A minimum synchronization primitive to serve as a basis for more complex synchronization mechanisms to be defined
by the application program.</p>
<p class="tent">For the mandatory semaphores (those not associated with the X/Open System Interfaces (XSI) option), a semaphore is
represented as a shareable resource that has a non-negative integer value. When the value is zero, there is a (possibly empty) set
of threads awaiting the availability of the semaphore.</p>
<p class="tent">For the semaphores associated with the X/Open System Interfaces (XSI) option, a semaphore is an integer with
minimum value 0 and an implementation-defined maximum value which shall be at least 32767. The <a href=
"../functions/semget.html"><i>semget</i>()</a> function can be called to create a set or array of semaphores. A semaphore set can
contain one or more semaphores up to an implementation-defined value.</p>
<h5><a name="tag_04_20_00_01" id="tag_04_20_00_01"></a>Semaphore Lock Operation</h5>
<p class="tent">An operation that is applied to a semaphore. If, prior to the operation, the value of the semaphore is zero, the
semaphore lock operation shall cause the calling thread to be blocked and added to the set of threads awaiting the semaphore;
otherwise, the value shall be decremented.</p>
<h5><a name="tag_04_20_00_02" id="tag_04_20_00_02"></a>Semaphore Unlock Operation</h5>
<p class="tent">An operation that is applied to a semaphore. If, prior to the operation, there are any threads in the set of
threads awaiting the semaphore, then some thread from that set shall be removed from the set and becomes unblocked; otherwise, the
semaphore value shall be incremented.</p>
<h3><a name="tag_04_21" id="tag_04_21"></a>4.21 Special Device Drivers</h3>
<p class="tent">Some devices require control operations, other than the operations that are common to most devices (such as
<a href="../functions/read.html"><i>read</i>()</a>, <a href="../functions/write.html"><i>write</i>()</a>, <a href=
"../functions/open.html"><i>open</i>()</a>, and <a href="../functions/close.html"><i>close</i>()</a>), but because the device
belongs to a class that is not present in the majority of systems, standardization of a device-specific application program
interface (API) for controlling it has not been practical. The driver for such a device may respond to the <a href=
"../functions/write.html"><i>write</i>()</a> function to transfer data to the device or the <a href=
"../functions/read.html"><i>read</i>()</a> function to collect information from the device. The interpretation of the information
is defined by the implementor of the driver.</p>
<p class="tent">The term <i>special device</i> refers to hardware, or an object that appears to the application as such; access to
the driver for this hardware uses the file abstraction <i>character special file</i>. Implementations supporting the Device Control
option shall provide the means to integrate a device driver into the system. The means available to integrate drivers into the
system and the way character special files that refer to them are created are implementation defined. Character special files that
have no structure defined by this standard can be accessed using the <a href=
"../functions/posix_devctl.html"><i>posix_devctl</i>()</a> function defined in the System Interfaces volume of POSIX.1-2024.</p>
<h3><a name="tag_04_22" id="tag_04_22"></a>4.22 Thread-Safety</h3>
<p class="tent">Refer to XSH <a href="../functions/V2_chap02.html#tag_16_09"><i>2.9 Threads</i></a>.</p>
<h3><a name="tag_04_23" id="tag_04_23"></a>4.23 Treatment of Error Conditions for Mathematical Functions</h3>
<p class="tent">For all the functions in the <a href="../basedefs/math.h.html"><i>&lt;math.h&gt;</i></a> header, an application
wishing to check for error situations should set <i>errno</i> to 0 and call <i>feclearexcept</i>(FE_ALL_EXCEPT) before calling the
function. On return, if <i>errno</i> is non-zero or <i>fetestexcept</i>(FE_INVALID | FE_DIVBYZERO | FE_OVERFLOW | FE_UNDERFLOW) is
non-zero, an error has occurred.</p>
<p class="tent">On implementations that support the IEC 60559 Floating-Point option, whether or when functions in the <a href=
"../basedefs/math.h.html"><i>&lt;math.h&gt;</i></a> header raise an undeserved underflow floating-point exception is unspecified.
Otherwise, as implied by XSH <a href="../functions/feraiseexcept.html#"><i>feraiseexcept</i>()</a>, the <a href=
"../basedefs/math.h.html"><i>&lt;math.h&gt;</i></a> functions do not raise spurious floating-point exceptions (detectable by the
user), other than the inexact floating-point exception.</p>
<p class="tent">The error conditions defined for all functions in the <a href="../basedefs/math.h.html"><i>&lt;math.h&gt;</i></a>
header are domain, pole and range errors, described below. If a domain, pole, or range error occurs and the integer expression
(math_errhandling & MATH_ERRNO) is zero, then <i>errno</i> shall either be set to the value corresponding to the error, as
specified below, or be left unmodified. If no such error occurs, <i>errno</i> shall be left unmodified regardless of the setting of
<i>math_errhandling</i>.</p>
<h4><a name="tag_04_23_01" id="tag_04_23_01"></a>4.23.1 Domain Error</h4>
<p class="tent">A &quot;domain error&quot; shall occur if an input argument is outside the domain over which the mathematical function is
defined. The description of each function lists any required domain errors; an implementation may define additional domain errors,
provided that such errors are consistent with the mathematical definition of the function.</p>
<p class="tent">On a domain error, the function shall return an implementation-defined value; if the integer expression
(math_errhandling & MATH_ERRNO) is non-zero, <i>errno</i> shall be set to [EDOM]; if the integer expression (math_errhandling &
MATH_ERREXCEPT) is non-zero, the &quot;invalid&quot; floating-point exception shall be raised.</p>
<h4><a name="tag_04_23_02" id="tag_04_23_02"></a>4.23.2 Pole Error</h4>
<p class="tent">A &quot;pole error&quot; shall occur if the mathematical result of the function has an exact infinite result as the finite
input argument(s) are approached in the limit (for example, <tt>log(0.0)</tt>). The description of each function lists any required
pole errors; an implementation may define additional pole errors, provided that such errors are consistent with the mathematical
definition of the function.</p>
<p class="tent">On a pole error, the function shall return the value of the macro HUGE_VAL, HUGE_VALF, or HUGE_VALL according to
the return type, with the same sign as the correct value of the function; if the integer expression (math_errhandling & MATH_ERRNO)
is non-zero, <i>errno</i> shall be set to [ERANGE]; if the integer expression (math_errhandling & MATH_ERREXCEPT) is non-zero, the
&quot;divide-by-zero&quot; floating-point exception shall be raised.</p>
<h4><a name="tag_04_23_03" id="tag_04_23_03"></a>4.23.3 Range Error</h4>
<p class="tent">A &quot;range error&quot; shall occur if the finite mathematical result of the function cannot be represented in an object
of the specified type, due to extreme magnitude. The description of each function lists any required range errors; an
implementation may define additional range errors, provided that such errors are consistent with the mathematical definition of the
function and are the result of either overflow or underflow.</p>
<h5 class="header4"><a name="tag_04_23_03_01" id="tag_04_23_03_01"></a>4.23.3.1 Result Overflows</h5>
<p class="tent">A floating result overflows if the magnitude of the mathematical result is finite but so large that the
mathematical result cannot be represented without extraordinary roundoff error in an object of the specified type. If a floating
result overflows and default rounding is in effect, then the function shall return the value of the macro HUGE_VAL, HUGE_VALF, or
HUGE_VALL according to the return type, with the same sign as the correct value of the function; if the integer expression
(math_errhandling & MATH_ERRNO) is non-zero, <i>errno</i> shall be set to [ERANGE]; if the integer expression (math_errhandling &
MATH_ERREXCEPT) is non-zero, the &quot;overflow&quot; floating-point exception shall be raised.</p>
<h5 class="header4"><a name="tag_04_23_03_02" id="tag_04_23_03_02"></a>4.23.3.2 Result Underflows</h5>
<p class="tent">The result underflows if the magnitude of the mathematical result is so small that the mathematical result cannot
be represented, without extraordinary roundoff error, in an object of the specified type. If the result underflows, the function
shall return an implementation-defined value whose magnitude is no greater than the smallest normalized positive number in the
specified type; if the integer expression (math_errhandling & MATH_ERRNO) is non-zero, whether <i>errno</i> is set to [ERANGE] is
implementation-defined; if the integer expression (math_errhandling & MATH_ERREXCEPT) is non-zero, whether the &quot;underflow&quot;
floating-point exception is raised is implementation-defined.</p>
<h3><a name="tag_04_24" id="tag_04_24"></a>4.24 Treatment of NaN Arguments for the Mathematical Functions</h3>
<p class="tent">For functions called with a NaN argument, no errors shall occur and a NaN shall be returned, except where stated
otherwise.</p>
<p class="tent">If a function with one or more NaN arguments returns a NaN result, the result should be the same as one of the NaN
arguments (after possible type conversion), except perhaps for the sign.</p>
<p class="tent">On implementations that support the IEC&nbsp;60559:1989 standard floating point, functions with signaling NaN
argument(s) shall be treated as if the function were called with an argument that is a required domain error and shall return a
quiet NaN result, except where stated otherwise. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>The function might never see the signaling NaN, since it might trigger when the arguments are evaluated during the function
call.</dd>
</dl>
<basefont size="3">
<p class="tent">On implementations that support the IEC&nbsp;60559:1989 standard floating point, for those functions that do not
have a documented domain error, the following shall apply:</p>
<blockquote>These functions shall fail if:
<dl compact>
<dd></dd>
<dt>Domain&nbsp;Error</dt>
<dd>Any argument is a signaling NaN.</dd>
</dl>
<p class="tent">Either, the integer expression (math_errhandling & MATH_ERRNO) is non-zero and <i>errno</i> shall be set to [EDOM],
or the integer expression (math_errhandling & MATH_ERREXCEPT) is non-zero and the invalid floating-point exception shall be
raised.</p>
</blockquote>
<h3><a name="tag_04_25" id="tag_04_25"></a>4.25 Utility</h3>
<p class="tent">A utility program shall be either an executable file, such as might be produced by a compiler or linker system from
computer source code, or a file of shell source code, directly interpreted by the shell. The program may have been produced by the
user, provided by the system implementor, or acquired from an independent distributor.</p>
<p class="tent">The system may implement certain utilities as shell functions (see XCU <a href=
"../utilities/V3_chap02.html#tag_19_09_05"><i>2.9.5 Function Definition Command</i></a>) or built-in utilities, but only an
application that is aware of the command search order (as described in XCU <a href=
"../utilities/V3_chap02.html#tag_19_09_01_04"><i>2.9.1.4 Command Search and Execution</i></a>) or of performance characteristics
can discern differences between the behavior of such a function or built-in utility and that of an executable file.</p>
<h3><a name="tag_04_26" id="tag_04_26"></a>4.26 Variable Assignment</h3>
<p class="tent">In the shell command language, a word consisting of the following parts:</p>
<pre>
<i>varname</i><tt>=</tt><i>value</i><tt>
</tt></pre>
<p class="tent">When used in a context where assignment is defined to occur and at no other time, the <i>value</i> (representing a
word or field) shall be assigned as the value of the variable denoted by <i>varname</i>. Assignment context occurs in the
<i>cmd_prefix</i> portion of a shell simple command, as well as in arguments of a recognized declaration utility. <basefont size=
"2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>For further information, see XCU <a href="../utilities/V3_chap02.html#tag_19_09_01"><i>2.9.1 Simple Commands</i></a>.</dd>
</dl>
<basefont size="3">
<p class="tent">The <i>varname</i> and <i>value</i> parts shall meet the requirements for a name and a word, respectively, except
that they are delimited by the embedded unquoted &lt;equals-sign&gt;, in addition to other delimiters. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>Additional delimiters are described in XCU <a href="../utilities/V3_chap02.html#tag_19_03"><i>2.3 Token Recognition</i></a>
.</dd>
</dl>
<basefont size="3">
<p class="tent">When a variable assignment is done, the variable shall be created if it did not already exist. If <i>value</i> is
not specified, the variable shall be given a null value. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>An alternative form of variable assignment:
<pre>
<i>symbol</i><tt>=</tt><i>value</i><tt>
</tt></pre>
<p class="tent">(where <i>symbol</i> is a valid word delimited by an &lt;equals-sign&gt;, but not a valid name) produces
unspecified results. The form <i>symbol</i>=<i>value</i> is used by the KornShell <i>name</i>[<i>expression</i>]=<i>value</i>
syntax.</p>
</dd>
</dl>
<basefont size="3">
<hr>
<h4 class="footnotes"><a name="tag_04_26_01" id="tag_04_26_01"></a>Footnotes</h4>
<p><a name="tag_foot_1" id="tag_foot_1"></a>1. The only interfaces that further constrain pathnames in POSIX.1-2024 are the
<a href="../functions/rename.html"><i>rename</i>()</a> and <a href="../functions/renameat.html"><i>renameat</i>()</a> functions
(see XSH <a href="../functions/rename.html#"><i>rename</i>()</a>) and the <a href="../utilities/mv.html"><i>mv</i></a> utility
(see XCU <a href="../utilities/mv.html#"><i>mv</i></a>).</p>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIXÂ® is a registered Trademark of The Open Group.<br>
POSIXâ¢ is a Trademark of The IEEE.<br>
Copyright Â© 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../basedefs/V1_chap03.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../basedefs/V1_chap05.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
