<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>bindtextdomain</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/bind.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/bsearch.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="bindtextdomain" id="bindtextdomain"></a> <a name="tag_17_45" id="tag_17_45"></a> 
<!-- bindtextdomain -->
<h4 class="mansect"><a name="tag_17_45_01" id="tag_17_45_01"></a>NAME</h4>
<blockquote>bindtextdomain, bind_textdomain_codeset, textdomain — text domain manipulation functions</blockquote>
<h4 class="mansect"><a name="tag_17_45_02" id="tag_17_45_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/libintl.h.html">libintl.h</a>&gt;<br>
<br>
char *bindtextdomain(const char *</tt><i>domainname</i><tt>, const char *</tt><i>dirname</i><tt>);<br>
char *bind_textdomain_codeset(const char *</tt><i>domainname</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const char *</tt><i>codeset</i><tt>);<br>
char *textdomain(const char *</tt><i>domainname</i><tt>);<br></tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_45_03" id="tag_17_45_03"></a>DESCRIPTION</h4>
<blockquote>
<p>The <i>textdomain</i>() function shall set or query the name of the current text domain of the calling process. The application
shall ensure that the <i>domainname</i> argument is either a null pointer (when querying), an empty string, or a string that, when
used by the <i>gettext</i> family of functions to construct a pathname to a messages object, results in a valid pathname. For
portable applications, it should only contain characters from the portable filename character set.</p>
<p>The text domain setting made by the last successful call to <i>textdomain</i>() shall remain in effect across subsequent calls
to <a href="../functions/setlocale.html"><i>setlocale</i>()</a>, <a href="../functions/uselocale.html"><i>uselocale</i>()</a>, and
the <i>gettext</i> family of functions.</p>
<p>Applications should not use text domains whose names begin with the strings <tt>"SYS_"</tt> or <tt>"libc"</tt>. These prefixes
are reserved for implementation use.</p>
<p>The current setting of the text domain can be queried without affecting the current state of the domain by calling
<i>textdomain</i>() with <i>domainname</i> set to a null pointer. Calling <i>textdomain</i>() with a <i>domainname</i> argument of
an empty string shall set the text domain to the default domain, <tt>"messages"</tt>.</p>
<p>The <i>bindtextdomain</i>() function shall set or query the binding of a text domain to a <i>dirname</i> that is used by the
<i>gettext</i> family of functions to construct a pathname to a messages object in the text domain:</p>
<ul>
<li>
<p>If <i>domainname</i> is a null pointer or an empty string, <i>bindtextdomain</i>() shall make no changes and return a null
pointer without changing <i>errno</i>.</p>
</li>
<li>
<p>Otherwise, if <i>dirname</i> is a non-empty string:</p>
<ul>
<li>
<p>If <i>domainname</i> is not already bound, <i>bindtextdomain</i>() shall bind the text domain specified by <i>domainname</i> to
the pathname pointed to by <i>dirname</i> and return the bound directory pathname on success or a null pointer on failure.</p>
</li>
<li>
<p>If <i>domainname</i> is already bound, <i>bindtextdomain</i>() shall replace the existing binding with the pathname pointed to
by <i>dirname</i> and return the bound directory pathname on success or a null pointer on failure. On failure, the existing binding
shall remain unchanged.</p>
</li>
</ul>
<p>It is unspecified whether the <i>bindtextdomain</i>() function performs pathname resolution on <i>dirname</i>, or whether that
is done by the <i>gettext</i> family of functions.</p>
</li>
<li>
<p>Otherwise, if <i>dirname</i> is a null pointer:</p>
<ul>
<li>
<p>If <i>domainname</i> is bound, the function shall return the bound directory pathname.</p>
</li>
<li>
<p>If <i>domainname</i> is not bound, the function shall return the implementation-defined default directory pathname used by the
<i>gettext</i> family of functions.</p>
</li>
</ul>
</li>
<li>
<p>Otherwise, <i>dirname</i> is an empty string and the behavior is unspecified.</p>
</li>
</ul>
<p>If a text domain is bound to a relative pathname and the current working directory is changed after the binding is established,
the pathnames used by the <i>gettext</i> family of functions to locate messages objects for that text domain are unspecified.</p>
<p>The <i>bind_textdomain_codeset</i>() function shall set or query the binding of a text domain to the output codeset used by the
<i>gettext</i> family of functions for message strings retrieved from messages objects for the text domain specified by
<i>domainname</i>:</p>
<ul>
<li>
<p>If <i>domainname</i> is a null pointer or an empty string, <i>bind_textdomain_codeset</i>() shall make no changes and return a
null pointer without changing <i>errno</i>.</p>
</li>
<li>
<p>Otherwise, if <i>codeset</i> is a non-empty string:</p>
<ul>
<li>
<p>If <i>domainname</i> is not already bound, <i>bind_textdomain_codeset</i>() shall bind the text domain specified by
<i>domainname</i> to the codeset pointed to by <i>codeset</i> and return the newly bound codeset on success or a null pointer on
failure.</p>
</li>
<li>
<p>If <i>domainname</i> is already bound, <i>bind_textdomain_codeset</i>() shall replace the existing binding with the codeset
pointed to by <i>codeset</i> and return the newly bound codeset on success or a null pointer on failure. On failure, the existing
binding shall remain unchanged.</p>
</li>
</ul>
<p>The application shall ensure that the <i>codeset</i> argument, if non-empty, is a valid codeset name that can be used as the
<i>tocode</i> argument of the <a href="../functions/iconv_open.html"><i>iconv_open</i>()</a> function, and that in the codeset it
specifies, the &lt;NUL&gt; character corresponds to a single null byte.</p>
</li>
<li>
<p>Otherwise, if <i>codeset</i> is a null pointer:</p>
<ul>
<li>
<p>If <i>domainname</i> is bound, the function shall return the bound codeset.</p>
</li>
<li>
<p>If <i>domainname</i> is not bound, the function shall return the implementation-defined default codeset used by the
<i>gettext</i> family of functions.</p>
</li>
</ul>
</li>
<li>
<p>Otherwise, <i>codeset</i> is an empty string and the behavior is unspecified.</p>
</li>
</ul>
<p>If <i>codeset</i> is a null pointer and <i>domainname</i> is a non-empty string, <i>bind_textdomain_codeset</i>() shall return
the current codeset for the named domain, or a null pointer if a codeset has not yet been set. The <i>bind_textdomain_codeset</i>()
function can be called multiple times. If successfully called multiple times with the same <i>domainname</i> argument, the last
such call shall override the setting made by the previous such call.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_45_04" id="tag_17_45_04"></a>RETURN VALUE</h4>
<blockquote>
<p>The return value from a successful <i>textdomain</i>() call shall be a pointer to a string containing the current setting of the
text domain. If <i>domainname</i> is a null pointer, <i>textdomain</i>() shall return a pointer to the string containing the
current text domain. If <i>textdomain</i>() was not previously called and <i>domainname</i> is a null string, the name of the
default text domain shall be returned. The name of the default text domain shall be the string <tt>"messages"</tt>. If
<i>textdomain</i>() fails, a null pointer shall be returned and <i>errno</i> shall be set to indicate the error.</p>
<p>For <i>bindtextdomain</i>() return values see the DESCRIPTION. When <i>bindtextdomain</i>() is called with a non-empty
<i>domainname</i> and returns a null pointer, it shall set <i>errno</i> to indicate the error. When <i>bindtextdomain</i>() returns
a pathname for a bound text domain, the return value shall be a pointer to a copy of the <i>dirname</i> string passed to the
<i>bindtextdomain</i>() call that created the binding. The returned string shall remain valid until the next successful call to
<i>bindtextdomain</i>() with a non-empty <i>dirname</i> and same <i>domainname</i>. The application shall ensure that it does not
modify the returned string.</p>
<p>A call to the <i>bind_textdomain_codeset</i>() function with a non-empty <i>domainname</i> argument shall return one of the
following:</p>
<ul>
<li>
<p>The currently bound codeset name for that text domain if <i>codeset</i> is a null pointer</p>
</li>
<li>
<p>The newly bound codeset if <i>codeset</i> is non-empty</p>
</li>
<li>
<p>A null pointer without changing <i>errno</i> if no codeset has yet been bound for that text domain</p>
</li>
</ul>
<p>The application shall ensure that it does not modify the returned string. A subsequent call to <i>bind_textdomain_codeset</i>()
with a non-empty <i>domainname</i> argument might invalidate the returned pointer or overwrite the string content. The returned
pointer might also be invalidated if the calling thread is terminated. If <i>bind_textdomain_codeset</i>() fails, a null pointer
shall be returned and <i>errno</i> shall be set to indicate the error.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_45_05" id="tag_17_45_05"></a>ERRORS</h4>
<blockquote>
<p>For the conditions under which <i>bindtextdomain</i>()—if it performs pathname resolution—fails and may fail, refer to <a href=
"../functions/open.html#"><i>open</i>()</a>.</p>
<p>In addition, the <i>textdomain</i>(), <i>bindtextdomain</i>(), and <i>bind_textdomain_codeset</i>() functions may fail if:</p>
<dl compact>
<dd></dd>
<dt>[ENOMEM]</dt>
<dd>Insufficient memory available.</dd>
</dl>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_45_06" id="tag_17_45_06"></a>EXAMPLES</h4>
<blockquote>
<p>See the examples for <a href="../functions/gettext.html#tag_17_238"><i>gettext</i>()</a>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_45_07" id="tag_17_45_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>A text <i>domainname</i> is limited to {TEXTDOMAIN_MAX} bytes.</p>
<p>Application developers are responsible for ensuring that the text domain used is not used by other applications. To minimize the
chances of collision, developers can prefix text domains with their company or application name (or both) and an underscore. For
example, if your application name was <tt>"foo"</tt> and you wanted to use the text domain <tt>"errors"</tt>, you could instead use
the text domain <tt>"foo_errors"</tt>. Note that if an application can be installed with a configurable name, a text domain prefix
based on the application name should change with the application name.</p>
<p>Specifying a relative pathname to the <i>bindtextdomain</i>() function should be avoided, since it may result in messages
objects being searched for in a directory relative to the current working directory of the calling process; if the process calls
the <a href="../functions/chdir.html"><i>chdir</i>()</a> function, the directory searched for may also be changed.</p>
<p>Since pathname resolution of <i>dirname</i> might not be performed by <i>bindtextdomain</i>(), but could be performed later by
the <i>gettext</i> family of functions, and since the latter have no way to report an error, applications should verify, using for
example <a href="../functions/stat.html"><i>stat</i>()</a>, that the directory is accessible if this is desired.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_45_08" id="tag_17_45_08"></a>RATIONALE</h4>
<blockquote>
<p>Although the return type of these functions ought to be <b>const char *</b>, it is <b>char *</b> to match historical
practice.</p>
<p>Pathname resolution of the <i>dirname</i> argument passed to <i>bindtextdomain</i>() may be performed by <i>bindtextdomain</i>()
itself or by the <i>gettext</i> family of functions. If pathname resolution fails in one of the <i>gettext</i> family of functions,
it is neither allowed to modify <i>errno</i> nor to return an error, but if pathname resolution fails in <i>bindtextdomain</i>(),
it is required to report an error and set <i>errno</i> just like <a href="../functions/open.html"><i>open</i>()</a> does.</p>
<p>Historically, <i>bindtextdomain</i>() did not perform pathname resolution. However, the standard developers decided to allow
this as an option so that future implementations can, if desired, open a file descriptor for that directory in
<i>bindtextdomain</i>() and then use that file descriptor with <a href="../functions/openat.html"><i>openat</i>()</a> in the
<i>gettext</i> family of functions.</p>
<p>The <i>dirname</i> parameter to <i>bindtextdomain</i>() may need to be copied to avoid the possibility of the application
releasing the memory used by the argument while the <i>gettext</i> family of functions may still need to reference it.</p>
<p>When <i>bindtextdomain</i>() is called with a non-empty <i>domainname</i> and an empty <i>dirname</i>, historical
implementations of the <i>gettext</i> family of functions use the empty string for the <i>dirname</i> part of the messages object
pathname, resulting in an absolute pathname of the form /<i>localename</i>/<i>categoryname</i>/<i>textdomainname</i><b>.mo</b>. The
standard developers did not believe this behavior to be useful. Using the empty <i>dirname</i> case as a way to remove an existing
binding seemed to be a more useful behavior, and would be consistent with the behavior of <i>textdomain</i>(). However, because no
historical implementations behave this way, the behavior is left unspecified.</p>
<p>Some implementations set <i>errno</i> to [EAGAIN] to signal memory allocation failures that might succeed if retried and
[ENOMEM] for failures that are unlikely to ever succeed, for example due to configured limits. <a href=
"../functions/V2_chap02.html#tag_16_03"><i>2.3 Error Numbers</i></a> permits this behavior; when multiple error conditions are
simultaneously true there is no precedence between them.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_45_09" id="tag_17_45_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>A future version of this standard may require implementations to prefix implementation-provided text domains with either
<tt>"SYS_"</tt> or a prefix related to the implementor's company name to avoid namespace collisions.</p>
<p>A future version of this standard may require <i>bindtextdomain</i>() to remove any binding for <i>domainname</i> when called
with a non-empty <i>domainname</i> and an empty <i>dirname</i>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_45_10" id="tag_17_45_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/gettext.html#tag_17_238"><i>gettext</i>()</a>, <a href=
"../functions/iconv_open.html#"><i>iconv_open</i>()</a>, <a href="../functions/setlocale.html#"><i>setlocale</i>()</a>, <a href=
"../functions/uselocale.html#"><i>uselocale</i>()</a></p>
<p>XBD <a href="../basedefs/libintl.h.html"><i>&lt;libintl.h&gt;</i></a>, <a href=
"../basedefs/limits.h.html"><i>&lt;limits.h&gt;</i></a></p>
<p>XCU <a href="../utilities/msgfmt.html#"><i>msgfmt</i></a>, <a href="../utilities/xgettext.html#"><i>xgettext</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_45_11" id="tag_17_45_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 8.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/bind.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/bsearch.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
