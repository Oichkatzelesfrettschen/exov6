<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group's rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2015 The Open Group, All Rights Reserved -->
<title>drand48</title>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/dprintf.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/dup.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="drand48" id="drand48"></a> <a name="tag_17_134" id="tag_17_134"></a><!-- drand48 -->
<h4 class="mansect"><a name="tag_17_134_01" id="tag_17_134_01"></a>NAME</h4>
<blockquote>drand48, erand48, jrand48, lcong48, lrand48, mrand48, nrand48, seed48, srand48 — generate uniformly distributed
pseudo-random numbers</blockquote>
<h4 class="mansect"><a name="tag_17_134_02" id="tag_17_134_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<div class="box"><code><tt><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> #include &lt;<a href="../basedefs/stdlib.h.html">stdlib.h</a>&gt;<br>
<br>
double drand48(void);<br>
double erand48(unsigned short</tt> <i>xsubi</i><tt>[3]);<br>
long jrand48(unsigned short</tt> <i>xsubi</i><tt>[3]);<br>
void lcong48(unsigned short</tt> <i>param</i><tt>[7]);<br>
long lrand48(void);<br>
long mrand48(void);<br>
long nrand48(unsigned short</tt> <i>xsubi</i><tt>[3]);<br>
unsigned short *seed48(unsigned short</tt> <i>seed16v</i><tt>[3]);<br>
void srand48(long</tt> <i>seedval</i><tt>); <img src="../images/opt-end.gif" alt="[Option End]" border="0"></tt></code></div>
<tt><br></tt></blockquote>
<h4 class="mansect"><a name="tag_17_134_03" id="tag_17_134_03"></a>DESCRIPTION</h4>
<blockquote>
<p>This family of functions shall generate pseudo-random numbers using a linear congruential algorithm and 48-bit integer
arithmetic.</p>
<p>The <i>drand48</i>() and <i>erand48</i>() functions shall return non-negative, double-precision, floating-point values,
uniformly distributed over the interval [0.0,1.0).</p>
<p>The <i>lrand48</i>() and <i>nrand48</i>() functions shall return non-negative, long integers, uniformly distributed over the
interval [0,2<sup><small>31</small></sup>).</p>
<p>The <i>mrand48</i>() and <i>jrand48</i>() functions shall return signed long integers uniformly distributed over the interval
[-2<sup><small>31</small></sup>,2<sup><small>31</small></sup>).</p>
<p>The <i>srand48</i>(), <i>seed48</i>(), and <i>lcong48</i>() functions are initialization entry points, one of which should be
invoked before either <i>drand48</i>(), <i>lrand48</i>(), or <i>mrand48</i>() is called. (Although it is not recommended practice,
constant default initializer values shall be supplied automatically if <i>drand48</i>(), <i>lrand48</i>(), or <i>mrand48</i>() is
called without a prior call to an initialization entry point.) The <i>erand48</i>(), <i>nrand48</i>(), and <i>jrand48</i>()
functions do not require an initialization entry point to be called first.</p>
<p>All the routines work by generating a sequence of 48-bit integer values, 
\(X_{i}\), 
according to the linear congruential formula:</p>
<blockquote>
\(X_{n+1}=\left(a X_n+c\right)_{\bmod m} \quad n \geq 0\)
</blockquote>


<p>The parameter <i>m</i>=2<sup>48</sup>; hence 48-bit integer arithmetic is performed. Unless <i>lcong48</i>() is invoked, the multiplier
value <i>a</i> and the addend value <i>c</i> are given by:</p>
<blockquote>
\(
\begin{aligned}
& a= \text { 5DEECE66D }_{16}=273673163155_8 \\
& c=\mathrm{B}_{16}=13_8
\end{aligned}
\)
</blockquote>
<p>The value returned by any of the <i>drand48</i>(), <i>erand48</i>(), <i>jrand48</i>(), <i>lrand48</i>(), <i>mrand48</i>(), or
<i>nrand48</i>() functions is computed by first generating the next 48-bit \(X_{i}\) in the sequence. \(X_{i}\) is then converted
to the return value as follows:</p>
<ul>
<li>
<p>For <i>drand48</i>() and <i>erand48</i>() the value shall be 2<sup>-48</sup> times \(X_{i}\).</p>
</li>
<li>
<p>For <i>jrand48</i>() and <i>mrand48</i>() the value shall be the largest integer not greater than 2<sup>-16</sup> times \(X_{i}\).</p>
</li>
<li>
<p>For <i>lrand48</i>() and <i>nrand48</i>() the value shall be the largest integer not greater than 2<sup>-17</sup> times \(X_{i}\).</p>

</li>
</ul>
<p>The <i>drand48</i>(), <i>lrand48</i>(), and <i>mrand48</i>() functions store the last 48-bit \(X_{i}\) generated in an internal
buffer; that is why the application shall ensure that these are initialized prior to being invoked. The <i>erand48</i>(),
<i>nrand48</i>(), and <i>jrand48</i>() functions require the calling program to provide storage for the successive \(X_{i}\) values
in the array specified as an argument when the functions are invoked. That is why these routines do not have to be initialized; the
calling program merely has to place the desired initial value of \(X_{i}\) into the array and pass it as an argument. By using
different arguments, <i>erand48</i>(), <i>nrand48</i>(), and <i>jrand48</i>() allow separate modules of a large program to generate
several <i>independent</i> streams of pseudo-random numbers; that is, the sequence of numbers in each stream shall <i>not</i>
depend upon how many times the routines are called to generate numbers for the other streams.</p>
<p>The initializer function <i>srand48</i>() sets the high-order 32 bits of \(X_{i}\) to the low-order 32 bits contained in its
argument. The low-order 16 bits of \(X_{i}\) are set to the arbitrary value 330E<sub>16</sub>.</p>
<p>The initializer function <i>seed48</i>() sets the value of \(X_{i}\) to the 48-bit value specified in the argument array. The
low-order 16 bits of \(X_{i}\) are set to the low-order 16 bits of <i>seed16v</i>[<i>0</i>]. The mid-order 16 bits of \(X_{i}\) are
set to the low-order 16 bits of <i>seed16v</i>[<i>1</i>]. The high-order 16 bits of \(X_{i}\) are set to the low-order 16 bits of
<i>seed16v</i>[<i>2</i>]. In addition, the previous value of \(X_{i}\) is copied into a 48-bit internal buffer, used only by
<i>seed48</i>(), and a pointer to this buffer is the value returned by <i>seed48</i>(). This returned pointer, which can just be
ignored if not needed, is useful if a program is to be restarted from a given point at some future time—use the pointer to get at
and store the last \(X_{i}\) value, and then use this value to reinitialize via <i>seed48</i>() when the program is restarted.</p>
<p>The initializer function <i>lcong48</i>() allows the user to specify the initial \(X_{i}\), the multiplier value <i>a</i>, and the
addend value <i>c</i>. Argument array elements <i>param</i>[<i>0-2</i>] specify \(X_{i}\), <i>param</i>[<i>3-5</i>] specify the
multiplier <i>a</i>, and <i>param</i>[<i>6</i>] specifies the 16-bit addend <i>c</i>. After <i>lcong48</i>() is called, a subsequent call to
either <i>srand48</i>() or <i>seed48</i>() shall restore the standard multiplier and addend values, <i>a</i> and <i>c,</i>
specified above.</p>
<p>The <i>drand48</i>(), <i>lrand48</i>(), and <i>mrand48</i>() functions need not be thread-safe.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_04" id="tag_17_134_04"></a>RETURN VALUE</h4>
<blockquote>
<p>As described in the DESCRIPTION above.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_05" id="tag_17_134_05"></a>ERRORS</h4>
<blockquote>
<p>No errors are defined.</p>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_134_06" id="tag_17_134_06"></a>EXAMPLES</h4>
<blockquote>
<p>The following program tests that the required pseudo-random number generator is used by these functions.</p>
<pre>
<tt>#include &lt;assert.h&gt;
#include &lt;stdlib.h&gt;
<br>
int main() {
  {
    unsigned short xsubi[3] = {37174, 64810, 11603};
    double d = erand48(xsubi);
    assert(d &gt;= 0.896);
    assert(d &lt;= 0.897);
    assert(xsubi[0] == 22537);
    assert(xsubi[1] == 47966);
    assert(xsubi[2] == 58735);
    d = erand48(xsubi);
    assert(d &gt;= 0.337);
    assert(d &lt;= 0.338);
    assert(xsubi[0] == 37344);
    assert(xsubi[1] == 32911);
    assert(xsubi[2] == 22119);
    d = erand48(xsubi);
    assert(d &gt;= 0.647);
    assert(d &lt;= 0.648);
    assert(xsubi[0] == 23659);
    assert(xsubi[1] == 29872);
    assert(xsubi[2] == 42445);
    d = erand48(xsubi);
    assert(d &gt;= 0.500);
    assert(d &lt;= 0.501);
    assert(xsubi[0] == 31642);
    assert(xsubi[1] == 7875);
    assert(xsubi[2] == 32802);
    d = erand48(xsubi);
    assert(d &gt;= 0.506);
    assert(d &lt;= 0.507);
    assert(xsubi[0] == 64669);
    assert(xsubi[1] == 14399);
    assert(xsubi[2] == 33170);
  }
<br>
  {
    unsigned short xsubi[3] = {25175, 11052, 45015};
    assert(jrand48(xsubi) == 1699503220);
    assert(xsubi[0] == 2326);
    assert(xsubi[1] == 23668);
    assert(xsubi[2] == 25932);
    assert(jrand48(xsubi) == -992276007);
    assert(xsubi[0] == 41577);
    assert(xsubi[1] == 4569);
    assert(xsubi[2] == 50395);
    assert(jrand48(xsubi) == -19535776);
    assert(xsubi[0] == 31936);
    assert(xsubi[1] == 59488);
    assert(xsubi[2] == 65237);
    assert(jrand48(xsubi) == 79438377);
    assert(xsubi[0] == 40395);
    assert(xsubi[1] == 8745);
    assert(xsubi[2] == 1212);
    assert(jrand48(xsubi) == -1258917728);
    assert(xsubi[0] == 37242);
    assert(xsubi[1] == 28832);
    assert(xsubi[2] == 46326);
  }
<br>
  {
    unsigned short xsubi[3] = {546, 33817, 23389};
    assert(nrand48(xsubi) == 914920692);
    assert(xsubi[0] == 29829);
    assert(xsubi[1] == 10728);
    assert(xsubi[2] == 27921);
    assert(nrand48(xsubi) == 754104482);
    assert(xsubi[0] == 6828);
    assert(xsubi[1] == 28997);
    assert(xsubi[2] == 23013);
    assert(nrand48(xsubi) == 609453945);
    assert(xsubi[0] == 58183);
    assert(xsubi[1] == 3826);
    assert(xsubi[2] == 18599);
    assert(nrand48(xsubi) == 1878644360);
    assert(xsubi[0] == 36678);
    assert(xsubi[1] == 44304);
    assert(xsubi[2] == 57331);
    assert(nrand48(xsubi) == 2114923686);
    assert(xsubi[0] == 58585);
    assert(xsubi[1] == 22861);
    assert(xsubi[2] == 64542);
  }
}
</tt></pre></blockquote>
<h4 class="mansect"><a name="tag_17_134_07" id="tag_17_134_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>These functions should be avoided whenever non-trivial requirements (including safety) have to be fulfilled, unless seeded using
<a href="../functions/getentropy.html"><i>getentropy</i>()</a>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_08" id="tag_17_134_08"></a>RATIONALE</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_09" id="tag_17_134_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_10" id="tag_17_134_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/getentropy.html#"><i>getentropy</i></a>, <a href="../functions/initstate.html#"><i>initstate</i></a>,
<a href="../functions/rand.html#"><i>rand</i></a></p>
<p>XBD <a href="../basedefs/stdlib.h.html"><i>&lt;stdlib.h&gt;</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_11" id="tag_17_134_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 1. Derived from Issue 1 of the SVID.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_12" id="tag_17_134_12"></a>Issue 5</h4>
<blockquote>
<p>A note indicating that the <i>drand48</i>(), <i>lrand48</i>(), and <i>mrand48</i>() functions need not be reentrant is added to
the DESCRIPTION.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_13" id="tag_17_134_13"></a>Issue 6</h4>
<blockquote>
<p>The normative text is updated to avoid use of the term &quot;must&quot; for application requirements.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_14" id="tag_17_134_14"></a>Issue 7</h4>
<blockquote>
<p>Austin Group Interpretation 1003.1-2001 #156 is applied.</p>
<p>POSIX.1-2008, Technical Corrigendum 2, XSH/TC2-2008/0083 [743] is applied.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_134_15" id="tag_17_134_15"></a>Issue 8</h4>
<blockquote>
<p>Austin Group Defect 1107 is applied, clarifying how the return value is calculated from  \(X_{i}\) for each function.</p>
<p>Austin Group Defect 1134 is applied, adding <a href="../functions/getentropy.html"><i>getentropy</i>()</a>.<br></p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/dprintf.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/dup.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
