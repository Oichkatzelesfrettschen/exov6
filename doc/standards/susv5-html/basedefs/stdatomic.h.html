<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>&lt;stdatomic.h&gt;</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../basedefs/stdarg.h.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../basedefs/stdbool.h.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="&lt;stdatomic.h&gt;" id="&lt;stdatomic.h&gt;"></a> <a name="tag_14_49" id="tag_14_49"></a>
<!-- &lt;stdatomic.h&gt; -->
<h4 class="mansect"><a name="tag_14_49_01" id="tag_14_49_01"></a>NAME</h4>
<blockquote>stdatomic.h — atomics</blockquote>
<h4 class="mansect"><a name="tag_14_49_02" id="tag_14_49_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><tt>#include &lt;stdatomic.h&gt;</tt></p>
</blockquote>
<h4 class="mansect"><a name="tag_14_49_03" id="tag_14_49_03"></a>DESCRIPTION</h4>
<blockquote>
<div class="box"><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]"
border="0"> The functionality described on this reference page is aligned with the ISO&nbsp;C standard. Any conflict between the
requirements described here and the ISO&nbsp;C standard is unintentional. This volume of POSIX.1-2024 defers to the ISO&nbsp;C
standard. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></div>
<p>Implementations that define the macro __STDC_NO_ATOMICS__ need not provide this header nor support any of its facilities.</p>
<p>The <i>&lt;stdatomic.h&gt;</i> header shall define the <b>atomic_flag</b> type as a structure type. This type provides the
classic test-and-set functionality. It shall have two states, set and clear. Operations on an object of type <b>atomic_flag</b>
shall be lock free.</p>
<p>The <i>&lt;stdatomic.h&gt;</i> header shall define each of the atomic integer types in the following table as a type that has
the same representation and alignment requirements as the corresponding direct type. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>The same representation and alignment requirements are meant to imply interchangeability as arguments to functions, return
values from functions, and members of unions.</dd>
</dl>
<basefont size="3">
<center>
<table border="1" cellpadding="3" align="center">
<tr valign="top">
<th align="center">
<p class="tent"><b>Atomic type name</b></p>
</th>
<th align="center">
<p class="tent"><b>Direct type</b></p>
</th>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_bool</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic _Bool</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_char</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic char</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_schar</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic signed char</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uchar</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic unsigned char</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_short</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic short</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_ushort</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic unsigned short</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_int</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic int</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uint</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic unsigned int</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_long</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic long</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_ulong</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic unsigned long</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_llong</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic long long</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_ullong</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic unsigned long long</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_char16_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic char16_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_char32_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic char32_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_wchar_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic wchar_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_int_least8_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic int_least8_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uint_least8_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uint_least8_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_int_least16_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic int_least16_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uint_least16_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uint_least16_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_int_least32_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic int_least32_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uint_least32_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uint_least32_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_int_least64_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic int_least64_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uint_least64_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uint_least64_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_int_fast8_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic int_fast8_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uint_fast8_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uint_fast8_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_int_fast16_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic int_fast16_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uint_fast16_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uint_fast16_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_int_fast32_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic int_fast32_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uint_fast32_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uint_fast32_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_int_fast64_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic int_fast64_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uint_fast64_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uint_fast64_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_intptr_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic intptr_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uintptr_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uintptr_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_size_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic size_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_ptrdiff_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic ptrdiff_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_intmax_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic intmax_t</b></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>atomic_uintmax_t</b></p>
</td>
<td align="left">
<p class="tent"><b>_Atomic uintmax_t</b></p>
</td>
</tr>
</table>
</center>
<p class="tent">The <i>&lt;stdatomic.h&gt;</i> header shall define the <b>memory_order</b> type as an enumerated type whose
enumerators shall include at least the following:</p>
<pre>
<tt>memory_order_relaxed

memory_order_consume

memory_order_acquire

memory_order_release

memory_order_acq_rel

memory_order_seq_cst

</tt></pre>
<p class="tent">The <i>&lt;stdatomic.h&gt;</i> header shall define the following atomic lock-free macros:</p>
<p class="tent"><br>
ATOMIC_BOOL_LOCK_FREE<br>
ATOMIC_CHAR_LOCK_FREE<br>
ATOMIC_CHAR16_T_LOCK_FREE<br>
ATOMIC_CHAR32_T_LOCK_FREE<br>
ATOMIC_WCHAR_T_LOCK_FREE<br>
ATOMIC_SHORT_LOCK_FREE<br>
ATOMIC_INT_LOCK_FREE<br>
ATOMIC_LONG_LOCK_FREE<br>
ATOMIC_LLONG_LOCK_FREE<br>
ATOMIC_POINTER_LOCK_FREE<br></p>
<p class="tent">which shall expand to constant expressions suitable for use in <b>#if</b> preprocessing directives and which shall
indicate the lock-free property of the corresponding atomic types (both signed and unsigned). A value of 0 shall indicate that the
type is never lock-free; a value of 1 shall indicate that the type is sometimes lock-free; a value of 2 shall indicate that the
type is always lock-free.</p>
<p class="tent">The <i>&lt;stdatomic.h&gt;</i> header shall define the macro ATOMIC_FLAG_INIT which shall expand to an initializer
for an object of type <b>atomic_flag</b>. This macro shall initialize an <b>atomic_flag</b> to the clear state. An
<b>atomic_flag</b> that is not explicitly initialized with ATOMIC_FLAG_INIT is initially in an indeterminate state.</p>
<p class="tent"><sup>[<a href="javascript:open_code('OB')">OB</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]"
border="0"> The <i>&lt;stdatomic.h&gt;</i> header shall define the macro ATOMIC_VAR_INIT(<i>value</i>) which shall expand to a
token sequence suitable for initializing an atomic object of a type that is initialization-compatible with the non-atomic type of
its <i>value</i> argument. <img src="../images/opt-end.gif" alt="[Option End]" border="0"> &nbsp;An atomic object with automatic
storage duration that is not explicitly initialized is initially in an indeterminate state.</p>
<p class="tent">The <i>&lt;stdatomic.h&gt;</i> header shall define the macro <a href=
"../functions/kill_dependency.html"><i>kill_dependency</i>()</a> which shall behave as described in <a href=
"../functions/kill_dependency.html#"><i>kill_dependency</i>()</a>.</p>
<p class="tent">The <i>&lt;stdatomic.h&gt;</i> header shall declare the following generic functions, where <b><i>A</i></b> refers to an
atomic type, <b><i>C</i></b> refers to its corresponding non-atomic type, and <b><i>M</i></b> is <b><i>C</i></b> for atomic integer types or
<b>ptrdiff_t</b> for atomic pointer types.</p>
<pre>
<tt>_Bool   atomic_compare_exchange_strong(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>C</i></b><tt> *, </tt><b><i>C</i></b><tt>);
_Bool   atomic_compare_exchange_strong_explicit(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>C</i></b><tt> *, </tt><b><i>C</i></b><tt>, memory_order, memory_order);
_Bool   atomic_compare_exchange_weak(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>C</i></b><tt> *, </tt><b><i>C</i></b><tt>);
_Bool   atomic_compare_exchange_weak_explicit(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>C</i></b><tt> *, </tt><b><i>C</i></b><tt>, memory_order, memory_order);
</tt><b><i>C</i></b><tt>       atomic_exchange(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>C</i></b><tt>);
</tt><b><i>C</i></b><tt>       atomic_exchange_explicit(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>C</i></b><tt>, memory_order);
</tt><b><i>C</i></b><tt>       atomic_fetch_add(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>);
</tt><b><i>C</i></b><tt>       atomic_fetch_add_explicit(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>, memory_order);
</tt><b><i>C</i></b><tt>       atomic_fetch_and(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>);
</tt><b><i>C</i></b><tt>       atomic_fetch_and_explicit(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>, memory_order);
</tt><b><i>C</i></b><tt>       atomic_fetch_or(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>);
</tt><b><i>C</i></b><tt>       atomic_fetch_or_explicit(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>, memory_order);
</tt><b><i>C</i></b><tt>       atomic_fetch_sub(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>);
</tt><b><i>C</i></b><tt>       atomic_fetch_sub_explicit(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>, memory_order);
</tt><b><i>C</i></b><tt>       atomic_fetch_xor(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>);
</tt><b><i>C</i></b><tt>       atomic_fetch_xor_explicit(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>M</i></b><tt>, memory_order);
void    atomic_init(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>C</i></b><tt>);
_Bool   atomic_is_lock_free(const volatile </tt><b><i>A</i></b><tt> *);
</tt><b><i>C</i></b><tt>       atomic_load(const volatile </tt><b><i>A</i></b><tt> *);
</tt><b><i>C</i></b><tt>       atomic_load_explicit(const volatile </tt><b><i>A</i></b><tt> *, memory_order);
void    atomic_store(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>C</i></b><tt>);
void    atomic_store_explicit(volatile </tt><b><i>A</i></b><tt> *, </tt><b><i>C</i></b><tt>, memory_order);
</tt></pre>
<p class="tent">It is unspecified whether any generic function declared in <i>&lt;stdatomic.h&gt;</i> is a macro or an identifier
declared with external linkage. If a macro definition is suppressed in order to access an actual function, or a program defines an
external identifier with the name of a generic function, the behavior is undefined.</p>
<p class="tent">The following shall be declared as functions and may also be defined as macros. Function prototypes shall be
provided.</p>
<pre>
<tt>void    atomic_flag_clear(volatile atomic_flag *);
void    atomic_flag_clear_explicit(volatile atomic_flag *,
                memory_order);
_Bool   atomic_flag_test_and_set(volatile atomic_flag *);
_Bool   atomic_flag_test_and_set_explicit(
                volatile atomic_flag *, memory_order);
void    atomic_signal_fence(memory_order);
void    atomic_thread_fence(memory_order);
</tt></pre></blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_14_49_04" id="tag_14_49_04"></a>APPLICATION USAGE</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_14_49_05" id="tag_14_49_05"></a>RATIONALE</h4>
<blockquote>
<p>Since operations on the <b>atomic_flag</b> type are lock free, the operations should also be address-free. No other type
requires lock-free operations, so the <b>atomic_flag</b> type is the minimum hardware-implemented type needed to conform to this
standard. The remaining types can be emulated with <b>atomic_flag</b>, though with less than ideal properties.</p>
<p class="tent">The representation of atomic integer types need not have the same size as their corresponding regular types. They
should have the same size whenever possible, as it eases effort required to port existing code.</p>
</blockquote>
<h4 class="mansect"><a name="tag_14_49_06" id="tag_14_49_06"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>The ISO&nbsp;C standard states that the macro ATOMIC_VAR_INIT is an obsolescent feature. This macro may be removed in a future
version of this standard.</p>
</blockquote>
<h4 class="mansect"><a name="tag_14_49_07" id="tag_14_49_07"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../basedefs/V1_chap04.html#tag_04_15_01"><i>4.15.1 Memory Ordering</i></a></p>
<p class="tent">XSH <a href="../functions/atomic_compare_exchange_strong.html#"><i>atomic_compare_exchange_strong</i>()</a>,
<a href="../functions/atomic_exchange.html#"><i>atomic_exchange</i>()</a>, <a href=
"../functions/atomic_fetch_add.html#"><i>atomic_fetch_add</i>()</a>, <a href=
"../functions/atomic_flag_clear.html#"><i>atomic_flag_clear</i>()</a>, <a href=
"../functions/atomic_flag_test_and_set.html#"><i>atomic_flag_test_and_set</i>()</a>, <a href=
"../functions/atomic_init.html#"><i>atomic_init</i>()</a>, <a href=
"../functions/atomic_is_lock_free.html#"><i>atomic_is_lock_free</i>()</a>, <a href=
"../functions/atomic_load.html#"><i>atomic_load</i>()</a>, <a href=
"../functions/atomic_signal_fence.html#"><i>atomic_signal_fence</i>()</a>, <a href=
"../functions/atomic_store.html#"><i>atomic_store</i>()</a>, <a href=
"../functions/kill_dependency.html#"><i>kill_dependency</i>()</a>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_14_49_08" id="tag_14_49_08"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 8. Included for alignment with the ISO/IEC&nbsp;9899:2018 standard.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../basedefs/stdarg.h.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../basedefs/stdbool.h.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
