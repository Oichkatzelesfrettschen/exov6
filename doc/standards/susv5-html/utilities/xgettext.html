<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>xgettext</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../utilities/xargs.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../utilities/yacc.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="xgettext" id="xgettext"></a> <a name="tag_20_153" id="tag_20_153"></a><!-- xgettext -->
<h4 class="mansect"><a name="tag_20_153_01" id="tag_20_153_01"></a>NAME</h4>
<blockquote>xgettext — extract <i>gettext</i> call strings from C-language source files (DEVELOPMENT)</blockquote>
<h4 class="mansect"><a name="tag_20_153_02" id="tag_20_153_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<div class="box"><code><tt><sup>[<a href="javascript:open_code('CD')">CD</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> xgettext</tt> <b>[</b><tt>-j</tt><b>] [</b><tt>-n</tt><b>] [</b><tt>-d</tt> <i>default-domain</i><b>]
[</b><tt>-K</tt> <i>keyword-spec</i><b>]</b><tt>...<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt> <b>[</b><tt>-p</tt> <i>pathname</i><b>]</b> <i>file</i><tt>...<br>
<br>
xgettext -a</tt> <b>[</b><tt>-n</tt><b>] [</b><tt>-d</tt> <i>default-domain</i><b>] [</b><tt>-p</tt> <i>pathname</i><b>]<br></b>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt> <b>[</b><tt>-x</tt> <i>exclude-file</i><b>]</b> <i>file</i><tt>... <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></tt></code></div>
<tt><br></tt></blockquote>
<h4 class="mansect"><a name="tag_20_153_03" id="tag_20_153_03"></a>DESCRIPTION</h4>
<blockquote>
<p>The <i>xgettext</i> utility shall automate the creation of portable messages object source files (dot-po files). A dot-po file
shall contain copies of string literals that are found in C-language source code in files specified by <i>file</i> operands. The
dot-po file can be used as input to the <a href="../utilities/msgfmt.html"><i>msgfmt</i></a> utility, to produce a messages object
file that can be used by applications.</p>
<p>The <i>xgettext</i> utility shall write <i>msgid</i> argument strings that are passed as string literals in <a href=
"../functions/gettext.html"><i>gettext</i>()</a>, <a href="../functions/gettext_l.html"><i>gettext_l</i>()</a>, <a href=
"../functions/ngettext.html"><i>ngettext</i>()</a>, and <a href="../functions/ngettext_l.html"><i>ngettext_l</i>()</a> calls in
C-language source code to the default output file; this file shall be named <b>messages.po</b> unless it is changed by the
<b>-d</b> option. The <i>xgettext</i> utility shall also write <i>msgid</i> argument strings that are passed as string literals in
<a href="../functions/dcgettext.html"><i>dcgettext</i>()</a>, <a href="../functions/dcgettext_l.html"><i>dcgettext_l</i>()</a>,
<a href="../functions/dcngettext.html"><i>dcngettext</i>()</a>, <a href="../functions/dcngettext_l.html"><i>dcngettext_l</i>()</a>,
<a href="../functions/dgettext.html"><i>dgettext</i>()</a>, <a href="../functions/dgettext_l.html"><i>dgettext_l</i>()</a>,
<a href="../functions/dngettext.html"><i>dngettext</i>()</a>, and <a href="../functions/dngettext_l.html"><i>dngettext_l</i>()</a>
calls either to the default output file or to the output file <i>domainname</i><b>.po</b> where <i>domainname</i> is the first
parameter to the call; it is implementation-defined which of those output files is used. A <b>msgid</b> directive shall precede
each <i>msgid</i> argument string. For the functions that have a <i>msgid_plural</i> argument, a <b>msgid_plural</b> directive
followed by that argument string shall also be written directly after the corresponding <b>msgid</b> directive. A <b>msgstr</b>
directive or <b>msgstr[</b><i>index</i><b>]</b> directives with an empty string shall be written after the corresponding
<b>msgid</b> or <b>msgid_plural</b> directive, respectively. The function names that <i>xgettext</i> searches for can be changed
using the <b>-K</b> option.</p>
<p>The first directive in each created dot-po file shall be a <b>domain</b> directive giving the associated domain name, except
that this directive is optional in the default output file.</p>
<p>If the <b>-p</b> <i>pathname</i> option is specified, <i>xgettext</i> shall create the dot-po files in the <i>pathname</i>
directory. Otherwise, the dot-po files shall be created in the current working directory.</p>
<p>The <b>msgid</b> values shall be in the same order that the strings are extracted from each <i>file</i> and subsections with
duplicate <b>msgid</b> values shall be written to the dot-po files as comment lines.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_04" id="tag_20_153_04"></a>OPTIONS</h4>
<blockquote>
<p>The <i>xgettext</i> utility shall conform to XBD <a href="../basedefs/V1_chap12.html#tag_12_02"><i>12.2 Utility Syntax
Guidelines</i></a>.</p>
<p>The following options shall be supported:</p>
<dl compact>
<dd></dd>
<dt><b>-a</b></dt>
<dd>Extract all strings, not just those found in calls to <i>gettext</i> family functions. Only one dot-po file shall be
created.</dd>
<dt><b>-d&nbsp;</b><i>default-domain</i></dt>
<dd><br>
Name the default output file <i>default-domain</i><b>.po</b> instead of <b>messages.po</b>.</dd>
<dt><b>-j</b></dt>
<dd>Join messages from C-language source files with existing dot-po files. For each dot-po file that <i>xgettext</i> writes
messages to, if the file does not exist, it shall be created. New messages shall be appended but any subsections with duplicate
<b>msgid</b> values except the first (including <b>msgid</b> values found in an existing dot-po file) shall either be commented out
or omitted in the resulting dot-po file; if omitted, a warning message may be written to standard error. Domain directives in the
existing dot-po files shall be ignored; the assumption is that all previous <b>msgid</b> values belong to the same domain. The
behavior is unspecified if an existing dot-po file was not created by <i>xgettext</i> or has been modified by another
application.</dd>
<dt><b>-K&nbsp;</b><i>keyword-spec</i></dt>
<dd><br>
Specify an additional keyword to be looked for:
<ul>
<li>
<p>If <i>keyword-spec</i> is an empty string, this shall disable the use of default keywords for the <i>gettext</i> family of
functions.</p>
</li>
<li>
<p>If <i>keyword-spec</i> is a C identifier, <i>xgettext</i> shall look for strings in the first argument of each call to the
function or macro <i>keyword-spec</i>.</p>
</li>
<li>
<p>If <i>keyword-spec</i> is of the form <i>id</i>:<i>argnum</i> then <i>xgettext</i> shall treat the <i>argnum</i>-th argument of
a call to the function or macro <i>id</i> as the <i>msgid</i> argument, where <i>argnum</i> 1 is the first argument.</p>
</li>
<li>
<p>If <i>keyword-spec</i> is of the form <i>id</i>:<i>argnum1</i>,<i>argnum2</i> then <i>xgettext</i> shall treat strings in the
<i>argnum1</i>-th argument and in the <i>argnum2</i>-th argument of a call to the function or macro <i>id</i> as the <i>msgid</i>
and <i>msgid_plural</i> arguments, respectively.</p>
</li>
</ul>
<p>For all mentioned forms, the application shall ensure that if <i>argnum2</i> is given, it is not equal to <i>argnum1</i>. All
numeric values shall be converted as specified in item 6 in XBD <a href="../basedefs/V1_chap12.html#tag_12_01"><i>12.1 Utility
Argument Syntax</i></a>.</p>
</dd>
<dt><b>-n</b></dt>
<dd>Add comment lines to the output file indicating pathnames and line numbers in the source files where each extracted string is
encountered. These lines shall appear before each <b>msgid</b> directive. Such comments should have the format:
<pre>
<tt>#: </tt><i>pathname1</i><tt>:</tt><i>linenumber1 </i><b>[</b><i>pathname2</i><tt>:</tt><i>linenumber2</i><tt>...</tt><b>]</b><tt>
</tt></pre></dd>
<dt><b>-p&nbsp;</b><i>pathname</i></dt>
<dd><br>
Create output files in the directory specified by <i>pathname</i> instead of in the current working directory.</dd>
<dt><b>-x&nbsp;</b><i>exclude-file</i></dt>
<dd><br>
Specify a file containing strings that shall not be extracted from the input files. The format of <i>exclude-file</i> is identical
to that of a dot-po file. However, only statements containing <b>msgid</b> directives in <i>exclude-file</i> shall be used. All
other statements shall be ignored.</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_05" id="tag_20_153_05"></a>OPERANDS</h4>
<blockquote>
<p>The following operand shall be supported:</p>
<dl compact>
<dd></dd>
<dt><i>file</i></dt>
<dd>A pathname of an input file containing C-language source code. If <tt>'-'</tt> is specified for an instance of <i>file</i>, the
standard input shall be used.</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_06" id="tag_20_153_06"></a>STDIN</h4>
<blockquote>
<p>The standard input shall not be used unless a <i>file</i> operand is specified as <tt>'-'</tt>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_07" id="tag_20_153_07"></a>INPUT FILES</h4>
<blockquote>
<p>The input files specified as <i>file</i> operands shall be C-language source files. The input file specified as the
option-argument for the <b>-x</b> option shall be a dot-po file in the format specified as input for the <a href=
"../utilities/msgfmt.html"><i>msgfmt</i></a> utility.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_08" id="tag_20_153_08"></a>ENVIRONMENT VARIABLES</h4>
<blockquote>
<p>The following environment variables shall affect the execution of <i>xgettext</i>:</p>
<dl compact>
<dd></dd>
<dt><i>LANG</i></dt>
<dd>Provide a default value for the internationalization variables that are unset or null. (See XBD <a href=
"../basedefs/V1_chap08.html#tag_08_02"><i>8.2 Internationalization Variables</i></a> for the precedence of internationalization
variables used to determine the values of locale categories.)</dd>
<dt><i>LANGUAGE</i></dt>
<dd>Determine the location of messages objects <sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;if <i>NLSPATH</i> is not set or the evaluation of <i>NLSPATH</i>
did not lead to a suitable messages object being found. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt><i>LC_ALL</i></dt>
<dd>If set to a non-empty string value, override the values of all the other internationalization variables.</dd>
<dt><i>LC_CTYPE</i></dt>
<dd>Determine the locale for the interpretation of sequences of bytes of text data as characters (for example, single-byte as
opposed to multi-byte characters in arguments and input files).</dd>
<dt><i>LC_MESSAGES</i></dt>
<dd><br>
Determine the locale name used to locate messages objects, and the locale that should be used to affect the format and contents of
diagnostic messages written to standard error.</dd>
<dt><i>NLSPATH</i></dt>
<dd><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
Determine the location of messages objects and message catalogs. <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"></dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_09" id="tag_20_153_09"></a>ASYNCHRONOUS EVENTS</h4>
<blockquote>
<p>Default.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_10" id="tag_20_153_10"></a>STDOUT</h4>
<blockquote>
<p>The standard output shall not be used.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_11" id="tag_20_153_11"></a>STDERR</h4>
<blockquote>
<p>The standard error shall be used for diagnostic messages and may be used for warning messages.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_12" id="tag_20_153_12"></a>OUTPUT FILES</h4>
<blockquote>
<p>The output files shall be dot-po files in the format specified as input for the <a href=
"../utilities/msgfmt.html"><i>msgfmt</i></a> utility. It is unspecified whether each output file includes a header (<b>msgid</b>
<tt>""</tt>) before the content derived from the input C-language source files.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_13" id="tag_20_153_13"></a>EXTENDED DESCRIPTION</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_14" id="tag_20_153_14"></a>EXIT STATUS</h4>
<blockquote>
<p>The following exit values shall be returned:</p>
<dl compact>
<dd></dd>
<dt>&nbsp;0</dt>
<dd>Successful completion.</dd>
<dt>&gt;0</dt>
<dd>An error occurred.</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_15" id="tag_20_153_15"></a>CONSEQUENCES OF ERRORS</h4>
<blockquote>
<p>Default.</p>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_20_153_16" id="tag_20_153_16"></a>APPLICATION USAGE</h4>
<blockquote>
<p>Implementations differ as to whether they write all output to the default output file or split the output into separate
per-domain files. Portable applications can either ensure that each C-language source file contains calls to <i>gettext</i> family
functions for only a single domain, or force all output to be to the default output file by using the <b>-K</b> option to override
the default keywords.</p>
<p>Some implementations of <i>xgettext</i> are not able to extract cast strings (unless <b>-a</b> is used), for example casts of
literal strings to <b>(const char *)</b>. Use of a cast is unnecessary anyway, since the prototypes in <a href=
"../basedefs/libintl.h.html"><i>&lt;libintl.h&gt;</i></a> already specify this type.</p>
<p>The <i>xgettext</i> utility is not required to handle C preprocessor directives. Therefore if, for example, calls to
<i>gettext</i> family functions are wrapped by macros, they might not be found unless the <b>-K</b> option is used to tell
<i>xgettext</i> to look for the macro calls.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_17" id="tag_20_153_17"></a>EXAMPLES</h4>
<blockquote>
<p><b>Example 1</b></p>
<p>The following example shows how <b>-K</b> can be used to force all output to be to the default output file:</p>
<pre>
<tt>xgettext -K "" -K gettext:1 -K dgettext:2 -K dcgettext:2 \
    -K ngettext:1,2 -K dngettext:2,3 -K dcngettext:2,3 source.c
</tt></pre>
<p>By overriding the default keywords using the <b>-K</b> option as above, the <i>xgettext</i> utility is directed to ignore the
<i>domainname</i> arguments to the <a href="../functions/dgettext.html"><i>dgettext</i>()</a>, <a href=
"../functions/dcgettext.html"><i>dcgettext</i>()</a>, <a href="../functions/dngettext.html"><i>dngettext</i>()</a>, and <a href=
"../functions/dcngettext.html"><i>dcngettext</i>()</a> functions. Thus, the utility treats the functions as their respective
equivalent without the <i>d</i> prefix, ignoring the <i>domainname</i> argument and writing generated output to the default output
file, <b>messages.po</b>. Additional <b>-K</b> options would be needed for the variants of the functions with an <i>_l</i> suffix
if they are used.</p>
<p><b>Example 2</b></p>
<p>If the source uses a macro definition such as:</p>
<pre>
<tt>#define i18n gettext
</tt></pre>
<p>the use of:</p>
<pre>
<tt>xgettext -K i18n:1 source.c
</tt></pre>
<p>will pick up <b>msgid</b> values from a line such as:</p>
<pre>
<tt>fprintf(stdout, i18n("The value is %s"), value1);
</tt></pre></blockquote>
<h4 class="mansect"><a name="tag_20_153_18" id="tag_20_153_18"></a>RATIONALE</h4>
<blockquote>
<p>The <b>-K</b> option is based on the <b>-k</b> option of GNU <i>xgettext</i>; the only difference is that GNU's <b>-k</b> takes
an optional option-argument whereas <b>-K</b> in this standard has a mandatory option-argument in order to comply with the syntax
guidelines.</p>
<p>The standard developers considered including functionality equivalent to the <b>-c</b>, <b>-m</b>, and <b>-M</b> options in
existing implementations. However, those letters could not be used as the syntax differed between implementations. The usual
solution of adding an uppercase equivalent of lowercase options with the standard syntax instead was not possible, for obvious
reasons for <b>-m</b> and <b>-M</b>, and as <b>-C</b> was already in use for another purpose in one implementation.</p>
<p>The <b>-s</b> option is not included as it has been deprecated in at least one implementation because it has been found to
deprive translators of valuable context.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_19" id="tag_20_153_19"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>If this utility is directed to create a new directory entry that contains any bytes that have the encoded value of a
&lt;newline&gt; character, implementations are encouraged to treat this as an error. A future version of this standard may require
implementations to treat this as an error.</p>
<p>A future version of this standard may change the description of the <b>-n</b> option to mandate the given comment format (by
using &quot;shall&quot; instead of &quot;should&quot;).</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_20" id="tag_20_153_20"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../utilities/gettext.html#tag_20_54"><i>gettext</i></a>, <a href="../utilities/msgfmt.html#"><i>msgfmt</i></a></p>
<p>XBD <a href="../basedefs/V1_chap08.html#tag_08"><i>8. Environment Variables</i></a>, <a href=
"../basedefs/V1_chap12.html#tag_12_02"><i>12.2 Utility Syntax Guidelines</i></a></p>
<p>XSH <a href="../functions/gettext.html#tag_17_238"><i>gettext</i>()</a></p>
</blockquote>
<h4 class="mansect"><a name="tag_20_153_21" id="tag_20_153_21"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 8.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../utilities/xargs.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../utilities/yacc.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
