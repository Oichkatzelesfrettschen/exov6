<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>gettext</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/getsubopt.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/getuid.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="gettext" id="gettext"></a> <a name="tag_17_238" id="tag_17_238"></a><!-- gettext -->
<h4 class="mansect"><a name="tag_17_238_01" id="tag_17_238_01"></a>NAME</h4>
<blockquote>dgettext, dgettext_l, dcgettext, dcgettext_l, gettext, gettext_l, ngettext, ngettext_l, dngettext, dngettext_l,
dcngettext, dcngettext_l — message handling functions</blockquote>
<h4 class="mansect"><a name="tag_17_238_02" id="tag_17_238_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/libintl.h.html">libintl.h</a>&gt;<br>
<br>
char *dgettext(const char *</tt><i>domainname</i><tt>, const char *</tt><i>msgid</i><tt>);<br>
char *dgettext_l(const char *</tt><i>domainname</i><tt>, const char *</tt><i>msgid</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; locale_t</tt> <i>locale</i><tt>);<br>
char *dcgettext(const char *</tt><i>domainname</i><tt>, const char *</tt><i>msgid</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int</tt> <i>category</i><tt>);<br>
char *dcgettext_l(const char *</tt><i>domainname</i><tt>, const char *</tt><i>msgid</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int</tt> <i>category</i><tt>, locale_t</tt> <i>locale</i><tt>);<br>
char *dngettext(const char *</tt><i>domainname</i><tt>, const char *</tt><i>msgid</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const char *</tt><i>msgid_plural</i><tt>, unsigned long int</tt> <i>n</i><tt>);<br>
char *dngettext_l(const char *</tt><i>domainname</i><tt>, const char *</tt><i>msgid</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const char *</tt><i>msgid_plural</i><tt>, unsigned long int</tt> <i>n</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; locale_t</tt> <i>locale</i><tt>);<br>
char *dcngettext(const char *</tt><i>domainname</i><tt>, const char *</tt><i>msgid</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const char *</tt><i>msgid_plural</i><tt>, unsigned long int</tt> <i>n</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int</tt> <i>category</i><tt>);<br>
char *dcngettext_l(const char *</tt><i>domainname</i><tt>, const char *</tt><i>msgid</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const char *</tt><i>msgid_plural</i><tt>, unsigned long int</tt> <i>n</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int</tt> <i>category</i><tt>, locale_t</tt> <i>locale</i><tt>);<br>
char *gettext(const char *</tt><i>msgid</i><tt>);<br>
char *gettext_l(const char *</tt><i>msgid</i><tt>, locale_t</tt> <i>locale</i><tt>);<br>
char *ngettext(const char *</tt><i>msgid</i><tt>, const char *</tt><i>msgid_plural</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned long int</tt> <i>n</i><tt>);<br>
char *ngettext_l(const char *</tt><i>msgid</i><tt>, const char *</tt><i>msgid_plural</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; unsigned long int</tt> <i>n</i><tt>, locale_t</tt> <i>locale</i><tt>);<br></tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_238_03" id="tag_17_238_03"></a>DESCRIPTION</h4>
<blockquote>
<p>The <i>gettext</i>() function shall:</p>
<ul>
<li>
<p>attempt to locate a suitable messages object (described in detail below) for the <i>LC_MESSAGES</i> category in the current
locale, and for the current text domain (see <a href="../functions/bindtextdomain.html#"><i>bindtextdomain</i>()</a>), containing
the string identified by <i>msgid</i>,</p>
</li>
<li>
<p>retrieve the string identified by <i>msgid</i> from the messages object,</p>
</li>
<li>
<p>convert the string to the output codeset if necessary (described in detail below), and</p>
</li>
<li>
<p>return the result.</p>
</li>
</ul>
<p>If the locale name in effect is <tt>"POSIX"</tt> or <tt>"C"</tt> (i.e. the name associated with the <i>LC_MESSAGES</i> locale
category in the current locale), or if no suitable messages object exists, or if no string identified by <i>msgid</i> exists in the
messages object, or if an error occurs, <i>msgid</i> shall be returned.</p>
<p>The <i>dgettext</i>() function shall be equivalent to <i>gettext</i>(), except <i>domainname</i> shall be used instead of the
current text domain to locate the messages object.</p>
<p>The <i>dcgettext</i>() function shall be equivalent to <i>dgettext</i>(), except the locale category identified by
<i>category</i> shall be used instead of <i>LC_MESSAGES .</i></p>
<p>The <i>ngettext</i>() function shall be equivalent to <i>gettext</i>(), except:</p>
<ul>
<li>
<p>The string to retrieve shall be identified by a combination of <i>msgid</i> and <i>n</i> (see <a href=
"../utilities/msgfmt.html#"><i>msgfmt</i></a>).</p>
</li>
<li>
<p>If the locale name in effect is <tt>"POSIX"</tt> or <tt>"C"</tt>, or if no suitable messages object exists, or if no string
identified by the combination of <i>msgid</i> and <i>n</i> exists in the messages object, or if an error occurs, the return value
shall be <i>msgid</i> if <i>n</i> is 1, otherwise <i>msgid_plural</i>.</p>
</li>
</ul>
<p>The <i>dngettext</i>() function shall be equivalent to <i>ngettext</i>(), except <i>domainname</i> shall be used instead of the
current text domain to locate the messages object.</p>
<p>The <i>dcngettext</i>() function shall be equivalent to <i>dngettext</i>(), except the locale category identified by
<i>category</i> shall be used instead of <i>LC_MESSAGES .</i></p>
<p>The <i>*_l</i>() functions shall be equivalent to their counterparts without the <i>_l</i> suffix, except <i>locale</i> shall be
used instead of the current locale. If <i>locale</i> is the special locale object LC_GLOBAL_LOCALE or is not a valid locale object
handle, the behavior is undefined.</p>
<p>The application shall ensure that the <i>msgid</i> and <i>msgid_plural</i> arguments are strings. If either <i>msgid</i> or
<i>msgid_plural</i> is an empty string, or contains characters not in the portable character set, the results are unspecified. If
the <i>category</i> argument is <i>LC_ALL ,</i> the results are unspecified.</p>
<p>The location of the messages object shall be determined according to the following criteria, stopping when the first messages
object is found:</p>
<ol>
<li>
<p><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
If the <i>NLSPATH</i> environment variable is set to a non-empty string, an <i>NLSPATH</i> search shall be performed as described
in XBD <a href="../basedefs/V1_chap08.html#tag_08_02"><i>8.2 Internationalization Variables</i></a>. If <i>NLSPATH</i> identifies
more than one template to use, each template in turn shall be used until a valid messages object is found. <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></p>
</li>
<li>
<p>If the <i>LANGUAGE</i> environment variable is set to a non-empty string, a <i>LANGUAGE</i> search shall be performed as
described below. If <i>LANGUAGE</i> identifies more than one directory to search, each directory shall be searched until a valid
messages object is found.</p>
</li>
<li>
<p>A single-locale search shall be performed as described below.</p>
</li>
</ol>
<p>For <sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border=
"0"> &nbsp;the NLSPATH search and <img src="../images/opt-end.gif" alt="[Option End]" border="0"> &nbsp;the single-locale search,
the single locale name used to locate the messages object shall be the locale name associated with the selected locale category
from the current locale, or the provided locale object if calling one of the <i>*_l</i>() functions; additional searches of locale
names without .<i>codeset</i> (if present), without _<i>territory</i> (if present), and without @<i>modifier</i> (if present) may
be performed.</p>
<p>For the <i>LANGUAGE</i> search, the value of the <i>LANGUAGE</i> environment variable shall be a list of one or more locale
names separated by a &lt;colon&gt; (<tt>':'</tt>) character. Each locale name shall be tried in the specified order. If a messages
object for the locale does not exist, or cannot be opened, or is unsuitable for implementation-defined reasons (such as security),
the next locale name (if any) shall be tried. If:</p>
<ul>
<li>
<p>a messages object for the locale can be opened but cannot be processed without error, or</p>
</li>
<li>
<p>the messages object does not contain a string identified by <i>msgid</i>, or <i>msgid</i> and <i>n</i> for the <i>ngettext</i>
functions,</p>
</li>
</ul>
<p>it is unspecified whether the next locale name (if any) is tried. In all other cases, the messages object for the locale shall
be used.</p>
<p>For each locale name in <i>LANGUAGE ,</i> or if <i>LANGUAGE</i> is not set or is empty, or no suitable messages object is found
in processing <i>LANGUAGE ,</i> the pathname used to locate the messages object shall be
<i>dirname</i>/<i>localename</i>/<i>categoryname</i>/<i>textdomainname</i><b>.mo</b>, where:</p>
<ul>
<li>
<p>The <i>dirname</i> part is the <i>dirname</i> argument of the most recent successful call to <a href=
"../functions/bindtextdomain.html"><i>bindtextdomain</i>()</a> that had <i>textdomainname</i> as the <i>domainname</i> argument;
any trailing &lt;slash&gt; characters in <i>dirname</i> shall be discarded. If a successful call to <a href=
"../functions/bindtextdomain.html"><i>bindtextdomain</i>()</a> has not been made for <i>textdomainname</i>, an
implementation-defined default directory shall be used.</p>
</li>
<li>
<p>For the <i>LANGUAGE</i> search, the <i>localename</i> part is each locale name from <i>LANGUAGE</i> in turn; if a locale name
has the format <i>language</i><b>[</b>_<i>territory</i><b>][</b>.<i>codeset</i><b>][</b>@<i>modifier</i><b>]</b>, additional
searches of locale names without .<i>codeset</i> (if present), without _<i>territory</i> (if present), and without @<i>modifier</i>
(if present) may be performed; if .<i>codeset</i> is not present, additional searches of locale names with an added .<i>codeset</i>
may be performed. For the single-locale search, the <i>localename</i> part is the name of the current locale, or the locale
specified in an <i>*_l</i>() function call, for the category named by <i>categoryname</i>. Spellings of codeset names are not
standardized, and implementations may attempt to use different commonly known spellings, for example <tt>"utf8"</tt> and
<tt>"UTF-8"</tt>.</p>
</li>
<li>
<p>The <i>categoryname</i> part is the string <tt>"LC_MESSAGES"</tt> if <i>gettext</i>(), <i>dgettext</i>(), <i>ngettext</i>(), or
<i>dngettext</i>() is called, or the locale category name corresponding to the <i>category</i> argument to <i>dcgettext</i>() or
<i>dcngettext</i>(). Likewise for the <i>*_l</i>() variants of all these functions.</p>
</li>
<li>
<p>For <i>gettext</i>(), <i>gettext_l</i>(), <i>ngettext</i>(), and <i>ngettext_l</i>(), the <i>textdomainname</i> part is the text
domain set by the last successful call to <a href="../functions/textdomain.html"><i>textdomain</i>()</a>. For <i>dgettext</i>(),
<i>dcgettext</i>(), <i>dngettext</i>(), <i>dcngettext</i>(), and the <i>*_l</i>() variants of these functions,
<i>textdomainname</i> is the text domain specified by the <i>domainname</i> argument. The <i>domainname</i> argument shall be
equivalent in syntax and meaning to the <i>domainname</i> argument to <a href=
"../functions/textdomain.html"><i>textdomain</i>()</a>, except that the selection of the text domain shall affect only the
<i>dgettext</i>(), <i>dcgettext</i>(), <i>dngettext</i>(), and <i>dcngettext</i>() function calls and their <i>*_l</i>() variants.
If the <i>domainname</i> argument is a null pointer, the text domain set by the last successful call to <a href=
"../functions/textdomain.html"><i>textdomain</i>()</a> shall be used. For all of these functions, if a successful call to <a href=
"../functions/textdomain.html"><i>textdomain</i>()</a> has not been made the default text domain <tt>"messages"</tt> shall be
used.</p>
</li>
</ul>
<p>Resolution of the messages object pathname shall be performed the first time one of the <i>gettext</i> family of functions is
called for a given combination of <i>dirname</i>, <i>localename</i>, <i>categoryname</i>, and <i>textdomainname</i>. It is
unspecified whether the pathname is re-resolved if the combination has been used before in a call to one of the <i>gettext</i>
family of functions. If <a href="../functions/bindtextdomain.html"><i>bindtextdomain</i>()</a> performs pathname resolution of its
<i>dirname</i> argument, only the part of the messages object pathname after <i>dirname</i> shall be resolved by the <i>gettext</i>
family of functions.</p>
<p>When one of the <i>gettext</i> family of functions returns a message string that was found in a messages object, it shall
convert the codeset of the message string to the output codeset if a codeset is specified in the messages object (see <a href=
"../utilities/msgfmt.html#"><i>msgfmt</i></a>) and the output codeset is not the same as that codeset. If a successful call to
<a href="../functions/bind_textdomain_codeset.html"><i>bind_textdomain_codeset</i>()</a> has been made with the text domain of the
messages object as the <i>domainname</i> argument and a non-null <i>codeset</i> argument, the output codeset shall be the
<i>codeset</i> argument from the most recent such call. Otherwise, the output codeset shall be the codeset of characters in the
current locale, or the provided locale object if calling one of the <i>*_l</i>() functions, as specified by the <i>LC_CTYPE</i>
category of the locale. The conversion shall be performed as if by a call to <a href="../functions/iconv.html"><i>iconv</i>()</a>
using a conversion descriptor returned by <i>iconv_open</i>(&lt;<i>output codeset</i>&gt;, &lt;<i>messages object codeset</i>&gt;),
except that if the return value of <a href="../functions/iconv.html"><i>iconv</i>()</a> would be greater than zero, the
non-identical conversions performed by the <i>gettext</i> family of functions need not be the same as those that such an <a href=
"../functions/iconv.html"><i>iconv</i>()</a> call would perform. If an error prevents the codeset conversion from being performed,
the <i>gettext</i> family of functions shall behave as if no message string was found in the messages object. If at least one
non-identical conversion is performed that results in a fallback character (one that does not provide any information about the
character it was converted from, for example, a &lt;question-mark&gt; or &quot;replacement-character&quot;), the <i>gettext</i> family of
functions may behave as if no message string was found in the messages object.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_238_04" id="tag_17_238_04"></a>RETURN VALUE</h4>
<blockquote>
<p>The <i>gettext</i>(), <i>gettext_l</i>(), <i>dgettext</i>(), <i>dgettext_l</i>(), <i>dcgettext</i>(), and <i>dcgettext_l</i>()
functions shall return the message string described in DESCRIPTION if successful. Otherwise, they shall return <i>msgid</i>.</p>
<p>The <i>ngettext</i>(), <i>ngettext_l</i>(), <i>dngettext</i>(), <i>dngettext_l</i>(), <i>dcngettext</i>(), and
<i>dcngettext_l</i>() functions shall return the message string described in DESCRIPTION if successful. Otherwise, <i>msgid</i>
shall be returned if <i>n</i> is equal to 1, or <i>msgid_plural</i> if <i>n</i> is not equal to 1.</p>
<p>The application shall ensure that it does not modify the returned string. A subsequent call to a <i>gettext</i> family function
shall not overwrite or invalidate the returned string. The returned string may be invalidated by a subsequent call to <a href=
"../functions/bind_textdomain_codeset.html"><i>bind_textdomain_codeset</i>()</a>, <a href=
"../functions/bindtextdomain.html"><i>bindtextdomain</i>()</a>, <a href="../functions/setlocale.html"><i>setlocale</i>()</a>, or
<a href="../functions/textdomain.html"><i>textdomain</i>()</a> in the same process, except for calls that only query values. The
returned string shall not be invalidated by a subsequent call to <a href="../functions/uselocale.html"><i>uselocale</i>()</a>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_238_05" id="tag_17_238_05"></a>ERRORS</h4>
<blockquote>
<p>The <i>gettext</i> family of functions shall not modify <i>errno</i>. If an error occurs these functions shall return a string
as described in RETURN VALUE.</p>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_238_06" id="tag_17_238_06"></a>EXAMPLES</h4>
<blockquote>
<p>The example code below assumes the following:</p>
<ul>
<li>
<p>The implementation-defined default directory is <b>/system/gettextlib</b>.</p>
</li>
<li>
<p>The following locales are available on the target system: en_US, en_GB, de_DE. The codeset used for all of these locales is
UTF-8.</p>
</li>
<li>
<p>The en_AU locale is not available on the target system.</p>
</li>
<li>
<p>The target system supports conversion from ISO/IEC 8859-1 to UTF-8.</p>
</li>
<li>
<p>The codeset used for the POSIX locale is ASCII.</p>
</li>
<li>
<p>The target system does not support conversion from ISO/IEC 8859-1 to ASCII.</p>
</li>
</ul>
<p>Furthermore, the following <b>.mo</b> files (and only the following <b>.mo</b> files) are installed:</p>
<ul>
<li>
<p><b>/system/gettextlib/en_US/LC_MESSAGES/mail.mo</b></p>
</li>
<li>
<p><b>/messagecatalogs/example/en_US/LC_MESSAGES/mail.mo</b></p>
</li>
</ul>
<p>These are compiled from a portable messages object source file (dot-po file) with the following ISO/IEC 8859-1 encoded contents
(see the EXTENDED DESCRIPTION of the <a href="../utilities/msgfmt.html#"><i>msgfmt</i></a> utility for a description of the dot-po
file format):</p>
<pre>
<tt>msgid ""
msgstr ""
"Content-Type: text/plain; charset=ISO_8859-1\n"
"Plural-Forms: nplurals=4; plural= n==1?0: (n&gt;1&amp;&amp;n&lt;10)?1: (n==0)?2:3;\n"
msgid "recipient"
msgid_plural "recipients"
msgstr[0] "1 recipient"
msgstr[1] "2 to 9 recipients"
msgstr[2] "no recipients"
msgstr[3] "more than 9 recipients"
</tt></pre>
<p><b>/system/gettextlib/de_DE/LC_MESSAGES/mail.mo</b> is compiled from a dot-po file with the following ISO/IEC 8859-1 encoded
contents:</p>
<pre>
<tt>msgid ""
msgstr ""
"Content-Type: text/plain; charset=ISO_8859-1\n"
"Plural-Forms: nplurals=4; plural= n==1?0: (n&gt;1&amp;&amp;n&lt;5)?1: (n==0)?2:3;\n"
msgid "recipient"
msgid_plural "recipients"
msgstr[0] "1 Empf:a]nger"
msgstr[1] "2 bis 4 Empf:a]nger"
msgstr[2] "keine Empf:a]nger"
msgstr[3] "mehr als 4 Empf:a]nger"
</tt></pre>
<p><b>/messagecatalogs/example/en_GB/LC_MESSAGES/mail.mo</b> is compiled from a dot-po file with the following ISO/IEC 8859-1
encoded contents:</p>
<pre>
<tt>msgid ""
msgstr ""
"Content-Type: text/plain; charset=ISO_8859-1\n"
"Plural-Forms: nplurals=4; plural= n==1?0: (n&gt;1&amp;&amp;n&lt;5)?1: (n==0)?2:3;\n"
msgid "recipient"
msgid_plural "recipients"
msgstr[0] "1 recipient"
msgstr[1] "2 to 4 recipients"
msgstr[2] "no recipients"
msgstr[3] "5 or more recipients"
</tt></pre>
<p><b>/messagecatalogs/example2/en_US/LC_MESSAGES/othermail.mo</b> is not a suitable messages object file or is a suitable messages
object file that does not contain the <b>msgid</b> <tt>"recipient"</tt>.</p>
<p>The following example demonstrates the interactions between <a href=
"../functions/bindtextdomain.html"><i>bindtextdomain</i>()</a>, <a href=
"../functions/bind_textdomain_codeset.html"><i>bind_textdomain_codeset</i>()</a>, <a href=
"../functions/textdomain.html"><i>textdomain</i>()</a>, and the <i>gettext</i> family of functions.</p>
<pre>
<tt>unsigned long n_recipients;
// strdup() is used to prevent default_domain from being invalidated by
// a future call to bindtextdomain()
const char *default_domain = strdup(bindtextdomain("mail", NULL));
setlocale(LC_MESSAGES, "POSIX");
setlocale(LC_CTYPE, "POSIX");
<br>
n_recipients = 1;
// The following outputs "recipient" with the same encoding as the
// "recipient" argument to ngettext():
printf("%s\n", ngettext("recipient", "recipients", n_recipients));
<br>
n_recipients = 3;
// The following outputs "recipients" with the same encoding as the
// "recipients" argument to ngettext():
printf("%s\n", ngettext("recipient", "recipients", n_recipients));
<br>
setlocale(LC_MESSAGES, "en_US");
setlocale(LC_CTYPE, "en_US");
textdomain("mail");
<br>
n_recipients = 1;
// The following outputs "1 recipient", encoded in UTF-8:
printf("%s\n", ngettext("recipient", "recipients", n_recipients));
<br>
n_recipients = 3;
// The following outputs "2 to 9 recipients", encoded in UTF-8:
printf("%s\n", ngettext("recipient", "recipients", n_recipients));
<br>
setlocale(LC_MESSAGES, "en_GB");
setlocale(LC_CTYPE, "en_GB");
bindtextdomain("mail", "/messagecatalogs/example/");
<br>
n_recipients = 3;
// The following outputs "2 to 4 recipients", encoded in UTF-8:
printf("%s\n", ngettext("recipient", "recipients", n_recipients));
<br>
setlocale(LC_MESSAGES, "en_US");
setlocale(LC_CTYPE, "en_US");
textdomain("othermail");
bindtextdomain("othermail", "/messagecatalogs/example2/");
<br>
n_recipients = 3;
// The following outputs "recipients" with the same encoding as the
// "recipients" argument to ngettext():
printf("%s\n", ngettext("recipient", "recipients", n_recipients));
<br>
// Because there is no locale named en_AU on the system, en_US is used:
setenv("LANGUAGE", "en_AU:en_US:en_GB", 1);
setlocale(LC_MESSAGES, "");
setlocale(LC_CTYPE, "");
bindtextdomain("mail", default_domain);
<br>
// The following outputs "2 to 9 recipients", encoded in UTF-8:
printf("%s\n", dngettext("mail", "recipient", "recipients", 3));
<br>
textdomain("mail");
bind_textdomain_codeset("mail", "UTF-8");
setlocale(LC_MESSAGES, "de_DE");
setlocale(LC_CTYPE, "de_DE");
// Clear the LANGUAGE environment variable, otherwise it would take
// precedence over the locale set above, and en_US would continue to
// be used.
setenv("LANGUAGE", "", 1);
<br>
n_recipients = 1;
// The following outputs "1 Empf:a]nger", encoded in UTF-8:
printf("%s\n", ngettext("recipient", "recipients", n_recipients));
<br>
bind_textdomain_codeset("mail", "ASCII");
setlocale(LC_CTYPE, "POSIX");
<br>
n_recipients = 1;
// The following outputs "recipient" with the same encoding as the
// "recipient" argument to ngettext() - remember, the system is assumed
// to not support conversion from ISO/IEC 8859-1 to ASCII:
printf("%s\n", ngettext("recipient", "recipients", n_recipients));
<br>
free(default_domain);
</tt></pre></blockquote>
<h4 class="mansect"><a name="tag_17_238_07" id="tag_17_238_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>These functions do not impose a limit on message length. Note that translated strings typically have a different length than the
input strings, possibly much longer, and applications using these translations in formatted text (for example, aligned columns for
a table) should take that into account.</p>
<p>The <i>dcgettext</i>(), <i>dcgettext_l</i>(), <i>dcngettext</i>(), and <i>dcngettext_l</i>() functions are useful to retrieve
locale-specific strings for a category other than <i>LC_MESSAGES .</i> For example, they can be used to obtain a time format string
from the <i>LC_TIME</i> category; because the locale setting of <i>LC_TIME</i> and <i>LC_MESSAGES</i> can be different, using the
other <i>gettext</i> family functions in such a case might cause an undesired result. All of the functions in the <i>gettext</i>
family of functions, except <i>dcgettext</i>(), <i>dcgettext_l</i>(), <i>dcngettext</i>(), and <i>dcngettext_l</i>(), search for
messages objects only in the <i>LC_MESSAGES</i> category.</p>
<p>Implementations typically, but are not required to, <a href="../functions/mmap.html"><i>mmap</i>()</a> the messages object file
the first time one of the <i>gettext</i> family of functions is called, and keep that map in place until it is no longer expected
to be used. For example, a successful call to <a href="../functions/bindtextdomain.html"><i>bindtextdomain</i>()</a> will typically
cause the next call to one of the <i>gettext</i> family of functions to <a href="../functions/munmap.html"><i>munmap</i>()</a> the
previous file and <a href="../functions/mmap.html"><i>mmap</i>()</a> the new file. Applications should not rely on this behavior,
however: the implementation is allowed to cache previously used maps, or not use <a href="../functions/mmap.html"><i>mmap</i>()</a>
at all and reopen the file each time one of the <i>gettext</i> family of functions is called.</p>
<p>The <i>msgid</i> and <i>msgid_plural</i> arguments are typically in (US) English. The arguments are always used in the POSIX or
C locale, and when a <i>gettext</i> family function encounters an error, so they should not be abstract message identifiers (for
example, <tt>"message 123"</tt>) and they should only use characters in the portable character set (to avoid outputting byte
sequences that are not valid characters in the current output codeset). If the <a href=
"../utilities/xgettext.html"><i>xgettext</i></a> utility is used to extract the <i>msgid</i> and <i>msgid_plural</i> arguments from
C source files into a template dot-po file, the arguments must be string literals in order for the resulting file to be useful to
translators.</p>
<p>The strings returned by the <i>gettext</i> family of functions are not guaranteed to contain only characters that are valid in
the current output codeset. In particular, byte sequences that do not form valid characters can occur when:</p>
<ul>
<li>
<p>The <i>msgid</i> or <i>msgid_plural</i> arguments use characters outside the portable character set.</p>
</li>
<li>
<p>The messages object file does not specify a character set and uses characters outside the portable character set.</p>
</li>
</ul>
<p>The strings returned by the <i>gettext</i> family of functions are guaranteed to remain valid until invalidated as described in
the RETURN VALUE section. This includes strings that are created by codeset conversion; those strings are freed by the
implementation, not the application. Thus, it is safe to call <i>gettext</i> family functions multiple times in situations such
as:</p>
<pre>
<tt>printf("%s %s\n", gettext("foo"), gettext("bar"));
</tt></pre></blockquote>
<h4 class="mansect"><a name="tag_17_238_08" id="tag_17_238_08"></a>RATIONALE</h4>
<blockquote>
<p>Although the return type of these functions ought to be <b>const char *</b>, it is <b>char *</b> to match historical
practice.</p>
<p>The <i>gettext</i> family of functions is frequently used in reporting errors. In fact, it is possible to have an application
that attempts to create an error message that combines a translated string via <i>gettext</i>() with an error string provided by
<a href="../functions/strerror.html"><i>strerror</i>()</a>. The standard requires that the <i>gettext</i> family of functions does
not modify <i>errno</i>, so that an application need not worry about complications of providing sequencing points to capture a
stable value of <i>errno</i> prior to the translation of the error message, and so that the user will still get a somewhat useful
string (even if it is the untranslated original string) on any failure.</p>
<p>There are no wide character equivalents for these functions; historically no implementation is known to exist, and the
multi-byte message returned from these functions can, in most instances, be converted to wide characters by the application if
desired.</p>
<p>Some historical <i>gettext</i> implementations returned the translated string from the messages object without codeset
conversion if <a href="../functions/iconv_open.html"><i>iconv_open</i>()</a> fails. This is considered to be a bug in those
implementations.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_238_09" id="tag_17_238_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_238_10" id="tag_17_238_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/bindtextdomain.html#"><i>bindtextdomain</i>()</a>, <a href=
"../functions/catopen.html#"><i>catopen</i>()</a>, <a href="../functions/iconv.html#tag_17_248"><i>iconv</i>()</a>, <a href=
"../functions/setlocale.html#"><i>setlocale</i>()</a>, <a href="../functions/uselocale.html#"><i>uselocale</i>()</a></p>
<p>XBD <a href="../basedefs/libintl.h.html"><i>&lt;libintl.h&gt;</i></a>, <a href=
"../basedefs/limits.h.html"><i>&lt;limits.h&gt;</i></a></p>
<p>XCU <a href="../utilities/gettext.html#tag_20_54"><i>gettext</i></a>, <a href="../utilities/msgfmt.html#"><i>msgfmt</i></a>,
<a href="../utilities/xgettext.html#"><i>xgettext</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_238_11" id="tag_17_238_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 8.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/getsubopt.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/getuid.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
