<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>mbrtoc16</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/mbrlen.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/mbrtowc.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="mbrtoc16" id="mbrtoc16"></a> <a name="tag_17_325" id="tag_17_325"></a><!-- mbrtoc16 -->
<h4 class="mansect"><a name="tag_17_325_01" id="tag_17_325_01"></a>NAME</h4>
<blockquote>mbrtoc16, mbrtoc32 — convert a character to a Unicode character code (restartable)</blockquote>
<h4 class="mansect"><a name="tag_17_325_02" id="tag_17_325_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/uchar.h.html">uchar.h</a>&gt;<br>
<br>
size_t mbrtoc16(char16_t *restrict</tt> <i>pc16</i><tt>, const char *restrict</tt> <i>s</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; size_t</tt> <i>n</i><tt>, mbstate_t *restrict</tt> <i>ps</i><tt>);<br>
size_t mbrtoc32(char32_t *restrict</tt> <i>pc32</i><tt>, const char *restrict</tt> <i>s</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; size_t</tt> <i>n</i><tt>, mbstate_t *restrict</tt> <i>ps</i><tt>);<br></tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_325_03" id="tag_17_325_03"></a>DESCRIPTION</h4>
<blockquote>
<div class="box"><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]"
border="0"> The functionality described on this reference page is aligned with the ISO&nbsp;C standard. Any conflict between the
requirements described here and the ISO&nbsp;C standard is unintentional. This volume of POSIX.1-2024 defers to the ISO&nbsp;C
standard. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></div>
<p>If <i>s</i> is a null pointer, the <i>mbrtoc16</i>() function shall be equivalent to the call:</p>
<pre>
<tt>mbrtoc16(NULL, "", 1, ps)
</tt></pre>
<p>In this case, the values of the parameters <i>pc16</i> and <i>n</i> are ignored.</p>
<p>If <i>s</i> is not a null pointer, the <i>mbrtoc16</i>() function shall inspect at most <i>n</i> bytes beginning with the byte
pointed to by <i>s</i> to determine the number of bytes needed to complete the next character (including any shift sequences). If
the function determines that the next character is complete and valid, it shall determine the values of the corresponding wide
characters and then, if <i>pc16</i> is not a null pointer, shall store the value of the first (or only) such character in the
object pointed to by <i>pc16</i>. Subsequent calls shall store successive wide characters without consuming any additional input
until all the characters have been stored. If the corresponding wide character is the null wide character, the resulting state
described shall be the initial conversion state.</p>
<p>If <i>ps</i> is a null pointer, the <i>mbrtoc16</i>() function shall use its own internal <b>mbstate_t</b> object, which shall
be initialized at program start-up to the initial conversion state. Otherwise, the <b>mbstate_t</b> object pointed to by <i>ps</i>
shall be used to completely describe the current conversion state of the associated character sequence.</p>
<p>The behavior of this function is affected by the LC_CTYPE category of the current locale.</p>
<p>The <i>mbrtoc16</i>() function shall not change the setting of <i>errno</i> if successful.</p>
<p>The <i>mbrtoc32</i>() function shall behave the same way as <i>mbrtoc16</i>() except that the first parameter shall point to an
object of type <b>char32_t</b> instead of <b>char16_t</b>. References to <i>pc16</i> in the above description shall apply as if
they were <i>pc32</i> when they are being read as describing <i>mbrtoc32</i>().</p>
<p>If called with a null <i>ps</i> argument, the <i>mbrtoc16</i>() function need not be thread-safe; however, such calls shall
avoid data races with calls to <i>mbrtoc16</i>() with a non-null argument and with calls to all other functions.</p>
<p>If called with a null <i>ps</i> argument, the <i>mbrtoc32</i>() function need not be thread-safe; however, such calls shall
avoid data races with calls to <i>mbrtoc32</i>() with a non-null argument and with calls to all other functions.</p>
<p>The implementation shall behave as if no function defined in this volume of POSIX.1-2024 calls <i>mbrtoc16</i>() or
<i>mbrtoc32</i>() with a null pointer for <i>ps</i>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_325_04" id="tag_17_325_04"></a>RETURN VALUE</h4>
<blockquote>
<p>These functions shall return the first of the following that applies:</p>
<dl compact>
<dd></dd>
<dt>0</dt>
<dd>If the next <i>n</i> or fewer bytes complete the character that corresponds to the null wide character (which is the value
stored).</dd>
<dt>between 1 and <i>n</i> inclusive</dt>
<dd>
If the next <i>n</i> or fewer bytes complete a valid character (which is the value stored); the value returned shall be the number
of bytes that complete the character.</dd>
<dt>(<b>size_t</b>)-3</dt>
<dd>If the next character resulting from a previous call has been stored, in which case no bytes from the input shall be consumed
by the call.</dd>
<dt>(<b>size_t</b>)-2</dt>
<dd>If the next <i>n</i> bytes contribute to an incomplete but potentially valid character, and all <i>n</i> bytes have been
processed (no value is stored). When <i>n</i> has at least the value of the {MB_CUR_MAX} macro, this case can only occur if
<i>s</i> points at a sequence of redundant shift sequences (for implementations with state-dependent encodings).</dd>
<dt>(<b>size_t</b>)-1</dt>
<dd>If an encoding error occurs, in which case the next <i>n</i> or fewer bytes do not contribute to a complete and valid character
(no value is stored). In this case, [EILSEQ] shall be stored in <i>errno</i> and the conversion state is undefined.</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_17_325_05" id="tag_17_325_05"></a>ERRORS</h4>
<blockquote>
<p>These functions shall fail if:</p>
<dl compact>
<dd></dd>
<dt>[EILSEQ]</dt>
<dd>An invalid character sequence is detected. <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;In the POSIX locale an [EILSEQ] error cannot occur since all byte
values are valid characters. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
</dl>
<p>These functions may fail if:</p>
<dl compact>
<dd></dd>
<dt>[EINVAL]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
<i>ps</i> points to an object that contains an invalid conversion state. <img src="../images/opt-end.gif" alt="[Option End]"
border="0"></dd>
</dl>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_325_06" id="tag_17_325_06"></a>EXAMPLES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_325_07" id="tag_17_325_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_325_08" id="tag_17_325_08"></a>RATIONALE</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_325_09" id="tag_17_325_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_325_10" id="tag_17_325_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/c16rtomb.html#"><i>c16rtomb</i>()</a></p>
<p>XBD <a href="../basedefs/uchar.h.html"><i>&lt;uchar.h&gt;</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_325_11" id="tag_17_325_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 8. Included for alignment with the ISO/IEC&nbsp;9899:2018 standard.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/mbrlen.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/mbrtowc.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
