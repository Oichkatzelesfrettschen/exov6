<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>realloc</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/readv.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/realpath.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="realloc" id="realloc"></a> <a name="tag_17_480" id="tag_17_480"></a><!-- realloc -->
<h4 class="mansect"><a name="tag_17_480_01" id="tag_17_480_01"></a>NAME</h4>
<blockquote>realloc, reallocarray — memory reallocators</blockquote>
<h4 class="mansect"><a name="tag_17_480_02" id="tag_17_480_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/stdlib.h.html">stdlib.h</a>&gt;<br>
<br>
void *realloc(void *</tt><i>ptr</i><tt>, size_t</tt> <i>size</i><tt>);<br></tt></code></p>
<div class="box"><code><tt><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> void *reallocarray(void *</tt><i>ptr</i><tt>, size_t</tt> <i>nelem</i><tt>, size_t</tt>
<i>elsize</i><tt>); <img src="../images/opt-end.gif" alt="[Option End]" border="0"></tt></code></div>
<tt><br></tt></blockquote>
<h4 class="mansect"><a name="tag_17_480_03" id="tag_17_480_03"></a>DESCRIPTION</h4>
<blockquote>
<p>For <i>realloc</i>(): <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> The functionality described on this reference page is aligned with the ISO&nbsp;C standard. Any
conflict between the requirements described here and the ISO&nbsp;C standard is unintentional. This volume of POSIX.1-2024 defers
to the ISO&nbsp;C standard. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
<p>The <i>realloc</i>() function shall deallocate the old object pointed to by <i>ptr</i> and return a pointer to a new object that
has the size specified by <i>size</i>. The contents of the new object shall be the same as that of the old object prior to
deallocation, up to the lesser of the new and old sizes. Any bytes in the new object beyond the size of the old object have
indeterminate values.</p>
<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> The
<i>reallocarray</i>() function shall be equivalent to the call <tt>realloc(<i>ptr</i>, <i>nelem</i> * <i>elsize</i>)</tt> except
that overflow in the multiplication shall be an error. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
<p>If <i>ptr</i> is a null pointer, <i>realloc</i>() <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;or <i>reallocarray</i>() <img src="../images/opt-end.gif" alt=
"[Option End]" border="0"> &nbsp;shall be equivalent to <a href="../functions/malloc.html"><i>malloc</i>()</a> for the specified
size. Otherwise, if <i>ptr</i> does not match a pointer earlier returned by <a href=
"../functions/aligned_alloc.html"><i>aligned_alloc</i>()</a>, <a href="../functions/calloc.html"><i>calloc</i>()</a>, <a href=
"../functions/malloc.html"><i>malloc</i>()</a>, <sup>[<a href="javascript:open_code('ADV')">ADV</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;<a href=
"../functions/posix_memalign.html"><i>posix_memalign</i>()</a>, <img src="../images/opt-end.gif" alt="[Option End]" border="0">
&nbsp;<a href="../functions/realloc.html"><i>realloc</i>()</a>,<br>
<sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
<i>reallocarray</i>(), or a function in POSIX.1-2024 that allocates memory as if by <a href=
"../functions/malloc.html"><i>malloc</i>()</a>, <img src="../images/opt-end.gif" alt="[Option End]" border="0"> &nbsp;or if the
space has been deallocated by a call to <a href="../functions/free.html"><i>free</i>()</a>, <sup>[<a href=
"javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;<a href=
"../functions/reallocarray.html"><i>reallocarray</i>()</a>, <img src="../images/opt-end.gif" alt="[Option End]" border="0">
&nbsp;or <i>realloc</i>(), &nbsp;the behavior is undefined.</p>
<p>If <i>size</i> is non-zero and memory for the new object is not allocated, the old object shall not be deallocated.</p>
<p>The order and contiguity of storage allocated by successive calls to <i>realloc</i>() <sup>[<a href=
"javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;or
<i>reallocarray</i>() <img src="../images/opt-end.gif" alt="[Option End]" border="0"> &nbsp;is unspecified. The pointer returned if
the allocation succeeds shall be suitably aligned so that it may be assigned to a pointer to any type of object with a fundamental
alignment requirement and then used to access such an object in the space allocated (until the space is explicitly freed or
reallocated). Each such allocation shall yield a pointer to an object disjoint from any other object. The pointer returned shall
point to the start (lowest byte address) of the allocated space. If the space cannot be allocated, a null pointer shall be
returned.</p>
<p>For purposes of determining the existence of a data race, <i>realloc</i>() <sup>[<a href=
"javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;and
<i>reallocarray</i>() <img src="../images/opt-end.gif" alt="[Option End]" border="0"> &nbsp;shall each behave as though it accessed
only memory locations accessible through its argument and not other static duration storage. The function may, however, visibly
modify the storage that it allocates. Calls to <a href="../functions/aligned_alloc.html"><i>aligned_alloc</i>()</a>, <a href=
"../functions/calloc.html"><i>calloc</i>()</a>, <a href="../functions/free.html"><i>free</i>()</a>, <a href=
"../functions/malloc.html"><i>malloc</i>()</a>, <sup>[<a href="javascript:open_code('ADV')">ADV</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;<a href=
"../functions/posix_memalign.html"><i>posix_memalign</i>()</a>, <img src="../images/opt-end.gif" alt="[Option End]" border="0"><br>
<sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
<i>reallocarray</i>(), <img src="../images/opt-end.gif" alt="[Option End]" border="0"> &nbsp;and <i>realloc</i>() that allocate or
deallocate a particular region of memory shall occur in a single total order (see <a href=
"../basedefs/V1_chap04.html#tag_04_15_01"><i>4.15.1 Memory Ordering</i></a>), and each such deallocation call shall synchronize
with the next allocation (if any) in this order.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_04" id="tag_17_480_04"></a>RETURN VALUE</h4>
<blockquote>
<p>Upon successful completion, <i>realloc</i>() <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;and <i>reallocarray</i>() <img src="../images/opt-end.gif" alt=
"[Option End]" border="0"> &nbsp;shall return a pointer to the new object (which can have the same value as a pointer to the old
object), or a null pointer if the new object has not been allocated.</p>
<p><sup>[<a href="javascript:open_code('OB')">OB</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> If
<i>size</i> is 0,<br>
<img src="../images/opt-end.gif" alt="[Option End]" border="0"> <sup>[<a href="javascript:open_code('OB%20CX')">OB CX</a>]</sup>
<img src="../images/opt-start.gif" alt="[Option Start]" border="0"> or either <i>nelem</i> or <i>elsize</i> is 0,<br>
<img src="../images/opt-end.gif" alt="[Option End]" border="0"> <sup>[<a href="javascript:open_code('OB')">OB</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> either: <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"></p>
<ul>
<li>
<p><sup>[<a href="javascript:open_code('OB')">OB</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> A
null pointer shall be returned<br>
<img src="../images/opt-end.gif" alt="[Option End]" border="0"> <sup>[<a href="javascript:open_code('OB%20CX')">OB CX</a>]</sup>
<img src="../images/opt-start.gif" alt="[Option Start]" border="0"> and, if <i>ptr</i> is not a null pointer, <i>errno</i> shall be
set to [EINVAL]. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
</li>
<li>
<p><sup>[<a href="javascript:open_code('OB')">OB</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> A
pointer to the allocated space shall be returned, and the memory object pointed to by <i>ptr</i> shall be freed. The application
shall ensure that the pointer is not used to access an object. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
</li>
</ul>
<p>If there is not enough available memory, <i>realloc</i>() <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;and <i>reallocarray</i>() <img src="../images/opt-end.gif" alt=
"[Option End]" border="0"> &nbsp;shall return a null pointer<br>
<sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> and
set <i>errno</i> to [ENOMEM]. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_05" id="tag_17_480_05"></a>ERRORS</h4>
<blockquote>
<p>The <i>realloc</i>() <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> &nbsp;and <i>reallocarray</i>() <img src="../images/opt-end.gif" alt="[Option End]" border="0">
&nbsp;functions shall fail if:</p>
<dl compact>
<dd></dd>
<dt>[ENOMEM]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
Insufficient memory is available. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
</dl>
<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> The
<i>reallocarray</i>() function shall fail if:</p>
<dl compact>
<dd></dd>
<dt>[ENOMEM]</dt>
<dd>The calculation <i>nelem</i> <tt>*</tt> <i>elsize</i> would overflow.</dd>
</dl>
<img src="../images/opt-end.gif" alt="[Option End]" border="0">
<p>The <i>realloc</i>() <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> &nbsp;and <i>reallocarray</i>() <img src="../images/opt-end.gif" alt="[Option End]" border="0">
&nbsp;functions may fail if:</p>
<dl compact>
<dd></dd>
<dt>[EINVAL]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
The requested allocation size is 0 and the implementation does not support 0 sized allocations. <img src="../images/opt-end.gif"
alt="[Option End]" border="0"></dd>
</dl>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_480_06" id="tag_17_480_06"></a>EXAMPLES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_07" id="tag_17_480_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>The ISO&nbsp;C standard makes it implementation-defined whether a call to <i>realloc</i>(<i>p</i>, 0) frees the space pointed to
by <i>p</i> if it returns a null pointer because memory for the new object was not allocated. POSIX.1 instead requires that
implementations set <i>errno</i> if a null pointer is returned and the space has not been freed, and POSIX applications should only
free the space if <i>errno</i> was changed.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_08" id="tag_17_480_08"></a>RATIONALE</h4>
<blockquote>
<p>See the RATIONALE for <a href="../functions/malloc.html#"><i>malloc</i>()</a>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_09" id="tag_17_480_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>The ISO&nbsp;C standard states that invoking <i>realloc</i>() with a <i>size</i> argument equal to zero is an obsolescent
feature. This feature may be removed in a future version of this standard.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_10" id="tag_17_480_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/aligned_alloc.html#"><i>aligned_alloc</i>()</a>, <a href="../functions/calloc.html#"><i>calloc</i>()</a>
, <a href="../functions/free.html#"><i>free</i>()</a>, <a href="../functions/malloc.html#"><i>malloc</i>()</a></p>
<p>XBD <a href="../basedefs/stdlib.h.html"><i>&lt;stdlib.h&gt;</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_11" id="tag_17_480_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 1. Derived from Issue 1 of the SVID.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_12" id="tag_17_480_12"></a>Issue 6</h4>
<blockquote>
<p>Extensions beyond the ISO&nbsp;C standard are marked.</p>
<p>The following new requirements on POSIX implementations derive from alignment with the Single UNIX Specification:</p>
<ul>
<li>
<p>In the RETURN VALUE section, if there is not enough available memory, the setting of <i>errno</i> to [ENOMEM] is added.</p>
</li>
<li>
<p>The [ENOMEM] error condition is added.</p>
</li>
</ul>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_13" id="tag_17_480_13"></a>Issue 7</h4>
<blockquote>
<p>POSIX.1-2008, Technical Corrigendum 1, XSH/TC1-2008/0495 [400], XSH/TC1-2008/0496 [400], XSH/TC1-2008/0497 [400], and
XSH/TC1-2008/0498 [400] are applied.</p>
<p>POSIX.1-2008, Technical Corrigendum 2, XSH/TC2-2008/0309 [526] and XSH/TC2-2008/0310 [526,688] are applied.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_480_14" id="tag_17_480_14"></a>Issue 8</h4>
<blockquote>
<p>Austin Group Defect 374 is applied, adding the [EINVAL] error.</p>
<p>Austin Group Defect 1218 is applied, adding <i>reallocarray</i>().</p>
<p>Austin Group Defect 1302 is applied, aligning the <i>realloc</i>() function with the ISO/IEC&nbsp;9899:2018 standard.</p>
<p>Austin Group Defect 1387 is applied, changing the RATIONALE section.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/readv.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/realpath.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
