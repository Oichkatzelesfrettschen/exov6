<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>gettext</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../utilities/getopts.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../utilities/grep.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="gettext" id="gettext"></a> <a name="tag_20_54" id="tag_20_54"></a><!-- gettext -->
<h4 class="mansect"><a name="tag_20_54_01" id="tag_20_54_01"></a>NAME</h4>
<blockquote>gettext, ngettext — retrieve text string from messages object</blockquote>
<h4 class="mansect"><a name="tag_20_54_02" id="tag_20_54_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>gettext</tt> <b>[</b><tt>-e|-E</tt><b>] [</b><tt>-d textdomain</tt><b>] [</b><i>textdomain</i><b>]</b> <i>msgid</i> <tt><br>
<br>
gettext</tt> <b>[</b><tt>-e|-E</tt><b>] [</b><tt>-n</tt><b>]</b> <tt>-s</tt> <b>[</b><tt>-d</tt> <i>textdomain</i><b>]</b>
<i>msgid</i><tt>...<br>
<br>
ngettext</tt> <b>[</b><tt>-e|-E</tt><b>] [</b><tt>-d</tt> <i>textdomain</i><b>] [</b><i>textdomain</i><b>]</b> <i>msgid
msgid_plural n</i> <tt><br></tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_03" id="tag_20_54_03"></a>DESCRIPTION</h4>
<blockquote>
<p>The <i>gettext</i> and <i>ngettext</i> utilities shall write to standard output the message string(s) that would result from the
following calls to functions defined in the System Interfaces volume of POSIX.1-2024:</p>
<pre>
<tt>if (textdomainname == NULL || textdomainname[0] == '\0')
    message_string = msgid;
else {
    setlocale(LC_ALL, "");
    if (textdomaindir != NULL)
        bindtextdomain(textdomainname, textdomaindir);
    if (msgid_plural == NULL)
        message_string = dgettext(textdomainname, msgid);
    else
        message_string = dngettext(textdomainname, msgid, msgid_plural, n);
}
</tt></pre>
<p>where:</p>
<ul>
<li>
<p>The <i>textdomaindir</i> variable is a string containing the value of the <i>TEXTDOMAINDIR</i> environment variable, if set and
not empty, or is NULL otherwise.</p>
</li>
<li>
<p>The <i>textdomainname</i> variable is a string containing the text domain name obtained from, in decreasing order of
precedence:</p>
<ul>
<li>
<p>The optional operand <i>textdomain,</i> if present</p>
</li>
<li>
<p>The <b>-d</b> <i>textdomain</i> option, if specified</p>
</li>
<li>
<p>The <i>TEXTDOMAIN</i> environment variable, if set and not empty</p>
</li>
</ul>
<p>If the text domain name cannot be obtained from these sources, the <i>textdomainname</i> variable is NULL.</p>
</li>
<li>
<p>If the <b>-s</b> option of <i>gettext</i> is not specified and for the <i>ngettext</i> utility, the <i>msgid</i> variable is a
string containing:</p>
<ul>
<li>
<p>The value of the <i>msgid</i> operand, if the <b>-E</b> option is specified</p>
</li>
<li>
<p>The value of the <i>msgid</i> operand with C-language escape sequences processed (see below), if the <b>-e</b> option is
specified</p>
</li>
<li>
<p>The value of the <i>msgid</i> operand with C-language escape sequences optionally processed (see below), otherwise</p>
</li>
</ul>
</li>
<li>
<p>If the <b>-s</b> option of <i>gettext</i> is specified, the <i>msgid</i> variable is a string containing:</p>
<ul>
<li>
<p>The value of each <i>msgid</i> operand in turn, if the <b>-E</b> option is specified or neither the <b>-e</b> nor the <b>-E</b>
option is specified</p>
</li>
<li>
<p>The value of each <i>msgid</i> operand in turn with C-language escape sequences processed (see below), if the <b>-e</b> option
is specified</p>
</li>
</ul>
</li>
<li>
<p>For the <i>gettext</i> utility, the <i>msgid_plural</i> variable is NULL. For the <i>ngettext</i> utility, the
<i>msgid_plural</i> variable is a string containing:</p>
<ul>
<li>
<p>The value of the <i>msgid_plural</i> operand, if the <b>-E</b> option is specified</p>
</li>
<li>
<p>The value of the <i>msgid_plural</i> operand with C-language escape sequences processed (see below), if the <b>-e</b> option is
specified</p>
</li>
<li>
<p>The value of the <i>msgid_plural</i> operand with C-language escape sequences optionally processed (see below), otherwise</p>
</li>
</ul>
</li>
<li>
<p>For the <i>gettext</i> utility, the <i>n</i> variable is 1 (one). For the <i>ngettext</i> utility the <i>n</i> variable is the
<i>n</i> operand, parsed as an integer as if by using the <a href="../functions/strtoul.html"><i>strtoul</i>()</a> function with a
<i>base</i> argument of 10.</p>
</li>
</ul>
<p>When C-language escape sequences are processed, they shall be processed as specified for character string literals in the
ISO&nbsp;C standard, except that <i>universal-character-name</i> escape sequences need not be supported. Implementations may also
support a &lt;backslash&gt; <tt>'c'</tt> escape sequence; if supported, the <tt>'\c'</tt> and all characters following it shall be
removed and, if the <b>-s</b> option is specified, the behavior shall be as if the <b>-n</b> option is also specified.</p>
<p>For the <i>ngettext</i> utility, and for the <i>gettext</i> utility if the <b>-s</b> option is not specified, the resulting
message string shall be written to standard output. If the <b>-s</b> option of <i>gettext</i> is specified, the resulting message
string for each <i>msgid</i> shall be written to standard output with consecutive message strings separated by a single
&lt;space&gt; character and, if the <b>-n</b> option is not specified, a &lt;newline&gt; shall be written after the last message
string. If the <b>-s</b> and <b>-n</b> options are specified, the trailing &lt;newline&gt; shall be omitted.</p>
<p>Under conditions where the <i>textdomainname</i> variable in the above code would be NULL, these utilities may write a
diagnostic message to standard error and exit with non-zero status.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_04" id="tag_20_54_04"></a>OPTIONS</h4>
<blockquote>
<p>These utilities shall conform to XBD <a href="../basedefs/V1_chap12.html#tag_12_02"><i>12.2 Utility Syntax Guidelines</i></a>
.</p>
<p>The following options shall be supported:</p>
<dl compact>
<dd></dd>
<dt><b>-d&nbsp;</b><i>textdomain</i></dt>
<dd><br>
Retrieve the translated message from the domain <i>textdomain</i>, if <i>textdomain</i> is not specified as an operand.</dd>
<dt><b>-e</b></dt>
<dd>Process C-language escape sequences in <i>msgid</i> and <i>msgid_plural</i> operands.</dd>
<dt><b>-E</b></dt>
<dd>Do not process C-language escape sequences in <i>msgid</i> and <i>msgid_plural</i> operands.</dd>
</dl>
<p>The <i>gettext</i> utility shall also support the following options:</p>
<dl compact>
<dd></dd>
<dt><b>-n</b></dt>
<dd>Modify the behavior of the <b>-s</b> option such that a &lt;newline&gt; is not appended to the output.</dd>
<dt><b>-s</b></dt>
<dd>Separate the message strings obtained from each <i>msgid</i> operand with &lt;space&gt; characters in the output, and (if
<b>-n</b> is not also specified) append a &lt;newline&gt; to the output.</dd>
</dl>
<p>If neither of the mutually exclusive <b>-e</b> and <b>-E</b> options is specified, it is unspecified which is the default,
except that if the <b>-s</b> option of <i>gettext</i> is specified then <b>-E</b> shall be the default.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_05" id="tag_20_54_05"></a>OPERANDS</h4>
<blockquote>
<p>The following operands shall be supported:</p>
<dl compact>
<dd></dd>
<dt><i>textdomain</i></dt>
<dd>A text domain name used to retrieve the translated message. This shall override the specification by the <b>-d</b> option, if
present.</dd>
<dt><i>msgid</i></dt>
<dd>A key to retrieve the translated message.</dd>
<dt><i>msgid_plural</i></dt>
<dd>A default plural if no corresponding plural message can be found.</dd>
<dt><i>n</i></dt>
<dd>A non-negative decimal integer to be used as the <i>n</i> argument to <a href=
"../functions/dngettext.html"><i>dngettext</i>()</a> (see the DESCRIPTION).</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_06" id="tag_20_54_06"></a>STDIN</h4>
<blockquote>
<p>Not used.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_07" id="tag_20_54_07"></a>INPUT FILES</h4>
<blockquote>
<p>The input files are messages object files (see <a href="../utilities/msgfmt.html#"><i>msgfmt</i></a>).</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_08" id="tag_20_54_08"></a>ENVIRONMENT VARIABLES</h4>
<blockquote>
<p>The following environment variables shall affect the execution of <i>gettext</i> and <i>ngettext</i>:</p>
<dl compact>
<dd></dd>
<dt><i>LANG</i></dt>
<dd>Provide a default value for the internationalization variables that are unset or null. (See XBD <a href=
"../basedefs/V1_chap08.html#tag_08_02"><i>8.2 Internationalization Variables</i></a> for the precedence of internationalization
variables used to determine the values of locale categories.)</dd>
<dt><i>LANGUAGE</i></dt>
<dd>Determine the location of messages objects <sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;if <i>NLSPATH</i> is not set or the evaluation of <i>NLSPATH</i>
did not lead to a suitable messages object being found. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt><i>LC_ALL</i></dt>
<dd>If set to a non-empty string value, override the values of all the other internationalization variables.</dd>
<dt><i>LC_MESSAGES</i></dt>
<dd><br>
Determine the locale name used to locate messages objects, and the locale that should be used to affect the format and contents of
diagnostic messages written to standard error.</dd>
<dt><i>NLSPATH</i></dt>
<dd><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
Determine the location of messages objects and message catalogs. <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"></dd>
<dt><i>TEXTDOMAIN</i></dt>
<dd><br>
Specify the text domain name. (See XBD <a href="../basedefs/V1_chap03.html#tag_03_386"><i>3.386 Text Domain</i></a>.)</dd>
<dt><i>TEXTDOMAINDIR</i></dt>
<dd><br>
Specify the pathname to the messages object hierarchy. <sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> <i>NLSPATH</i> shall have precedence over <i>TEXTDOMAINDIR .</i>
<img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_09" id="tag_20_54_09"></a>ASYNCHRONOUS EVENTS</h4>
<blockquote>
<p>Default.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_10" id="tag_20_54_10"></a>STDOUT</h4>
<blockquote>
<p>See DESCRIPTION.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_11" id="tag_20_54_11"></a>STDERR</h4>
<blockquote>
<p>The standard error shall be used only for diagnostic messages.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_12" id="tag_20_54_12"></a>OUTPUT FILES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_13" id="tag_20_54_13"></a>EXTENDED DESCRIPTION</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_14" id="tag_20_54_14"></a>EXIT STATUS</h4>
<blockquote>
<p>The following exit values shall be returned:</p>
<dl compact>
<dd></dd>
<dt>&nbsp;0</dt>
<dd>Successful completion.</dd>
<dt>&gt;0</dt>
<dd>An error occurred.</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_15" id="tag_20_54_15"></a>CONSEQUENCES OF ERRORS</h4>
<blockquote>
<p>Default.</p>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_20_54_16" id="tag_20_54_16"></a>APPLICATION USAGE</h4>
<blockquote>
<p>Since it is unspecified which of the <b>-e</b> or <b>-E</b> options is the default, except when the <b>-s</b> option of
<i>gettext</i> is specified, portable applications need to ensure that <b>-e</b>, <b>-E</b>, or (for <i>gettext</i>) <b>-s</b> is
specified whenever a <i>msgid</i> or <i>msgid_plural</i> operand contains, or might contain, a &lt;backslash&gt; character.</p>
<p>Note that, unless the <b>-s</b> option of <i>gettext</i> is specified without <b>-n</b>, the message(s) written to standard
output are not followed by a &lt;newline&gt;. (Therefore the output only ends with a &lt;newline&gt; if the last message ends with
one.)</p>
<p>Both <i>msgid</i> and <i>msgid_plural</i> should be properly quoted for the shell.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_17" id="tag_20_54_17"></a>EXAMPLES</h4>
<blockquote>
<p>The following examples assume that the following portable messages object source file (dot-po file) has been compiled to a valid
file <b>mail.mo</b> by the <a href="../utilities/msgfmt.html"><i>msgfmt</i></a> utility. See the EXTENDED DESCRIPTION section of
the <a href="../utilities/msgfmt.html"><i>msgfmt</i></a> utility for a description of the dot-po file format.</p>
<pre>
<tt>msgid ""
msgstr ""
"Content-Type: text/plain; charset=utf-8\n"
"Plural-Forms: nplurals=4; plural=n==1?0: (n&gt;1&amp;&amp;n&lt;=10)?1: (n==0)?2:3;\n"
<br>
msgid "recipient"
msgid_plural "recipients"
msgstr[0] "1 recipient"
msgstr[1] "2 to 10 recipients"
msgstr[2] "no recipients"
msgstr[3] "more than 10 recipients"
<br>
msgid "%d attachment\n"
msgid_plural "%d attachments\n"
msgstr[0] "1 (%d) attachment\n"
msgstr[1] "2 to 10 (%d) attachments\n"
msgstr[2] "no (%d) attachments\n"
msgstr[3] "more than 10 (%d) attachments\n"
</tt></pre>
<p>They also assume that <b>mail.mo</b> is installed in the directory that <i>gettext</i> and <i>ngettext</i> search for the
current locale. See the OPTIONS and ENVIRONMENT VARIABLES sections above and the description of <a href=
"../functions/gettext.html"><i>gettext</i>()</a> for details on how this search is performed.</p>
<p>The command</p>
<pre>
<tt>ngettext -d mail recipient recipients 0
</tt></pre>
<p>will write <tt>"no recipients"</tt>.</p>
<p>The command</p>
<pre>
<tt>ngettext -d mail recipient recipients 1
</tt></pre>
<p>will write <tt>"1 recipient"</tt>.</p>
<p>The command</p>
<pre>
<tt>ngettext -d mail recipient recipients 5
</tt></pre>
<p>will write <tt>"2 to 10 recipients"</tt>.</p>
<p>The command</p>
<pre>
<tt>ngettext -d mail recipient recipients 11
</tt></pre>
<p>will write <tt>"more than 10 recipients"</tt>.</p>
<p>The command</p>
<pre>
<tt>ngettext -d mail Call Calls 1
</tt></pre>
<p>will write <tt>"Call"</tt>. Note that <tt>"Call"</tt> is not in the messages object.</p>
<p>The command</p>
<pre>
<tt>ngettext -d mail Call Calls 0
</tt></pre>
<p>will write <tt>"Calls"</tt>.</p>
<p>The command</p>
<pre>
<tt>ngettext -d mail Call Calls 10
</tt></pre>
<p>will write <tt>"Calls"</tt>.</p>
<p>The command</p>
<pre>
<tt>ngettext -ed mail "%d attachment\n" "%d attachments\n" 1
</tt></pre>
<p>will write the same as</p>
<pre>
<tt>printf "1 (%%d) attachment\n"
</tt></pre>
<p>(i.e. <tt>"1 (%d) attachment"</tt> followed by a &lt;newline&gt; character). The output of <i>ngettext</i> can be used as a
format string for <a href="../utilities/printf.html"><i>printf</i></a>.</p>
<p>The command</p>
<pre>
<tt>printf "$(ngettext -ed mail "%d attachment\n" "%d attachments\n" 1)" 10
</tt></pre>
<p>will write the same as</p>
<pre>
<tt>printf "1 (%d) attachment\n" 10
</tt></pre>
<p>(i.e. <tt>"1 (10) attachment"</tt> followed by a &lt;newline&gt; character).</p>
<p>The command</p>
<pre>
<tt>ngettext -e -d mail "\tsubject\n" "\tsubjects\n" 0
</tt></pre>
<p>will write the same as</p>
<pre>
<tt>printf "\tsubjects\n"
</tt></pre>
<p>(i.e. a &lt;tab&gt; character, followed by <tt>"subjects"</tt> followed by a &lt;newline&gt; character). Note that
<tt>"\tsubject\n"</tt> is not in the messages object.</p>
<p>The command</p>
<pre>
<tt>printf "%s\n" "$(ngettext -E -d mail "subject" "subjects" 0)"
</tt></pre>
<p>will write the same as</p>
<pre>
<tt>printf "subjects\n"
</tt></pre>
<p>(i.e. <tt>"subjects"</tt> followed by a &lt;newline&gt; character). Note that <tt>"subject"</tt> is not in the messages
object.</p>
<p>The command</p>
<pre>
<tt>gettext -s -d mail "recipient"
</tt></pre>
<p>will write <tt>"1 recipient"</tt> followed by a &lt;newline&gt; character.</p>
<p>The command</p>
<pre>
<tt>gettext -s -n -d mail "recipient"
</tt></pre>
<p>will write <tt>"1 recipient"</tt> without a &lt;newline&gt; character.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_18" id="tag_20_54_18"></a>RATIONALE</h4>
<blockquote>
<p>Historical implementations did not support the <tt>'\a'</tt> C-language escape sequence. This standard requires it to be
supported for consistency with other utilities that support the table in XBD <a href="../basedefs/V1_chap05.html#tag_05"><i>5. File
Format Notation</i></a>.</p>
<p>Unlike other standard utilities, the behavior of <i>gettext</i> and <i>ngettext</i> is not undefined when <i>NLSPATH</i>
overrides the system default path; see XBD <a href="../basedefs/V1_chap08.html#tag_08_02"><i>8.2 Internationalization
Variables</i></a>. This is so that applications can use these utilities to obtain message strings from messages objects in other
locations. However, it also means that they need to be implemented in such a way that they do not do anything that would result in
undefined behavior when they need to write a diagnostic message. In particular, they should not use a string obtained from a
message catalog or a messages object as a format string (or should only do so after checking that the string contains the correct
conversions).</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_19" id="tag_20_54_19"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_20" id="tag_20_54_20"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../utilities/msgfmt.html#"><i>msgfmt</i></a>, <a href="../utilities/printf.html#tag_20_96"><i>printf</i></a></p>
<p>XBD <a href="../basedefs/V1_chap07.html#tag_07"><i>7. Locale</i></a>, <a href="../basedefs/V1_chap08.html#tag_08"><i>8.
Environment Variables</i></a>, <a href="../basedefs/V1_chap12.html#tag_12_02"><i>12.2 Utility Syntax Guidelines</i></a></p>
<p>XSH <a href="../functions/gettext.html#tag_17_238"><i>gettext</i>()</a>, <a href=
"../functions/iconv.html#tag_17_248"><i>iconv</i>()</a>, <a href="../functions/setlocale.html#"><i>setlocale</i>()</a></p>
</blockquote>
<h4 class="mansect"><a name="tag_20_54_21" id="tag_20_54_21"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 8.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../utilities/getopts.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../utilities/grep.html" accesskey="N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
