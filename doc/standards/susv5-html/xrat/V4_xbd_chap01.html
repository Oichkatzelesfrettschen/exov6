<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>Rationale for Base Definitions</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../utilities/zcat.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../xrat/V4_xsh_chap01.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a>
<h2><a name="tag_21" id="tag_21"></a>A. Rationale for Base Definitions</h2>
<h3><a name="tag_21_01" id="tag_21_01"></a>A.1 Introduction</h3>
<h4><a name="tag_21_01_01" id="tag_21_01_01"></a>A.1.1 Scope</h4>
<p>POSIX.1-2024 is one of a family of standards known as POSIX. The family of standards extends to many topics; POSIX.1 consists of
both operating system interfaces and shell and utilities. POSIX.1-2024 is technically identical to The Open Group Base
Specifications, Issue 8.</p>
<h5><a name="tag_21_01_01_01" id="tag_21_01_01_01"></a>Scope of POSIX.1-2024</h5>
<p>The (paraphrased) goals of this development were to revise the single document that is ISO/IEC 9945:2009 Parts 1 through 4 as
amended by ISO/IEC 9945:2009/Cor.1:2013 and ISO/IEC 9945:2009/Cor.2:2017, IEEE Std 1003.1-2017, and the appropriate parts of The
Open Group Single UNIX Specification, Version 5. This work has been undertaken by the Austin Group, a joint working group of IEEE,
The Open Group, and ISO/IEC JTC 1/SC 22.</p>
<p>The following are the base documents in this version:</p>
<ul>
<li>
<p>IEEE Std 1003.1-2017</p>
</li>
<li>
<p>IEEE Std 1003.26-2003</p>
</li>
<li>
<p>ISO/IEC 9899:2018, Programming Languages — C</p>
</li>
</ul>
<p>This version has addressed the following areas:</p>
<ul>
<li>
<p>Issues raised by Austin Group defect reports, IEEE Interpretations against IEEE Std 1003.1, and ISO/IEC defect reports against
ISO/IEC 9945</p>
<p>The repository of interpretations can be accessed at <a href=
"http://www.opengroup.org/austin/interps">www.opengroup.org/austin/interps</a>.</p>
</li>
<li>
<p>Issues raised in corrigenda for The Open Group Standards and working group resolutions from The Open Group</p>
</li>
<li>
<p>Changes to make the text self-consistent with the additional material merged</p>
<p>A list of the new interfaces is included in <a href="../xrat/V4_xsh_chap01.html#tag_22_01_01"><i>B.1.1 Change History</i></a>
.</p>
</li>
<li>
<p>Features, marked obsolescent in the base documents, have been considered for removal in this version</p>
<p>See <a href="../xrat/V4_xsh_chap01.html#tag_22_01_01"><i>B.1.1 Change History</i></a> and <a href=
"../xrat/V4_xcu_chap01.html#tag_23_01_01"><i>C.1.1 Change History</i></a>.</p>
</li>
<li>
<p>Alignment with the ISO/IEC 9899:2018 standard</p>
</li>
</ul>
<p>The following were requirements on POSIX.1-2024:</p>
<ul>
<li>
<p>Backward-compatibility</p>
<p>For interfaces carried forward, it was agreed that there should be no breakage of functionality in the existing base documents.
All strictly conforming applications will be conforming but not necessarily strictly conforming to the revised standard. The goal
is for system implementations to be able to support the existing and revised standards simultaneously.</p>
</li>
<li>
<p>Architecture and <i>n</i>-bit-neutral</p>
<p>The common standard should not make any implicit assumptions about the system architecture or size of data types; for example,
previously some 32-bit implicit assumptions had crept into the standards.</p>
</li>
<li>
<p>Extensibility</p>
<p>It should be possible to extend the common standard without breaking backwards-compatibility; for example, the name space should
be reserved and structured to avoid duplication of names between the standard and extensions to it.</p>
</li>
</ul>
<h5><a name="tag_21_01_01_02" id="tag_21_01_01_02"></a>POSIX.1 and the ISO C Standard</h5>
<p>The standard developers believed it essential for a programmer to have a single complete reference place, but recognized that
deference to the formal standard has to be addressed for the duplicate interface definitions between the ISO&nbsp;C standard and
POSIX.1-2024.</p>
<p>Where an interface has a version in the ISO&nbsp;C standard, the DESCRIPTION section describes the relationship to the
ISO&nbsp;C standard and markings are included as appropriate to show where the ISO&nbsp;C standard has been extended in the
text.</p>
<p>A block of text is included at the start of each affected reference page stating whether the page is aligned with the ISO&nbsp;C
standard or extended. Each page has been parsed for additions beyond the ISO&nbsp;C standard (that is, including both POSIX and
UNIX extensions), and these extensions are marked as CX extensions (for C extensions).</p>
<h5><a name="tag_21_01_01_03" id="tag_21_01_01_03"></a>FIPS Requirements</h5>
<p>The Federal Information Processing Standards (FIPS) are a series of US government procurement standards managed and maintained
on behalf of the US Department of Commerce by the National Institute of Standards and Technology (NIST).</p>
<p>The following restrictions were integrated into IEEE&nbsp;Std&nbsp;1003.1-2001. They originally came from FIPS 151-2 which was
withdrawn by NIST on February 25 2000.</p>
<ul>
<li>
<p>The implementation supports _POSIX_CHOWN_RESTRICTED.</p>
</li>
<li>
<p>The limit {NGROUPS_MAX} is greater than or equal to 8.</p>
</li>
<li>
<p>The implementation supports the setting of the group ID of a file (when it is created) to that of the parent directory.</p>
</li>
<li>
<p>The implementation supports _POSIX_SAVED_IDS.</p>
</li>
<li>
<p>The implementation supports _POSIX_VDISABLE.</p>
</li>
<li>
<p>The implementation supports _POSIX_JOB_CONTROL.</p>
</li>
<li>
<p>The implementation supports _POSIX_NO_TRUNC.</p>
</li>
<li>
<p>The <a href="../functions/read.html"><i>read</i>()</a> function returns the number of bytes read when interrupted by a signal
and does not return -1.</p>
</li>
<li>
<p>The <a href="../functions/write.html"><i>write</i>()</a> function returns the number of bytes written when interrupted by a
signal and does not return -1.</p>
</li>
<li>
<p>In the environment for the login shell, the environment variables <i>LOGNAME</i> and <i>HOME</i> are defined and have the
properties described in POSIX.1-2024.</p>
</li>
<li>
<p>The value of {CHILD_MAX} is greater than or equal to 25.</p>
</li>
<li>
<p>The value of {OPEN_MAX} is greater than or equal to 20.</p>
</li>
<li>
<p>The implementation supports the functionality associated with the symbols CS7, CS8, CSTOPB, PARODD, and PARENB defined in
<a href="../basedefs/termios.h.html"><i>&lt;termios.h&gt;</i></a>.</p>
</li>
</ul>
<h4><a name="tag_21_01_02" id="tag_21_01_02"></a>A.1.2 Word Usage</h4>
The content of this section is mandated by IEEE and consequently it cannot be combined with the &quot;Terminology&quot; section.
<p>Note that where the footnotes state that &quot;must&quot; is used only to describe unavoidable situations and &quot;will&quot; is only used in
statements of fact, they are referring to uses of these words in normative text. In informative text, they are used in other ways
with their usual dictionary meanings.</p>
<h4><a name="tag_21_01_03" id="tag_21_01_03"></a>A.1.3 Conformance</h4>
<p>See <a href="#tag_21_02">A.2 Conformance</a>.</p>
<h4><a name="tag_21_01_04" id="tag_21_01_04"></a>A.1.4 Normative References</h4>
<p>There is no additional rationale provided for this section.</p>
<h4><a name="tag_21_01_05" id="tag_21_01_05"></a>A.1.5 Change History</h4>
<p>For Issue 7 onwards, in references to Technical Corrigenda, the original Austin Group defect report numbers that gave rise to
the change are included in square brackets after the change number from the Technical Corrigendum. For more information on Austin
Group defect reports see <a href=
"http://www.opengroup.org/austin/defectform.html">www.opengroup.org/austin/defectform.html</a>.</p>
<h4><a name="tag_21_01_06" id="tag_21_01_06"></a>A.1.6 Terminology</h4>
<p>The meanings specified in POSIX.1-2024 for the words <i>shall</i>, <i>should</i>, and <i>may</i> are mandated by ISO/IEC
directives.</p>
<p>In the Rationale (Informative) volume of POSIX.1-2024, the words <i>shall</i>, <i>should</i>, and <i>may</i> are sometimes used
to illustrate similar usages in POSIX.1-2024. However, the rationale itself does not specify anything regarding implementations or
applications.</p>
<h4 class="term"><a name="tag_21_01_07" id="tag_21_01_07"></a>conformance document</h4>
<p>As a practical matter, the conformance document is effectively part of the system documentation. Conformance documents are
distinguished by POSIX.1-2024 so that they can be referred to distinctly.</p>
<h4 class="term"><a name="tag_21_01_08" id="tag_21_01_08"></a>implementation-defined</h4>
<p>This definition is analogous to that of the ISO&nbsp;C standard and, together with &quot;undefined&quot; and &quot;unspecified&quot;, provides a
range of specification of freedom allowed to the interface implementor.</p>
<h4 class="term"><a name="tag_21_01_09" id="tag_21_01_09"></a>may</h4>
<p>The use of <i>may</i> has been limited as much as possible, due both to confusion stemming from its ordinary English meaning and
to objections regarding the desirability of having as few options as possible and those as clearly specified as possible.</p>
<p>The usage of <i>can</i> and <i>may</i> were selected to contrast optional application behavior (can) against optional
implementation behavior (may).</p>
<h4 class="term"><a name="tag_21_01_10" id="tag_21_01_10"></a>shall</h4>
<p>Declarative sentences are sometimes used in POSIX.1-2024 as if they included the word <i>shall</i>, and facilities thus
specified are no less required. For example, the two statements:</p>
<ol>
<li>
<p>The <i>foo</i>() function shall return zero.</p>
</li>
<li>
<p>The <i>foo</i>() function returns zero.</p>
</li>
</ol>
<p>are meant to be exactly equivalent.</p>
<h4 class="term"><a name="tag_21_01_11" id="tag_21_01_11"></a>should</h4>
<p>In POSIX.1-2024, the word <i>should</i> does not usually apply to the implementation, but rather to the application. Thus, the
important words regarding implementations are <i>shall</i>, which indicates requirements, and <i>may</i>, which indicates
options.</p>
<h4 class="term"><a name="tag_21_01_12" id="tag_21_01_12"></a>obsolescent</h4>
<p>The term &quot;obsolescent&quot; means &quot;do not use this feature in new applications&quot;. A feature noted as obsolescent is supported by
all implementations, but may be removed in a future version; new applications should not use these features. The obsolescence
concept is not an ideal solution, but was used as a method of increasing consensus: many more objections would be heard from the
user community if some of these historical features were suddenly removed without the grace period obsolescence implies. The phrase
&quot;may be removed in a future version&quot; implies that the result of that consideration might in fact keep those features indefinitely
if the predominance of applications do not migrate away from them quickly.</p>
<h4 class="term"><a name="tag_21_01_13" id="tag_21_01_13"></a>legacy</h4>
<p>The term &quot;legacy&quot; was included in earlier versions of this standard but is no longer used in the current version.</p>
<h4 class="term"><a name="tag_21_01_14" id="tag_21_01_14"></a>system documentation</h4>
<p>The system documentation should normally describe the whole of the implementation, including any extensions provided by the
implementation. Such documents normally contain information at least as detailed as the specifications in POSIX.1-2024. Few
requirements are made on the system documentation, but the term is needed to avoid a dangling pointer where the conformance
document is permitted to point to the system documentation.</p>
<h4 class="term"><a name="tag_21_01_15" id="tag_21_01_15"></a>undefined</h4>
<p>See <i>implementation-defined</i>.</p>
<h4 class="term"><a name="tag_21_01_16" id="tag_21_01_16"></a>unspecified</h4>
<p>See <i>implementation-defined</i>.</p>
<p>The definitions for &quot;unspecified&quot; and &quot;undefined&quot; appear nearly identical at first examination, but are not. The term
&quot;unspecified&quot; means that a conforming application may deal with the unspecified behavior, and it should not care what the outcome
is. The term &quot;undefined&quot; says that a conforming application should not do it because no definition is provided for what it does
(and implicitly it would care what the outcome was if it tried it). It is important to remember, however, that if the syntax
permits the statement at all, it must have some outcome in a real implementation.</p>
<p>Thus, the terms &quot;undefined&quot; and &quot;unspecified&quot; apply to the way the application should think about the feature. In terms of
the implementation, it is always &quot;defined&quot;—there is always some result, even if it is an error. The implementation is free to
choose the behavior it prefers.</p>
<p>This also implies that an implementation, or another standard, could specify or define the result in a useful fashion. The terms
apply to POSIX.1-2024 specifically.</p>
<p>The term &quot;implementation-defined&quot; implies requirements for documentation that are not required for &quot;undefined&quot; (or
&quot;unspecified&quot;). Where there is no need for a conforming program to know the definition, the term &quot;undefined&quot; is used, even
though &quot;implementation-defined&quot; could also have been used in this context. There could be a fourth term, specifying &quot;this
standard does not say what this does; it is acceptable to define it in an implementation, but it does not need to be documented&quot;,
and undefined would then be used very rarely for the few things for which any definition is not useful. In particular,
implementation-defined is used where it is believed that certain classes of application will need to know such details to determine
whether the application can be successfully ported to the implementation. Such applications are not always strictly portable, but
nevertheless are common and useful; often the requirements met by the application cannot be met without dealing with the issues
implied by &quot;implementation-defined&quot;. In some places the text refers to facilities supplied by the implementation that are outside
the standard as implementation-supplied or implementation-provided. This is not intended to imply a requirement for documentation.
If it were, the term &quot;implementation-defined&quot; would have been used.</p>
<p>In many places POSIX.1-2024 is silent about the behavior of some possible construct. For example, a variable may be defined for
a specified range of values and behaviors are described for those values; nothing is said about what happens if the variable has
any other value. That kind of silence can imply an error in the standard, but it may also imply that the standard was intentionally
silent and that any behavior is permitted. There is a natural tendency to infer that if the standard is silent, a behavior is
prohibited. That is not the intent. Silence is intended to be equivalent to the term &quot;unspecified&quot;.</p>
<p>Three terms used within POSIX.1-2024 overlap in meaning: &quot;macro&quot;, &quot;symbolic name&quot;, and &quot;symbolic constant&quot;.</p>
<h4 class="term"><a name="tag_21_01_17" id="tag_21_01_17"></a>macro</h4>
<p>This usually describes a C preprocessor symbol, the result of the <b>#define</b> operator, with or without an argument. It may
also be used to describe similar mechanisms in editors and text processors.</p>
<h4 class="term"><a name="tag_21_01_18" id="tag_21_01_18"></a>symbolic name</h4>
<p>In earlier versions of this standard this was also sometimes used to refer to a C preprocessor symbol (without arguments), but
the intention is for all such uses to have been removed. It is now mainly used to refer to the names for characters in character
sets, but is sometimes used to refer to host names and even filenames.</p>
<h4 class="term"><a name="tag_21_01_19" id="tag_21_01_19"></a>symbolic constant</h4>
<p>This also refers to a C preprocessor symbol, with specific associated requirements. See the definition in <a href=
"../basedefs/V1_chap03.html#tag_03_363"><i>3.363 Symbolic Constant</i></a>.</p>
<h4><a name="tag_21_01_20" id="tag_21_01_20"></a>A.1.7 Definitions and Concepts</h4>
<p>There is no additional rationale provided for this section.</p>
<h4><a name="tag_21_01_21" id="tag_21_01_21"></a>A.1.8 Portability</h4>
<p>To aid the identification of options within POSIX.1-2024, a notation consisting of margin codes and shading is used. This is
based on the notation used in earlier versions of The Open Group Base specifications.</p>
<p>The benefit of this approach is a reduction in the number of <i>if</i> statements within the running text, that makes the text
easier to read, and also an identification to the programmer that they need to ensure that their target platforms support the
underlying options. For example, if functionality is marked with RPP in the margin, it will be available on all systems supporting
the Robust Mutex Priority Protection option, but may not be available on some others.</p>
<h5 class="header4"><a name="tag_21_01_21_01" id="tag_21_01_21_01"></a>A.1.8.1 Codes</h5>
<p>This section includes codes for options defined in XBD <a href="../basedefs/V1_chap02.html#tag_02_01_06"><i>2.1.6
Options</i></a>, and the following additional codes for other purposes:</p>
<dl compact>
<dd></dd>
<dt>CX</dt>
<dd>This margin code is used to denote extensions beyond and, in exceptional cases, deviations from the ISO&nbsp;C standard. For
interfaces that are duplicated between POSIX.1-2024 and the ISO&nbsp;C standard, a CX introduction block describes the nature of
the duplication, with any extensions or deviations appropriately CX marked and shaded. Where deviations exist, the reasons for them
are explained in the RATIONALE section of the affected interface. Deviations have become necessary because there is no longer any
formal way for ISO to acknowledge defects in the ISO&nbsp;C standard. For the original C90 standard and the C99 revision, defect
reports (DRs) were issued, but there is no equivalent mechanism for the current revision. Even if the defect is corrected in a
later revision, without stating deviations POSIX.1-2024 would continue to require the incorrect behavior described in the version
of the ISO&nbsp;C standard that it references.
<p>Where an interface is added to an ISO&nbsp;C standard header, within the header the interface has an appropriate margin marker
and shading (for example, CX, XSI, TSF, and so on) and the same marking appears on the reference page in the SYNOPSIS section. This
enables a programmer to easily identify that the interface is extending an ISO&nbsp;C standard header.</p>
<p>Austin Group Defect 1755 is applied, changing the CX code description to include intentional conflicts (deviations).</p>
</dd>
<dt>MX and MXX</dt>
<dd><br>
These two margin codes both relate to the IEC 60559 Floating-Point option. The MX code denotes functionality that is mandated by
the ISO&nbsp;C standard for IEC 60559 implementations; the MXX code denotes IEC 60559 functionality that is an extension to the
ISO&nbsp;C standard.</dd>
<dt>MXC</dt>
<dd>This margin code is used to denote functionality related to the IEC 60559 Complex Floating-Point option.</dd>
<dt>OB</dt>
<dd>This margin code is used to denote obsolescent behavior and thus flag a possible future applications portability warning.</dd>
<dt>OH</dt>
<dd>The Single UNIX Specification has historically tried to reduce the number of headers an application has had to include when
using a particular interface. Sometimes this was fewer than the base standard, and hence a notation is used to flag which headers
are optional if you are using a system supporting the XSI option.</dd>
</dl>
<p>POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0001 [591] is applied.</p>
<h5 class="header4"><a name="tag_21_01_21_02" id="tag_21_01_21_02"></a>A.1.8.2 Margin Code Notation</h5>
<p>Since some features may depend on one or more options, or require more than one option, a notation is used. Where a feature
requires support of a single option, a single margin code will occur in the margin. If it depends on two options and both are
required, then the codes will appear with a &lt;space&gt; separator. If either of two options are required, then a logical OR is
denoted using the <tt>'|'</tt> symbol. If more than two codes are used, a special notation is used.</p>
<h3><a name="tag_21_02" id="tag_21_02"></a>A.2 Conformance</h3>
<p>The terms &quot;profile&quot; and &quot;profiling&quot; are used throughout this section.</p>
<p>A profile of a standard or standards is a codified set of option selections, such that by being conformant to a profile,
particular classes of users are specifically supported.</p>
<h4><a name="tag_21_02_01" id="tag_21_02_01"></a>A.2.1 Implementation Conformance</h4>
<p>These definitions allow application developers to know what to depend on in an implementation.</p>
<p>There is no definition of a &quot;strictly conforming implementation&quot;; that would be an implementation that provides <i>only</i>
those facilities specified by POSIX.1 with no extensions whatsoever. This is because no actual operating system implementation can
exist without system administration and initialization facilities that are beyond the scope of POSIX.1.</p>
<h5 class="header4"><a name="tag_21_02_01_01" id="tag_21_02_01_01"></a>A.2.1.1 Requirements</h5>
<p>The word &quot;support&quot; is used in certain instances, rather than &quot;provide&quot;, in order to allow an implementation that has no
resident software development facilities, but that supports the execution of a <i>Strictly Conforming POSIX.1 Application</i>, to
be a <i>conforming implementation</i>.</p>
<p>POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0002 [810] is applied.</p>
<h5 class="header4"><a name="tag_21_02_01_02" id="tag_21_02_01_02"></a>A.2.1.2 Documentation</h5>
<p>The conformance documentation is required to use the same numbering scheme as POSIX.1 for purposes of cross-referencing. All
options that an implementation chooses are reflected in <a href="../basedefs/limits.h.html"><i>&lt;limits.h&gt;</i></a> and
<a href="../basedefs/unistd.h.html"><i>&lt;unistd.h&gt;</i></a>.</p>
<p>Note that the use of &quot;may&quot; in terms of where conformance documents record where implementations may vary, implies that it is
not required to describe those features identified as undefined or unspecified.</p>
<p>Other aspects of systems must be evaluated by purchasers for suitability. Many systems incorporate buffering facilities,
maintaining updated data in volatile storage and transferring such updates to non-volatile storage asynchronously. Various
exception conditions, such as a power failure or a system crash, can cause this data to be lost. The data may be associated with a
file that is still open, with one that has been closed, with a directory, or with any other internal system data structures
associated with permanent storage. This data can be lost, in whole or part, so that only careful inspection of file contents could
determine that an update did not occur.</p>
<p>Also, interrelated file activities, where multiple files and/or directories are updated, or where space is allocated or released
in the file system structures, can leave inconsistencies in the relationship between data in the various files and directories, or
in the file system itself. Such inconsistencies can break applications that expect updates to occur in a specific sequence, so that
updates in one place correspond with related updates in another place.</p>
<p>For example, if a user creates a file, places information in the file, and then records this action in another file, a system or
power failure at this point followed by restart may result in a state in which the record of the action is permanently recorded,
but the file created (or some of its information) has been lost. The consequences of this to the user may be undesirable. For a
user on such a system, the only safe action may be to require the system administrator to have a policy that requires, after any
system or power failure, that the entire file system must be restored from the most recent backup copy (causing all intervening
work to be lost).</p>
<p>The characteristics of each implementation will vary in this respect and may or may not meet the requirements of a given
application or user. Enforcement of such requirements is beyond the scope of POSIX.1. It is up to the purchaser to determine what
facilities are provided in an implementation that affect the exposure to possible data or sequence loss, and also what underlying
implementation techniques and/or facilities are provided that reduce or limit such loss or its consequences.</p>
<h5 class="header4"><a name="tag_21_02_01_03" id="tag_21_02_01_03"></a>A.2.1.3 POSIX Conformance</h5>
<p>This really means conformance to the base standard; however, since this document includes the core material of the Single UNIX
Specification, the standard developers decided that it was appropriate to segment the conformance requirements into two, the former
for the base standard, and the latter for the Single UNIX Specification (denoted XSI Conformance).</p>
<p>Within POSIX.1 there are some symbolic constants that, if defined to a certain value or range of values, indicate that a certain
option is enabled. Other symbolic constants exist in POSIX.1 for other reasons.</p>
<p>In this version, some features that were previously optional have been made mandatory. For backwards compatibility, the symbolic
constants associated with the option are still required now with fixed allowable ranges or values. The following options from
previous versions of this standard are now mandatory:</p>
<blockquote>
<pre>
_POSIX_ASYNCHRONOUS_IO

_POSIX_BARRIERS

_POSIX_CLOCK_SELECTION

_POSIX_MAPPED_FILES

_POSIX_MEMORY_PROTECTION

_POSIX_MONOTONIC_CLOCK

_POSIX_READER_WRITER_LOCKS

_POSIX_REALTIME_SIGNALS

_POSIX_SEMAPHORES

_POSIX_SPIN_LOCKS

_POSIX_THREAD_SAFE_FUNCTIONS

_POSIX_THREADS

_POSIX_TIMEOUTS

_POSIX_TIMERS

</pre></blockquote>
<p>A POSIX-conformant system may support the XSI option required by the Single UNIX Specification. This was intentional since the
standard developers intend them to be upwards-compatible, so that a system conforming to the Single UNIX Specification can also
conform to the base standard at the same time.</p>
<p>POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0003 [637] is applied.</p>
<p>Austin Group Defect 729 is applied, adding _POSIX_DEVICE_CONTROL.</p>
<p>Austin Group Defect 1346 is applied, requiring support for Monotonic Clock.</p>
<h5 class="header4"><a name="tag_21_02_01_04" id="tag_21_02_01_04"></a>A.2.1.4 XSI Conformance</h5>
<p>This section is included to describe the conformance requirements for the base volumes of the Single UNIX Specification.</p>
<p>XSI conformance can be thought of as a profile, selecting certain options from POSIX.1-2024.</p>
<h5 class="header4"><a name="tag_21_02_01_05" id="tag_21_02_01_05"></a>A.2.1.5 Option Groups</h5>
<p>The concept of &quot;Option Groups&quot; is included to allow collections of related functions or options to be grouped together. This
has been used as follows: the &quot;XSI Option Groups&quot; have been created to allow super-options, collections of underlying options and
related functions, to be collectively supported by XSI-conforming systems.</p>
<p>The standard developers considered the matter of subprofiling and decided it was better to include an enabling mechanism rather
than detailed normative requirements. A set of subprofiling options was developed and included later in this volume of POSIX.1-2024
as an informative illustration.</p>
<h5><a name="tag_21_02_01_06" id="tag_21_02_01_06"></a>Subprofiling Considerations</h5>
<p>The goal of not simultaneously fixing maximums and minimums was to allow implementations of the base standard or standards to
support multiple profiles without conflict.<br></p>
<p>The following summarizes the rules for the limit types:</p>
<center>
<table border="1" cellpadding="3" align="center">
<tr valign="top">
<th align="center">
<p class="tent"><b>Limit Type</b></p>
</th>
<th align="center">
<p class="tent"><b>Fixed Value</b></p>
</th>
<th align="center">
<p class="tent"><b>Minimum Acceptable Value</b></p>
</th>
<th align="center">
<p class="tent"><b>Maximum Acceptable Value</b></p>
</th>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">Standard</p>
</td>
<td align="center">
<p class="tent"><i>Xs</i></p>
</td>
<td align="center">
<p class="tent"><i>Ys</i></p>
</td>
<td align="center">
<p class="tent"><i>Zs</i></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">Profile</p>
</td>
<td align="center">
<p class="tent"><i>Xp</i> == <i>Xs</i></p>
</td>
<td align="center">
<p class="tent"><i>Yp</i> &gt;= <i>Ys</i></p>
</td>
<td align="center">
<p class="tent"><i>Zp</i> &lt;= <i>Zs</i></p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">&nbsp;</p>
</td>
<td align="center">
<p class="tent">(No change)</p>
</td>
<td align="center">
<p class="tent">(May increase the limit)</p>
</td>
<td align="center">
<p class="tent">(May decrease the limit)</p>
</td>
</tr>
</table>
</center>
<p class="tent">The intent is that ranges specified by limits in profiles be entirely contained within the corresponding ranges of
the base standard or standards being profiled, and that the unlimited end of a range in a base standard must remain unlimited in
any profile of that standard.</p>
<p class="tent">Thus, the fixed _POSIX_* limits are constants and must not be changed by a profile. The variable counterparts
(typically without the leading _POSIX_) can be changed but still remain semantically the same; that is, they still allow
implementation values to vary as long as they meet the requirements for that value (be it a minimum or maximum).</p>
<p class="tent">Where a profile does not provide a feature upon which a limit is based, the limit is not relevant. Applications
written to that profile should be written to operate independently of the value of the limit.</p>
<p class="tent">An example which has previously allowed implementations to support both the base standard and two other profiles in
a compatible manner follows:</p>
<pre>
<tt>Base standard (POSIX.1-1996): _POSIX_CHILD_MAX 6
Base standard: CHILD_MAX   minimum maximum _POSIX_CHILD_MAX
    FIPS profile/SUSv2  CHILD_MAX   25 (minimum maximum)
</tt></pre>
<p class="tent">Another example:</p>
<pre>
<tt>Base standard (POSIX.1-1996): _POSIX_NGROUPS_MAX 0
Base standard: NGROUPS_MAX   minimum maximum _POSIX_NGROUP_MAX
    FIPS profile/SUSv2  NGROUPS_MAX   8
</tt></pre>
<p class="tent">A profile may lower a minimum maximum below the equivalent _POSIX value:</p>
<pre>
<tt>Base standard: _POSIX_foo_MAX   Z
Base standard: foo_MAX   _POSIX_foo_MAX
    profile standard : foo_MAX   X  (X can be less than, equal to,
                                    or greater than  _POSIX_foo_MAX)
</tt></pre>
<p class="tent">In this case an implementation conforming to the profile may not conform to the base standard, but an
implementation to the base standard will conform to the profile.</p>
<h5><a name="tag_21_02_01_07" id="tag_21_02_01_07"></a>XSI Option Groups</h5>
<p class="tent">Austin Group Defect 1192 is applied, marking the <a href="../functions/encrypt.html"><i>encrypt</i>()</a> and
<a href="../functions/setkey.html"><i>setkey</i>()</a> functions as obsolescent.</p>
<p class="tent">Austin Group Defect 1346 is applied, removing _POSIX_MONOTONIC_CLOCK from the Advanced Realtime option group.</p>
<h5 class="header4"><a name="tag_21_02_01_08" id="tag_21_02_01_08"></a>A.2.1.6 Options</h5>
<p class="tent">The final subsections within <i>Implementation Conformance</i> list the core options within POSIX.1-2024. This
includes both options for the System Interfaces volume of POSIX.1-2024 and the Shell and Utilities volume of POSIX.1-2024.</p>
<p class="tent">Austin Group Defect 190 is applied, adding <a href="../utilities/man.html"><i>man</i></a> to the list of utilities
in the User Portability Utilities option.</p>
<h4><a name="tag_21_02_02" id="tag_21_02_02"></a>A.2.2 Application Conformance</h4>
<p class="tent">These definitions guide users or adapters of applications in determining on which implementations an application
will run and how much adaptation would be required to make it run on others. These definitions are modeled after related ones in
the ISO&nbsp;C standard.</p>
<p class="tent">POSIX.1 occasionally uses the expressions &quot;portable application&quot; or &quot;conforming application&quot;. As they are used,
these are synonyms for any of these terms. The differences between the classes of application conformance relate to the
requirements for other standards, the options supported (such as the XSI option) or, in the case of the Conforming POSIX.1
Application Using Extensions, to implementation extensions. When one of the less explicit expressions is used, it should be
apparent from the context of the discussion which of the more explicit names is appropriate</p>
<h5 class="header4"><a name="tag_21_02_02_01" id="tag_21_02_02_01"></a>A.2.2.1 Strictly Conforming POSIX Application</h5>
<p class="tent">This definition is analogous to that of an ISO&nbsp;C standard &quot;conforming program&quot;.</p>
<p class="tent">The major difference between a Strictly Conforming POSIX Application and an ISO&nbsp;C standard strictly conforming
program is that the latter is not allowed to use features of POSIX that are not in the ISO&nbsp;C standard.</p>
<h5 class="header4"><a name="tag_21_02_02_02" id="tag_21_02_02_02"></a>A.2.2.2 Conforming POSIX Application</h5>
<p class="tent">Examples of &lt;National Bodies&gt; include ANSI, BSI, and AFNOR.</p>
<h5 class="header4"><a name="tag_21_02_02_03" id="tag_21_02_02_03"></a>A.2.2.3 Conforming POSIX Application Using Extensions</h5>
<p class="tent">Due to possible requirements for configuration or implementation characteristics in excess of the specifications in
<a href="../basedefs/limits.h.html"><i>&lt;limits.h&gt;</i></a> or related to the hardware (such as array size or file space), not
every Conforming POSIX Application Using Extensions will run on every conforming implementation.</p>
<h5 class="header4"><a name="tag_21_02_02_04" id="tag_21_02_02_04"></a>A.2.2.4 Strictly Conforming XSI Application</h5>
<p class="tent">This is intended to be upwards-compatible with the definition of a Strictly Conforming POSIX Application, with the
addition of the facilities and functionality included in the XSI option.</p>
<h5 class="header4"><a name="tag_21_02_02_05" id="tag_21_02_02_05"></a>A.2.2.5 Conforming XSI Application Using Extensions</h5>
<p class="tent">Such applications may use extensions beyond the facilities defined by POSIX.1-2024 including the XSI option, but
need to document the additional requirements.</p>
<h4><a name="tag_21_02_03" id="tag_21_02_03"></a>A.2.3 Language-Dependent Services for the C Programming Language</h4>
<p class="tent">POSIX.1 is, for historical reasons, both a specification of an operating system interface, shell and utilities, and
a C binding for that specification. Efforts had been previously undertaken to generate a language-independent specification;
however, that had failed, and the fact that the ISO&nbsp;C standard is the <i>de facto</i> primary language on POSIX and the UNIX
system makes this a necessary and workable situation.</p>
<h4><a name="tag_21_02_04" id="tag_21_02_04"></a>A.2.4 Other Language-Related Specifications</h4>
<p class="tent">There is no additional rationale provided for this section.</p>
<h3><a name="tag_21_03" id="tag_21_03"></a>A.3 Definitions</h3>
<p class="tent">The definitions in this section are stated so that they can be used as exact substitutes for the terms in text.
They should not contain requirements or cross-references to sections within POSIX.1-2024; that is accomplished by using an
informative note. In addition, the term should not be included in its own definition. Where requirements or descriptions need to be
addressed but cannot be included in the definitions, due to not meeting the above criteria, these occur in the General Concepts
chapter.</p>
<p class="tent">In this version, the definitions have been reworked extensively to meet style requirements and to include terms
from the base documents (see the Scope).</p>
<p class="tent">Many of these definitions are necessarily circular, and some of the terms (such as &quot;process&quot;) are variants of
basic computing science terms that are inherently hard to define. Where some definitions are more conceptual and contain
requirements, these appear in the General Concepts chapter. Those listed in this section appear in an alphabetical glossary format
of terms.</p>
<p class="tent">Some definitions must allow extension to cover terms or facilities that are not explicitly mentioned in
POSIX.1-2024. For example, the definition of &quot;Extended Security Controls&quot; permits implementations beyond those defined in
POSIX.1-2024.</p>
<p class="tent">Some terms in the following list of notes do not appear in POSIX.1-2024; these are marked suffixed with an asterisk
(*). Many of them have been specifically excluded from POSIX.1-2024 because they concern system administration, implementation, or
other issues that are not specific to the programming interface. Those are marked with a reason, such as
&quot;implementation-defined&quot;.</p>
<h5><a name="tag_21_03_00_01" id="tag_21_03_00_01"></a>Alias Name</h5>
<p class="tent">Austin Group Defect 1050 is applied, adding <tt>'-'</tt> to the characters that can be used in an alias name.</p>
<h5><a name="tag_21_03_00_02" id="tag_21_03_00_02"></a>Anonymous Memory Object</h5>
<p class="tent">Austin Group Defect 850 is applied, adding anonymous memory objects.</p>
<h5><a name="tag_21_03_00_03" id="tag_21_03_00_03"></a>Application</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0004 [937] is applied.</p>
<h5><a name="tag_21_03_00_04" id="tag_21_03_00_04"></a>Appropriate Privileges</h5>
<p class="tent">One of the fundamental security problems with many historical UNIX systems has been that the privilege mechanism is
monolithic—a user has either no privileges or <i>all</i> privileges. Thus, a successful &quot;trojan horse&quot; attack on a privileged
process defeats all security provisions. Therefore, POSIX.1 allows more granular privilege mechanisms to be defined. For many
historical implementations of the UNIX system, the presence of the term &quot;appropriate privileges&quot; in POSIX.1 may be understood as
a synonym for &quot;superuser&quot; (UID 0). However, other systems have emerged where this is not the case and each discrete controllable
action has <i>appropriate privileges</i> associated with it. Because this mechanism is implementation-defined, it must be described
in the conformance document. Although that description affects several parts of POSIX.1 where the term &quot;appropriate privilege&quot; is
used, because the term &quot;implementation-defined&quot; only appears here, the description of the entire mechanism and its effects on
these other sections belongs in this equivalent section of the conformance document. This is especially convenient for
implementations with a single mechanism that applies in all areas, since it only needs to be described once.</p>
<h5><a name="tag_21_03_00_05" id="tag_21_03_00_05"></a>Async-Signal-Safe Function</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0005 [516] is applied.</p>
<h5><a name="tag_21_03_00_06" id="tag_21_03_00_06"></a>Background Job</h5>
<p class="tent">Austin Group Defect 1254 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_07" id="tag_21_03_00_07"></a>Base Character*</h5>
<p class="tent">The term &quot;Base Character&quot; has been removed, as it was felt that the use of this term within POSIX.1-2024 was
common usage English.</p>
<h5><a name="tag_21_03_00_08" id="tag_21_03_00_08"></a>Basename</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0006 [653] is applied.</p>
<h5><a name="tag_21_03_00_09" id="tag_21_03_00_09"></a>Built-In Utility</h5>
<p class="tent">Austin Group Defect 854 is applied, changing text relating to regular built-in utilities.</p>
<h5><a name="tag_21_03_00_10" id="tag_21_03_00_10"></a>Byte</h5>
<p class="tent">The restriction that a byte is now exactly eight bits was a conscious decision by the standard developers. It came
about due to a combination of factors, primarily the use of the type <b>int8_t</b> within the networking functions and the
alignment with the ISO/IEC&nbsp;9899:1999 standard, where the <b>intN_t</b> types were first defined.</p>
<p class="tent">According to the ISO/IEC&nbsp;9899:1999 standard:</p>
<ul>
<li class="tent">The <b>[u]intN_t</b> types must be two's complement with no padding bits and no illegal values.</li>
<li class="tent">All types (apart from bit fields, which are not relevant here) must occupy an integral number of bytes.</li>
<li class="tent">If a type with width <i>W</i> occupies <i>B</i> bytes with <i>C</i> bits per byte (<i>C</i> is the value of
{CHAR_BIT}), then it has <i>P</i> padding bits where <i>P</i>+<i>W</i>=<i>B</i>*<i>C</i>.</li>
<li class="tent">Therefore, for <b>int8_t</b> <i>P</i>=0, <i>W</i>=8. Since <i>B</i>&gt;=1, <i>C</i>&gt;=8, the only solution is
<i>B</i>=1, <i>C</i>=8.</li>
</ul>
<p class="tent">The standard developers also felt that this was not an undue restriction for the current state-of-the-art for this
version of the standard, but recognize that if industry trends continue, a wider character type may be required in the future.</p>
<h5><a name="tag_21_03_00_11" id="tag_21_03_00_11"></a>Character</h5>
<p class="tent">The term &quot;character&quot; is used to mean a sequence of one or more bytes representing a member of a character set.
The deviation in the exact text of the ISO&nbsp;C standard definition for &quot;byte&quot; meets the intent of the rationale of the
ISO&nbsp;C standard also clears up the ambiguity raised by the term &quot;basic execution character set&quot;. The octet-minimum
requirement is a reflection of the {CHAR_BIT} value.</p>
<p class="tent">Austin Group Defect 1356 is applied, changing the definition of &quot;character&quot; to match the definition of the term
&quot;multi-byte character&quot; in the ISO&nbsp;C standard.</p>
<h5><a name="tag_21_03_00_12" id="tag_21_03_00_12"></a>Child Process</h5>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/3 is applied, adding the <i>vfork</i>() function to
those listed.</p>
<h5><a name="tag_21_03_00_13" id="tag_21_03_00_13"></a>Clock Tick</h5>
<p class="tent">The ISO&nbsp;C standard defines a similar interval for use by the <a href=
"../functions/clock.html"><i>clock</i>()</a> function. There is no requirement that these intervals be the same. In historical
implementations these intervals are different.</p>
<h5><a name="tag_21_03_00_14" id="tag_21_03_00_14"></a>Code Block</h5>
<p class="tent">Austin Group Defect 613 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_15" id="tag_21_03_00_15"></a>Command</h5>
<p class="tent">The terms &quot;command&quot; and &quot;utility&quot; are related but have distinct meanings. Command is defined as &quot;a directive
to a shell to perform a specific task&quot;. The directive can be in the form of a single utility name (for example, <a href=
"../utilities/ls.html"><i>ls</i></a>), or the directive can take the form of a compound command (for example, <tt>"ls | grep name |
pr"</tt>). A utility is a program that can be called by name from a shell. Issuing only the name of the utility to a shell is the
equivalent of a one-word command. A utility may be invoked as a separate program that executes in a different process than the
command language interpreter, or it may be implemented as a part of the command language interpreter. For example, the <a href=
"../utilities/echo.html"><i>echo</i></a> command (the directive to perform a specific task) may be implemented such that the
<a href="../utilities/echo.html"><i>echo</i></a> utility (the logic that performs the task of echoing) is in a separate program;
therefore, it is executed in a process that is different from the command language interpreter. Conversely, the logic that performs
the <a href="../utilities/echo.html"><i>echo</i></a> utility could be built into the command language interpreter; therefore, it
could execute in the same process as the command language interpreter.</p>
<p class="tent">The terms &quot;tool&quot; and &quot;application&quot; can be thought of as being synonymous with &quot;utility&quot; from the perspective
of the operating system kernel. Tools, applications, and utilities historically have run, typically, in processes above the kernel
level. Tools and utilities historically have been a part of the operating system non-kernel code and have performed system-related
functions, such as listing directory contents, checking file systems, repairing file systems, or extracting system status
information. Applications have not generally been a part of the operating system, and they perform non-system-related functions,
such as word processing, architectural design, mechanical design, workstation publishing, or financial analysis. Utilities have
most frequently been provided by the operating system distributor, applications by third-party software distributors, or by the
users themselves. Nevertheless, POSIX.1-2024 does not differentiate between tools, utilities, and applications when it comes to
receiving services from the system, a shell, or the standard utilities. (For example, the <a href=
"../utilities/xargs.html"><i>xargs</i></a> utility invokes another utility; it would be of fairly limited usefulness if the users
could not run their own applications in place of the standard utilities.) Utilities are not applications in the sense that they are
not themselves subject to the restrictions of POSIX.1-2024 or any other standard—there is no requirement for <a href=
"../utilities/grep.html"><i>grep</i></a>, <a href="../utilities/stty.html"><i>stty</i></a>, or any of the utilities defined here to
be any of the classes of conforming applications.</p>
<h5><a name="tag_21_03_00_16" id="tag_21_03_00_16"></a>Column Positions</h5>
<p class="tent">In most 1-byte character sets, such as ASCII, the concept of column positions is identical to character positions
and to bytes. Therefore, it has been historically acceptable for some implementations to describe line folding or tab stops or
table column alignment in terms of bytes or character positions. Other character sets pose complications, as they can have internal
representations longer than one octet and they can have display characters that have different widths on the terminal screen or
printer.</p>
<p class="tent">In POSIX.1-2024 the term &quot;column positions&quot; has been defined to mean character—not byte—positions in input files.
Output files describe the column position in terms of the display width of the narrowest printable character in the character set,
adjusted to fit the characteristics of the output device. It is very possible that <i>n</i> column positions will not be able to
hold <i>n</i> characters in some character sets, unless all of those characters are of the narrowest width. It is assumed that the
implementation is aware of the width of the various characters, deriving this information from the value of <i>LC_CTYPE ,</i> and
thus can determine how many column positions to allot for each character in those utilities where it is important.</p>
<p class="tent">The term &quot;column position&quot; was used instead of the more natural &quot;column&quot; because the latter is frequently used
in the different contexts of columns of figures, columns of table values, and so on. Wherever confusion might result, these latter
types of columns are referred to as &quot;text columns&quot;.</p>
<h5><a name="tag_21_03_00_17" id="tag_21_03_00_17"></a>Condition Variable</h5>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h5><a name="tag_21_03_00_18" id="tag_21_03_00_18"></a>Control Operator</h5>
<p class="tent">Austin Group Defect 449 is applied, adding <tt>;&</tt> to the list of control operators.</p>
<h5><a name="tag_21_03_00_19" id="tag_21_03_00_19"></a>Controlling Terminal</h5>
<p class="tent">The question of which of possibly several special files referring to the terminal is meant is not addressed in
POSIX.1. The pathname <b>/dev/tty</b> is a synonym for the controlling terminal associated with a process.</p>
<h5><a name="tag_21_03_00_20" id="tag_21_03_00_20"></a>Core Image</h5>
<p class="tent">Austin Group Defect 1141 is applied, replacing the core file definition with a core image definition.</p>
<h5><a name="tag_21_03_00_21" id="tag_21_03_00_21"></a>CPU Time (Execution Time)</h5>
<p class="tent">Austin Group Defect 1116 is applied, removing a reference to the Threads option that existed in earlier versions of
this standard.</p>
<h5><a name="tag_21_03_00_22" id="tag_21_03_00_22"></a>Decimal-Point Character</h5>
<p class="tent">Austin Group Defect 1449 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_23" id="tag_21_03_00_23"></a>Declaration Utility</h5>
<p class="tent">Austin Group Defect 351 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_24" id="tag_21_03_00_24"></a>Device Number*</h5>
<p class="tent">The concept is handled in <a href="../functions/stat.html"><i>stat</i>()</a> as <i>ID of device</i>.</p>
<h5><a name="tag_21_03_00_25" id="tag_21_03_00_25"></a>Direct I/O</h5>
<p class="tent">Historically, direct I/O refers to the system bypassing intermediate buffering, but may be extended to cover
implementation-defined optimizations.</p>
<h5><a name="tag_21_03_00_26" id="tag_21_03_00_26"></a>Directory</h5>
<p class="tent">The format of the directory file is implementation-defined and differs radically between System&nbsp;V and 4.3 BSD.
However, routines (derived from 4.3 BSD) for accessing directories and certain constraints on the format of the information
returned by those routines are described in the <a href="../basedefs/dirent.h.html"><i>&lt;dirent.h&gt;</i></a> header.</p>
<h5><a name="tag_21_03_00_27" id="tag_21_03_00_27"></a>Directory Entry (or Hard Link)</h5>
<p class="tent">Austin Group Defect 1380 is applied, changing &quot;link&quot; to &quot;hard link&quot;.</p>
<h5><a name="tag_21_03_00_28" id="tag_21_03_00_28"></a>Display</h5>
<p class="tent">The Shell and Utilities volume of POSIX.1-2024 assigns precise requirements for the terms &quot;display&quot; and
&quot;write&quot;. Some historical systems have chosen to implement certain utilities without using the traditional file descriptor model.
For example, the <a href="../utilities/vi.html"><i>vi</i></a> editor might employ direct screen memory updates on a personal
computer, rather than a <a href="../functions/write.html"><i>write</i>()</a> system call. An instance of user prompting might
appear in a dialog box, rather than with standard error. When the Shell and Utilities volume of POSIX.1-2024 uses the term
&quot;display&quot;, the method of outputting to the terminal is unspecified; many historical implementations use <i>termcap</i> or
<i>terminfo</i>, but this is not a requirement. The term &quot;write&quot; is used when the Shell and Utilities volume of POSIX.1-2024
mandates that a file descriptor be used and that the output can be redirected. However, it is assumed that when the writing is
directly to the terminal (it has not been redirected elsewhere), there is no practical way for a user or test suite to determine
whether a file descriptor is being used. Therefore, the use of a file descriptor is mandated only for the redirection case and the
implementation is free to use any method when the output is not redirected. The verb <i>write</i> is used almost exclusively, with
the very few exceptions of those utilities where output redirection need not be supported: <a href=
"../utilities/tabs.html"><i>tabs</i></a>, <a href="../utilities/talk.html"><i>talk</i></a>, <a href=
"../utilities/tput.html"><i>tput</i></a>, and <a href="../utilities/vi.html"><i>vi</i></a>.</p>
<h5><a name="tag_21_03_00_29" id="tag_21_03_00_29"></a>Dot</h5>
<p class="tent">The symbolic name <i>dot</i> is carefully used in POSIX.1 to distinguish the working directory filename from a
period or a decimal point.</p>
<h5><a name="tag_21_03_00_30" id="tag_21_03_00_30"></a>Dot-Dot</h5>
<p class="tent">Historical implementations permit the use of these filenames without their special meanings. Such use precludes any
meaningful use of these filenames by a Conforming POSIX.1 Application. Therefore, such use is considered an extension, the use of
which makes an implementation non-conforming; see also <a href="#tag_21_04_16">A.4.16 Pathname Resolution</a>.</p>
<h5><a name="tag_21_03_00_31" id="tag_21_03_00_31"></a>Dot-Po File</h5>
<p class="tent">Austin Group Defect 1122 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_32" id="tag_21_03_00_32"></a>Empty Directory</h5>
<p class="tent">Austin Group Defect 1380 is applied, changing &quot;link&quot; to &quot;hard link&quot;.</p>
<h5><a name="tag_21_03_00_33" id="tag_21_03_00_33"></a>Epoch</h5>
<p class="tent">Historically, the origin of UNIX system time was referred to as &quot;00:00:00 GMT, January 1, 1970&quot;. Greenwich Mean
Time is actually not a term acknowledged by the international standards community; therefore, this term, &quot;Epoch&quot;, is used to
abbreviate the reference to the actual standard, Coordinated Universal Time.</p>
<h5><a name="tag_21_03_00_34" id="tag_21_03_00_34"></a>FIFO Special File</h5>
<p class="tent">See <a href="#tag_21_03_00_90">Pipe</a>.</p>
<h5><a name="tag_21_03_00_35" id="tag_21_03_00_35"></a>File</h5>
<p class="tent">It is permissible for an implementation-defined file type to be non-readable or non-writable.</p>
<h5><a name="tag_21_03_00_36" id="tag_21_03_00_36"></a>File Classes</h5>
<p class="tent">These classes correspond to the historical sets of permission bits. The classes are general to allow
implementations flexibility in expanding the access mechanism for more stringent security environments. Note that a process is in
one and only one class, so there is no ambiguity.</p>
<h5><a name="tag_21_03_00_37" id="tag_21_03_00_37"></a>File Descriptor</h5>
<p class="tent">Austin Group Defect 1493 is applied, moving some information from XCU <a href=
"../utilities/V3_chap02.html#tag_19_07"><i>2.7 Redirection</i></a> to this definition.</p>
<h5><a name="tag_21_03_00_38" id="tag_21_03_00_38"></a>File Lock</h5>
<p class="tent">Austin Group Defect 768 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_39" id="tag_21_03_00_39"></a>File Mode</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0007 [834] is applied.</p>
<h5><a name="tag_21_03_00_40" id="tag_21_03_00_40"></a>Filename</h5>
<p class="tent">Filenames are sequences of bytes, not sequences of characters. The only bytes that this standard says cannot appear
in any filename are the slash byte and the null byte. This is a side-effect of the fact that no conforming implementations of the
standard currently provide a way to pass information specifying the locale associated with strings passed between user-level
applications and the kernel. This decision could be revisited if implementations develop a way to associate a locale with the
strings passed between kernel space and user space.</p>
<p class="tent">Implementations may add other restrictions to the byte sequences allowed in filenames except that any filename
consisting of no more than {NAME_MAX} bytes from the set of characters in the portable filename character set must be allowed.</p>
<p class="tent">See <a href="#tag_21_03_00_86">Pathname</a>.</p>
<h5><a name="tag_21_03_00_41" id="tag_21_03_00_41"></a>File System</h5>
<p class="tent">Historically, the meaning of this term has been overloaded with two meanings: that of the complete file hierarchy,
and that of a mountable subset of that hierarchy; that is, a mounted file system. POSIX.1 uses the term &quot;file system&quot; in the
second sense, except that it is limited to the scope of a process (and root directory of a process). This usage also clarifies the
domain in which a file serial number is unique.</p>
<h5><a name="tag_21_03_00_42" id="tag_21_03_00_42"></a>Foreground Job</h5>
<p class="tent">Austin Group Defect 1254 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_43" id="tag_21_03_00_43"></a>Graphic Character</h5>
<p class="tent">This definition is made available for those definitions (in particular, <i>TZ )</i> which must exclude control
characters.</p>
<h5><a name="tag_21_03_00_44" id="tag_21_03_00_44"></a>Group Database</h5>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/4 is applied, removing the words &quot;of
implementation-defined format&quot;. See <a href="#tag_21_03_00_139">User Database</a>.</p>
<h5><a name="tag_21_03_00_45" id="tag_21_03_00_45"></a>Group File*</h5>
<p class="tent">Implementation-defined; see <a href="#tag_21_03_00_139">User Database</a>.</p>
<h5><a name="tag_21_03_00_46" id="tag_21_03_00_46"></a>Group ID</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0008 [511] is applied.</p>
<h5><a name="tag_21_03_00_47" id="tag_21_03_00_47"></a>Group Name</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0009 [584] is applied.</p>
<h5><a name="tag_21_03_00_48" id="tag_21_03_00_48"></a>Hard Link</h5>
<p class="tent">Austin Group Defect 1380 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_49" id="tag_21_03_00_49"></a>Historical Implementations*</h5>
<p class="tent">This refers to previously existing implementations of programming interfaces and operating systems that are related
to the interface specified by POSIX.1.</p>
<h5><a name="tag_21_03_00_50" id="tag_21_03_00_50"></a>Hole</h5>
<p class="tent">Austin Group Defect 415 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_51" id="tag_21_03_00_51"></a>Hosted Implementation*</h5>
<p class="tent">This refers to a POSIX.1 implementation that is accomplished through interfaces from the POSIX.1 services to some
alternate form of operating system kernel services. Note that the line between a hosted implementation and a native implementation
is blurred, since most implementations will provide some services directly from the kernel and others through some indirect path.
(For example, <a href="../functions/fopen.html"><i>fopen</i>()</a> might use <a href="../functions/open.html"><i>open</i>()</a>; or
<a href="../functions/mkfifo.html"><i>mkfifo</i>()</a> might use <a href="../functions/mknod.html"><i>mknod</i>()</a>.) There is no
necessary relationship between the type of implementation and its correctness, performance, and/or reliability.</p>
<h5><a name="tag_21_03_00_52" id="tag_21_03_00_52"></a>Implementation*</h5>
<p class="tent">This term is generally used instead of its synonym, &quot;system&quot;, to emphasize the consequences of decisions to be
made by system implementors. Perhaps if no options or extensions to POSIX.1 were allowed, this usage would not have occurred.</p>
<p class="tent">The term &quot;specific implementation&quot; is sometimes used as a synonym for &quot;implementation&quot;. This should not be
interpreted too narrowly; both terms can represent a relatively broad group of systems. For example, a hardware vendor could market
a very wide selection of systems that all used the same instruction set, with some systems desktop models and others large
multi-user minicomputers. This wide range would probably share a common POSIX.1 operating system, allowing an application compiled
for one to be used on any of the others; this is a [<i>specific</i>] <i>implementation</i>. However, such a wide range of machines
probably has some differences between the models. Some may have different clock rates, different file systems, different resource
limits, different network connections, and so on, depending on their sizes or intended usages. Even on two identical machines, the
system administrators may configure them differently. Each of these different systems is known by the term &quot;a specific instance of
a specific implementation&quot;. This term is only used in the portions of POSIX.1 dealing with runtime queries: <a href=
"../functions/sysconf.html"><i>sysconf</i>()</a> and <a href="../functions/pathconf.html"><i>pathconf</i>()</a>.</p>
<h5><a name="tag_21_03_00_53" id="tag_21_03_00_53"></a>Incomplete Pathname*</h5>
<p class="tent">Absolute pathname has been adequately defined.</p>
<h5><a name="tag_21_03_00_54" id="tag_21_03_00_54"></a>Interactive Device</h5>
<p class="tent">Austin Group Defect 1347 is applied, adding a definition of interactive device.</p>
<h5><a name="tag_21_03_00_55" id="tag_21_03_00_55"></a>Intrinsic Utility</h5>
<p class="tent">Austin Group Defect 854 is applied, adding intrinsic utilities.</p>
<h5><a name="tag_21_03_00_56" id="tag_21_03_00_56"></a>Job</h5>
<p class="tent">Austin Group Defect 1254 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_57" id="tag_21_03_00_57"></a>Job Control</h5>
<p class="tent">In order to understand the job control facilities in POSIX.1 it is useful to understand how they are used by a job
control-cognizant shell to create the user interface effect of job control.</p>
<p class="tent">While the job control facilities supplied by POSIX.1 can, in theory, support different types of interactive job
control interfaces supplied by different types of shells, there was historically one particular interface that was most common when
the standard was originally developed (provided by BSD C&nbsp;Shell).</p>
<p class="tent">This discussion describes that interface as a means of illustrating how the POSIX.1 job control facilities can be
used.</p>
<p class="tent">Job control allows users to selectively stop (suspend) the execution of processes and continue (resume) their
execution at a later point. The user typically employs this facility via the interactive interface jointly supplied by the terminal
I/O driver and a command interpreter (shell).</p>
<p class="tent">The user can launch jobs (command pipelines) in either the foreground or background. When launched in the
foreground, the shell waits for the job to complete before prompting for additional commands. When launched in the background, the
shell does not wait, but immediately prompts for new commands.</p>
<p class="tent">If the user launches a job in the foreground and subsequently regrets this, the user can type the suspend character
(typically set to &lt;control&gt;-Z), which causes the foreground process group to stop, and the shell to convert the corresponding
foreground job to a suspended job and begin prompting for new commands. The suspended job can be continued by the user (via special
shell commands) either as a foreground job or as a background job. Background jobs can also be moved into the foreground via shell
commands.</p>
<p class="tent">If a background process group attempts to access the login terminal (controlling terminal), it is stopped by the
terminal driver and the shell detects this and, in turn, suspends the corresponding background job and notifies the user. (Terminal
access includes <a href="../functions/read.html"><i>read</i>()</a> and certain terminal control functions, and conditionally
includes <a href="../functions/write.html"><i>write</i>()</a>.) The user can continue the suspended job in the foreground, thus
allowing the terminal access to succeed in an orderly fashion. After the terminal access succeeds, the user can optionally move the
job into the background via the suspend character and shell commands.<br></p>
<p class="tent"><i>Implementing Job Control Shells</i></p>
<p class="tent">The job control features of the POSIX shell (described in <a href="../utilities/V3_chap02.html#tag_19_11"><i>2.11
Job Control</i></a>) and of other shells can be implemented using the job control facilities of the System Interfaces volume of
POSIX.1-2024 in the following way.</p>
<p class="tent">The key feature necessary to provide job control is a way to group processes into jobs. This grouping is necessary
in order to direct signals to a single job and also to identify which job is in the foreground. (There is at most one job that is
in the foreground on any controlling terminal at a time.)</p>
<p class="tent">The concept of process groups is used to provide this grouping. The shell places the process(es) it creates for
each job in a separate process group via the <a href="../functions/setpgid.html"><i>setpgid</i>()</a> function. To do this, the
<a href="../functions/setpgid.html"><i>setpgid</i>()</a> function is invoked by the shell for each process in the job. It is
actually useful to invoke <a href="../functions/setpgid.html"><i>setpgid</i>()</a> twice for each process: once in the child
process, after calling <a href="../functions/fork.html"><i>fork</i>()</a> to create the process, but before calling one of the
<i>exec</i> family of functions to begin execution of the program, and once in the parent shell process, after calling <a href=
"../functions/fork.html"><i>fork</i>()</a> to create the child. The redundant invocation avoids a race condition by ensuring that
the child process is placed into the new process group before either the parent or the child relies on this being the case. The
process group ID for the job is selected by the shell to be equal to the process ID of one of the processes in the job. Some shells
choose to make one process in the job be the parent of the other processes in the job (if any). Other shells (for example, the
C&nbsp;Shell) choose to make themselves the parent of all processes in the job. In order to support this latter case, the <a href=
"../functions/setpgid.html"><i>setpgid</i>()</a> function accepts a process group ID parameter since the correct process group ID
cannot be inherited from the shell.</p>
<p class="tent">The shell also controls which job is currently in the foreground. A foreground and background job differ in two
ways: the shell waits for a foreground command to complete (or stop) before continuing to read new commands, and the terminal I/O
driver inhibits terminal access by background jobs (causing the processes to stop). Thus, the shell must work cooperatively with
the terminal I/O driver and have a common understanding of which job is currently in the foreground. It is the user who decides
which command should be currently in the foreground, and the user informs the shell via shell commands. The shell, in turn, informs
the terminal I/O driver via the <a href="../functions/tcsetpgrp.html"><i>tcsetpgrp</i>()</a> function. This indicates to the
terminal I/O driver the process group ID of the foreground process group. When the current foreground job is either suspended or
terminated, the shell places its own process group in the foreground via <a href=
"../functions/tcsetpgrp.html"><i>tcsetpgrp</i>()</a> before prompting for additional commands. Note that when a job is created the
new process group begins as a background process group. It requires an explicit act of the shell via <a href=
"../functions/tcsetpgrp.html"><i>tcsetpgrp</i>()</a> to move a process group into the foreground.</p>
<p class="tent">When a process in a job stops or terminates, its parent (for example, the shell) receives synchronous notification
by calling the <a href="../functions/waitpid.html"><i>waitpid</i>()</a> function with the WUNTRACED flag set. Asynchronous
notification is also provided when the parent establishes a signal handler for SIGCHLD and does not specify the SA_NOCLDSTOP flag.
Usually all processes in a job stop as a unit since the terminal I/O driver always sends job control stop signals to all processes
in the process group.</p>
<p class="tent">To continue a suspended job, the shell sends a SIGCONT signal to the corresponding process group. In addition, if
the job is being continued in the foreground, the shell invokes <a href="../functions/tcsetpgrp.html"><i>tcsetpgrp</i>()</a> to
place the process group in the foreground before sending SIGCONT. Otherwise, the shell leaves itself in the foreground and reads
additional commands.</p>
<p class="tent">There is additional flexibility in the POSIX.1 job control facilities that allows deviations from the typical
interface. Clearing the TOSTOP terminal flag allows background jobs to perform <a href="../functions/write.html"><i>write</i>()</a>
functions without stopping. The same effect can be achieved on a per-process basis by having a process set the signal action for
SIGTTOU to SIG_IGN.</p>
<p class="tent">A login session that is not using the job control facilities can be thought of as a large collection of processes
that are all in the same job. Such a login session may have a partial distinction between foreground and background processes; that
is, the shell waits for some processes before continuing to read new commands and does not wait for other processes. However, the
terminal I/O driver considers all these processes to be in the foreground since they are all members of the same process group.</p>
<p class="tent">In addition to the basic job control operations already mentioned, a job control-cognizant shell needs to perform
the following actions.</p>
<p class="tent">When a foreground (not background) job is suspended, the shell needs to sample and remember the current terminal
settings so that it can restore them later when it continues the suspended job in the foreground (via the <a href=
"../functions/tcgetattr.html"><i>tcgetattr</i>()</a> and <a href="../functions/tcsetattr.html"><i>tcsetattr</i>()</a>
functions).</p>
<p class="tent">Because a shell itself can be spawned from a shell, it must take special action to ensure that child shells
interact well with their parent shells. A child shell can be spawned to perform an interactive function (prompting the terminal for
commands) or a non-interactive function (reading commands from a file). When operating non-interactively, the job control shell
will by default refrain from performing the job control-specific actions described above. It will behave as a shell that does not
support job control. For example, all jobs will be left in the same process group as the shell, which itself remains in the process
group established for it by its parent. This allows the shell and its children to be treated as a single job by a parent shell, and
they can be affected as a unit by terminal keyboard signals.</p>
<p class="tent">An interactive child shell can be spawned from another job control-cognizant shell in either the foreground or
background. (For example, the user can execute an interactive shell in the background by means of the command <tt>"sh &amp;"</tt>.)
Before the child shell activates job control by calling <a href="../functions/setpgid.html"><i>setpgid</i>()</a> to place itself in
its own process group and <a href="../functions/tcsetpgrp.html"><i>tcsetpgrp</i>()</a> to place its new process group in the
foreground, it needs to ensure that it has already been placed in the foreground by its parent. (Otherwise, there could be multiple
job control shells that simultaneously attempt to control mediation of the terminal.) To determine this, the shell retrieves its
own process group via <a href="../functions/getpgrp.html"><i>getpgrp</i>()</a> and the process group of the current foreground job
via <a href="../functions/tcgetpgrp.html"><i>tcgetpgrp</i>()</a>. If these are not equal, the shell sends SIGTTIN to its own
process group, causing itself to stop. When continued later by its parent, the shell repeats the process group check. When the
process groups finally match, the shell is in the foreground and it can proceed to take control. After this point, the shell
ignores all the job control stop signals so that it does not inadvertently stop itself.<br></p>
<p class="tent"><i>Implementing Job Control Applications</i></p>
<p class="tent">Most applications do not need to be aware of job control signals and operations; the intuitively correct behavior
happens by default. However, sometimes an application can inadvertently interfere with normal job control processing, or an
application may choose to overtly effect job control in cooperation with normal shell procedures.</p>
<p class="tent">An application can inadvertently subvert job control processing by &quot;blindly&quot; altering the handling of signals. A
common application error is to learn how many signals the system supports and to ignore or catch them all. Such an application
makes the assumption that it does not know what this signal is, but knows the right handling action for it. The system may
initialize the handling of job control stop signals so that they are being ignored. This allows shells that do not support job
control to inherit and propagate these settings and hence to be immune to stop signals. A job control shell will set the handling
to the default action and propagate this, allowing processes to stop. In doing so, the job control shell is taking responsibility
for restarting the stopped applications. If an application wishes to catch the stop signals itself, it should first determine their
inherited handling states. If a stop signal is being ignored, the application should continue to ignore it. This is directly
analogous to the recommended handling of SIGINT described in the referenced UNIX Programmer&amp;rsquo;s Manual.</p>
<p class="tent">If an application is reading the terminal and has disabled the interpretation of special characters (by clearing
the ISIG flag), the terminal I/O driver will not send SIGTSTP when the suspend character is typed. Such an application can simulate
the effect of the suspend character by recognizing it and sending SIGTSTP to its process group as the terminal driver would have
done. Note that the signal is sent to the process group, not just to the application itself; this ensures that other processes in
the job also stop. (Note also that other processes in the job could be children, siblings, or even ancestors.) Applications should
not assume that the suspend character is &lt;control&gt;-Z (or any particular value); they should retrieve the current setting at
startup.<br></p>
<p class="tent"><i>Implementing Job Control Systems</i></p>
<p class="tent">The intent in adding 4.2 BSD-style job control functionality was to adopt the necessary 4.2 BSD programmatic
interface with only minimal changes to resolve syntactic or semantic conflicts with System&nbsp;V or to close recognized security
holes. The goal was to maximize the ease of providing both conforming implementations and Conforming POSIX.1 Applications.</p>
<p class="tent">It is only useful for a process to be affected by job control signals if it is the descendant of a job control
shell. Otherwise, there will be nothing that continues the stopped process.</p>
<p class="tent">POSIX.1 does not specify how controlling terminal access is affected by a user logging out (that is, by a
controlling process terminating). 4.2 BSD uses the <i>vhangup</i>() function to prevent any access to the controlling terminal
through file descriptors opened prior to logout. System&nbsp;V does not prevent controlling terminal access through file
descriptors opened prior to logout (except for the case of the special file, <b>/dev/tty</b>). Some implementations choose to make
processes immune from job control after logout (that is, such processes are always treated as if in the foreground); other
implementations continue to enforce foreground/background checks after logout. Therefore, a Conforming POSIX.1 Application should
not attempt to access the controlling terminal after logout since such access is unreliable. If an implementation chooses to deny
access to a controlling terminal after its controlling process exits, POSIX.1 requires a certain type of behavior (see <a href=
"#tag_21_03_00_19">Controlling Terminal</a>).</p>
<p class="tent">Austin Group Defect 1254 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_58" id="tag_21_03_00_58"></a>Job ID</h5>
<p class="tent">Austin Group Defect 1254 is applied, changing &quot;job control job ID&quot; to &quot;job ID&quot;.</p>
<h5><a name="tag_21_03_00_59" id="tag_21_03_00_59"></a>Joinable Thread</h5>
<p class="tent">Austin Group Defect 792 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_60" id="tag_21_03_00_60"></a>Kernel*</h5>
<p class="tent">See <a href="#tag_21_03_00_125">System Call*</a>.</p>
<h5><a name="tag_21_03_00_61" id="tag_21_03_00_61"></a>Library Routine*</h5>
<p class="tent">See <a href="#tag_21_03_00_125">System Call*</a>.</p>
<h5><a name="tag_21_03_00_62" id="tag_21_03_00_62"></a>Link</h5>
<p class="tent">Austin Group Defect 1380 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_63" id="tag_21_03_00_63"></a>Live Process</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0010 [690] is applied.</p>
<h5><a name="tag_21_03_00_64" id="tag_21_03_00_64"></a>Live Thread</h5>
<p class="tent">Austin Group Defect 792 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_65" id="tag_21_03_00_65"></a>Logical Device*</h5>
<p class="tent">Implementation-defined.</p>
<h5><a name="tag_21_03_00_66" id="tag_21_03_00_66"></a>Map</h5>
<p class="tent">The definition of map is included to clarify the usage of mapped pages in the description of the behavior of
process memory locking.</p>
<h5><a name="tag_21_03_00_67" id="tag_21_03_00_67"></a>Memory-Resident</h5>
<p class="tent">The term &quot;memory-resident&quot; is historically understood to mean that the so-called resident pages are actually
present in the physical memory of the computer system and are immune from swapping, paging, copy-on-write faults, and so on. This
is the actual intent of POSIX.1-2024 in the process memory locking section for implementations where this is logical. But for some
implementations—primarily mainframes—actually locking pages into primary storage is not advantageous to other system objectives,
such as maximizing throughput. For such implementations, memory locking is a &quot;hint&quot; to the implementation that the application
wishes to avoid situations that would cause long latencies in accessing memory. Furthermore, there are other implementation-defined
issues with minimizing memory access latencies that &quot;memory residency&quot; does not address—such as MMU reload faults. The definition
attempts to accommodate various implementations while allowing conforming applications to specify to the implementation that they
want or need the best memory access times that the implementation can provide.</p>
<h5><a name="tag_21_03_00_68" id="tag_21_03_00_68"></a>Memory Object*</h5>
<p class="tent">The term &quot;memory object&quot; usually implies shared memory. If the object is the same as a filename in the file
system name space of the implementation, it is expected that the data written into the memory object be preserved on disk. A memory
object may also apply to a physical device on an implementation. In this case, writes to the memory object are sent to the
controller for the device and reads result in control registers being returned.</p>
<h5><a name="tag_21_03_00_69" id="tag_21_03_00_69"></a>Messages Object</h5>
<p class="tent">Austin Group Defect 1122 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_70" id="tag_21_03_00_70"></a>Mounted File System*</h5>
<p class="tent">See <a href="#tag_21_03_00_41">File System</a>.</p>
<h5><a name="tag_21_03_00_71" id="tag_21_03_00_71"></a>Multi-Threaded Library</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0011 [625] is applied.</p>
<h5><a name="tag_21_03_00_72" id="tag_21_03_00_72"></a>Multi-Threaded Process</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0011 [625] is applied.</p>
<h5><a name="tag_21_03_00_73" id="tag_21_03_00_73"></a>Multi-Threaded Program</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0011 [625] is applied.</p>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h5><a name="tag_21_03_00_74" id="tag_21_03_00_74"></a>Mutex</h5>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h5><a name="tag_21_03_00_75" id="tag_21_03_00_75"></a>Name</h5>
<p class="tent">There are no explicit limits in POSIX.1-2024 on the sizes of names, words (see the definition of word in the Base
Definitions volume of POSIX.1-2024), lines, or other objects. However, other implicit limits do apply: shell script lines produced
by many of the standard utilities cannot exceed {LINE_MAX} and the sum of exported variables comes under the {ARG_MAX} limit.
Historical shells dynamically allocate memory for names and words and parse incoming lines a character at a time. Lines cannot have
an arbitrary {LINE_MAX} limit because of historical practice, such as makefiles, where <a href=
"../utilities/make.html"><i>make</i></a> removes the &lt;newline&gt; characters associated with the commands for a target and
presents the shell with one very long line. The text on INPUT FILES in XCU <a href="../utilities/V3_chap01.html#tag_18_04"><i>1.4
Utility Description Defaults</i></a> does allow a shell to run out of memory, but it cannot have arbitrary programming limits.</p>
<h5><a name="tag_21_03_00_76" id="tag_21_03_00_76"></a>Native Implementation*</h5>
<p class="tent">This refers to an implementation of POSIX.1 that interfaces directly to an operating system kernel; see also
<i>hosted implementation</i>. A similar concept is a native UNIX system, which would be a kernel derived from one of the original
UNIX system products.</p>
<h5><a name="tag_21_03_00_77" id="tag_21_03_00_77"></a>Negative</h5>
<p class="tent">Austin Group Defect 1428 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_78" id="tag_21_03_00_78"></a>Nice Value</h5>
<p class="tent">This definition is not intended to suggest that all processes in a system have priorities that are comparable.
Scheduling policy extensions, such as adding realtime priorities, make the notion of a single underlying priority for all
scheduling policies problematic. Some implementations may implement the features related to <a href=
"../utilities/nice.html"><i>nice</i></a> to affect all processes on the system, others to affect just the general time-sharing
activities implied by POSIX.1-2024, and others may have no effect at all. Because of the use of &quot;implementation-defined&quot; in
<a href="../utilities/nice.html"><i>nice</i></a> and <a href="../utilities/renice.html"><i>renice</i></a>, a wide range of
implementation strategies is possible.</p>
<h5><a name="tag_21_03_00_79" id="tag_21_03_00_79"></a>Null Pointer</h5>
<p class="tent">Austin Group Defect 940 is applied, adding a statement that any pointer object whose representation has all bits
set to zero will be interpreted as a null pointer.</p>
<h5><a name="tag_21_03_00_80" id="tag_21_03_00_80"></a>Null Terminator</h5>
<p class="tent">Austin Group Defect 1621 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_81" id="tag_21_03_00_81"></a>OFD-Owned File Lock</h5>
<p class="tent">Austin Group Defect 768 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_82" id="tag_21_03_00_82"></a>Open File Description</h5>
<p class="tent">An &quot;open file description&quot;, as it is currently named, describes how a file is being accessed. What is currently
called a &quot;file descriptor&quot; is actually just an identifier or &quot;handle&quot;; it does not actually describe anything.</p>
<p class="tent">The following alternate names were discussed:</p>
<ul>
<li class="tent">For &quot;open file description&quot;:<br>
&quot;open instance&quot;, &quot;file access description&quot;, &quot;open file information&quot;, and &quot;file access information&quot;.</li>
<li class="tent">For &quot;file descriptor&quot;:<br>
&quot;file handle&quot;, &quot;file number&quot; (cf., <a href="../functions/fileno.html"><i>fileno</i>()</a>). Some historical implementations use
the term &quot;file table entry&quot;.</li>
</ul>
<h5><a name="tag_21_03_00_83" id="tag_21_03_00_83"></a>Option-Argument</h5>
<p class="tent">Austin Group Defect 1784 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_84" id="tag_21_03_00_84"></a>Orphaned Process Group</h5>
<p class="tent">Historical implementations have a concept of an orphaned process, which is a process whose parent process has
exited. When job control is in use, it is necessary to prevent processes from being stopped in response to interactions with the
terminal after they no longer are controlled by a job control-cognizant program. Because signals generated by the terminal are sent
to a process group and not to individual processes, and because a signal may be provoked by a process that is not orphaned, but
sent to another process that is orphaned, it is necessary to define an orphaned process group. The definition assumes that a
process group will be manipulated as a group and that the job control-cognizant process controlling the group is outside of the
group and is the parent of at least one process in the group (so that state changes may be reported via <a href=
"../functions/waitpid.html"><i>waitpid</i>()</a>). Therefore, a group is considered to be controlled as long as at least one
process in the group has a parent that is outside of the process group, but within the session.</p>
<p class="tent">This definition of orphaned process groups ensures that a session leader's process group is always considered to be
orphaned, and thus it is prevented from stopping in response to terminal signals.</p>
<h5><a name="tag_21_03_00_85" id="tag_21_03_00_85"></a>Page</h5>
<p class="tent">The term &quot;page&quot; is defined to support the description of the behavior of memory mapping for shared memory and
memory mapped files, and the description of the behavior of process memory locking. It is not intended to imply that shared
memory/file mapping and memory locking are applicable only to &quot;paged&quot; architectures. For the purposes of POSIX.1-2024, whatever
the granularity on which an architecture supports mapping or locking, this is considered to be a &quot;page&quot; . If an architecture
cannot support the memory mapping or locking functions specified by POSIX.1-2024 on any granularity, then these options will not be
implemented on the architecture.</p>
<h5><a name="tag_21_03_00_86" id="tag_21_03_00_86"></a>Pathname</h5>
<p class="tent">Pathnames historically allowed all bytes except for the &lt;slash&gt; and &lt;NUL&gt; characters. For compatibility
with existing file systems, this usage is maintained throughout the standard by noting that a pathname need not be a valid
character string in all locales. However, the properties of the portable filename character set are such that a pathname using only
those characters and the &lt;slash&gt; is portable in all locales as a character string.</p>
<p class="tent">Austin Group Defect 1073 is applied, making it implementation-defined whether the case of exactly two leading
&lt;slash&gt; characters is treated specially.</p>
<h5><a name="tag_21_03_00_87" id="tag_21_03_00_87"></a>Passwd File*</h5>
<p class="tent">Implementation-defined; see <a href="#tag_21_03_00_139">User Database</a>.</p>
<h5><a name="tag_21_03_00_88" id="tag_21_03_00_88"></a>Parent Directory</h5>
<p class="tent">There may be more than one directory entry pointing to a given directory in some implementations. The wording here
identifies that exactly one of those is the parent directory. In pathname resolution, dot-dot is identified as the way that the
unique directory is identified. (That is, the parent directory is the one to which dot-dot points.) In the case of a remote file
system, if the same file system is mounted several times, it would appear as if they were distinct file systems (with interesting
synchronization properties).</p>
<h5><a name="tag_21_03_00_89" id="tag_21_03_00_89"></a>Pattern</h5>
<p class="tent">Austin Group Defect 1443 is applied, changing this definition to be inclusive of all uses of shell pattern matching
notation.</p>
<h5><a name="tag_21_03_00_90" id="tag_21_03_00_90"></a>Pipe</h5>
<p class="tent">It proved convenient to define a pipe as a special case of a FIFO, even though historically the latter was not
introduced until System&nbsp;III and does not exist at all in 4.3 BSD.</p>
<h5><a name="tag_21_03_00_91" id="tag_21_03_00_91"></a>Portable Filename</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0012 [584] is applied.</p>
<h5><a name="tag_21_03_00_92" id="tag_21_03_00_92"></a>Portable Filename Character Set</h5>
<p class="tent">The encoding of this character set is not specified—specifically, ASCII is not required. But the implementation
must provide a unique character code for each of the printable graphics specified by POSIX.1; see also <a href=
"#tag_21_04_09">A.4.9 Filenames</a>.</p>
<p class="tent">Situations where characters beyond the portable filename character set (or historically ASCII or the
ISO/IEC&nbsp;646:1991 standard) would be used (in a context where the portable filename character set or the ISO/IEC&nbsp;646:1991
standard is required by POSIX.1) are expected to be common. Although such a situation renders the use technically non-compliant,
mutual agreement among the users of an extended character set will make such use portable between those users. Such a mutual
agreement could be formalized as an optional extension to POSIX.1. (Making it required would eliminate too many possible systems,
as even those systems using the ISO/IEC&nbsp;646:1991 standard as a base character set extend their character sets for Western
Europe and the rest of the world in different ways.)</p>
<p class="tent">Nothing in POSIX.1 is intended to preclude the use of extended characters where interchange is not required or
where mutual agreement is obtained. It has been suggested that in several places &quot;should&quot; be used instead of &quot;shall&quot;. Because
(in the worst case) use of any character beyond the portable filename character set would render the program or data not portable
to all possible systems, no extensions are permitted in this context.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0013 [584] is applied.</p>
<h5><a name="tag_21_03_00_93" id="tag_21_03_00_93"></a>Portable Messages Object Source File (or Dot-Po File)</h5>
<p class="tent">Austin Group Defect 1122 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_94" id="tag_21_03_00_94"></a>Positional Parameter</h5>
<p class="tent">Austin Group Defect 1514 is applied, changing this definition in line with earlier changes to the cross-reference
to which it refers.</p>
<h5><a name="tag_21_03_00_95" id="tag_21_03_00_95"></a>Positive</h5>
<p class="tent">Austin Group Defect 1428 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_96" id="tag_21_03_00_96"></a>Process</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0014 [690] is applied.</p>
<h5><a name="tag_21_03_00_97" id="tag_21_03_00_97"></a>Process Lifetime</h5>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/5 is applied, adding <a href=
"../functions/fork.html"><i>fork</i>()</a>, <a href="../functions/posix_spawn.html"><i>posix_spawn</i>()</a>, <a href=
"../functions/posix_spawnp.html"><i>posix_spawnp</i>()</a>, and <i>vfork</i>() to the list of functions.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0014 [690] is applied.</p>
<h5><a name="tag_21_03_00_98" id="tag_21_03_00_98"></a>Process Termination</h5>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/6 is applied, rewording the definition to address
the &quot;passive exit&quot; on termination of the last thread or the <a href="../functions/_Exit.html"><i>_Exit</i>()</a> function.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0014 [690] is applied.</p>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h5><a name="tag_21_03_00_99" id="tag_21_03_00_99"></a>Process-Owned File Lock</h5>
<p class="tent">Austin Group Defect 768 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_100" id="tag_21_03_00_100"></a>Pseudo-Terminal</h5>
<p class="tent">Austin Group Defect 1466 is applied, changing the terminology used for pseudo-terminal devices.</p>
<h5><a name="tag_21_03_00_101" id="tag_21_03_00_101"></a>Radix Character (or Decimal-Point Character)</h5>
<p class="tent">Austin Group Defect 1449 is applied, adding &quot;(or Decimal-Point Character)&quot;.</p>
<h5><a name="tag_21_03_00_102" id="tag_21_03_00_102"></a>Record Lock</h5>
<p class="tent">Austin Group Defect 768 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_103" id="tag_21_03_00_103"></a>Regular Built-In Utility (or Regular Built-In)</h5>
<p class="tent">Austin Group Defect 850 is applied, adding this entry as a pointer to the <i>Built-In Utility</i> definition.</p>
<h5><a name="tag_21_03_00_104" id="tag_21_03_00_104"></a>Regular File</h5>
<p class="tent">POSIX.1 does not intend to preclude the addition of structuring data (for example, record lengths) in the file, as
long as such data is not visible to an application that uses the features described in POSIX.1.</p>
<h5><a name="tag_21_03_00_105" id="tag_21_03_00_105"></a>Root Directory</h5>
<p class="tent">This definition permits the operation of <i>chroot</i>(), even though that function is not in POSIX.1; see also
<a href="#tag_21_04_08">A.4.8 File Hierarchy</a>.</p>
<h5><a name="tag_21_03_00_106" id="tag_21_03_00_106"></a>Root File System*</h5>
<p class="tent">Implementation-defined.</p>
<h5><a name="tag_21_03_00_107" id="tag_21_03_00_107"></a>Root of a File System*</h5>
<p class="tent">Commonly used to refer to a mount point; this standard uses the latter.</p>
<h5><a name="tag_21_03_00_108" id="tag_21_03_00_108"></a>Signal</h5>
<p class="tent">The definition implies a double meaning for the term. Although a signal is an event, common usage implies that a
signal is an identifier of the class of event.</p>
<h5><a name="tag_21_03_00_109" id="tag_21_03_00_109"></a>Single-Threaded Process</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0011 [625] is applied.</p>
<h5><a name="tag_21_03_00_110" id="tag_21_03_00_110"></a>Single-Threaded Program</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0011 [625] is applied.</p>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h5><a name="tag_21_03_00_111" id="tag_21_03_00_111"></a>Source Code</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0015 [896] is applied.</p>
<h5><a name="tag_21_03_00_112" id="tag_21_03_00_112"></a>Sparse File</h5>
<p class="tent">Austin Group Defect 415 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_113" id="tag_21_03_00_113"></a>Special Built-In Utility (or Special Built-In)</h5>
<p class="tent">Austin Group Defect 1583 is applied, clarifying that &quot;special built-in utility&quot; and &quot;special built-in&quot; are
equivalent terms.</p>
<h5><a name="tag_21_03_00_114" id="tag_21_03_00_114"></a>Standard Error</h5>
<p class="tent">Austin Group Defect 1493 is applied, expanding this definition to cover uses of the term outside the XSH
volume.</p>
<h5><a name="tag_21_03_00_115" id="tag_21_03_00_115"></a>Standard Input</h5>
<p class="tent">Austin Group Defect 1493 is applied, expanding this definition to cover uses of the term outside the XSH
volume.</p>
<h5><a name="tag_21_03_00_116" id="tag_21_03_00_116"></a>Standard Output</h5>
<p class="tent">Austin Group Defect 1493 is applied, expanding this definition to cover uses of the term outside the XSH
volume.</p>
<h5><a name="tag_21_03_00_117" id="tag_21_03_00_117"></a>Stream</h5>
<p class="tent">Austin Group Defect 1371 is applied, updating the stream definition so that it applies to the shell command
language as well as the C language.</p>
<h5><a name="tag_21_03_00_118" id="tag_21_03_00_118"></a>Superuser*</h5>
<p class="tent">This concept, with great historical significance to UNIX system users, has been replaced with the notion of
appropriate privileges.</p>
<h5><a name="tag_21_03_00_119" id="tag_21_03_00_119"></a>Supplementary Group ID</h5>
<p class="tent">The POSIX.1-1990 standard is inconsistent in its treatment of supplementary groups. The definition of supplementary
group ID explicitly permits the effective group ID to be included in the set, but wording in the description of the <a href=
"../functions/setuid.html"><i>setuid</i>()</a> and <a href="../functions/setgid.html"><i>setgid</i>()</a> functions states: &quot;Any
supplementary group IDs of the calling process remain unchanged by these function calls&quot;. In the case of <a href=
"../functions/setgid.html"><i>setgid</i>()</a> this contradicts that definition. In addition, some felt that the unspecified
behavior in the definition of supplementary group IDs adds unnecessary portability problems. The standard developers considered
several solutions to this problem:</p>
<ol>
<li class="tent">Reword the description of <a href="../functions/setgid.html"><i>setgid</i>()</a> to permit it to change the
supplementary group IDs to reflect the new effective group ID. A problem with this is that it adds more &quot;may&quot;s to the wording and
does not address the portability problems of this optional behavior.</li>
<li class="tent">Mandate the inclusion of the effective group ID in the supplementary set (giving {NGROUPS_MAX} a minimum value of
1). This is the behavior of 4.4 BSD. In that system, the effective group ID is the first element of the array of supplementary
group IDs (there is no separate copy stored, and changes to the effective group ID are made only in the supplementary group set).
By convention, the initial value of the effective group ID is duplicated elsewhere in the array so that the initial value is not
lost when executing a set-group-ID program.</li>
<li class="tent">Change the definition of supplementary group ID to exclude the effective group ID and specify that the effective
group ID does not change the set of supplementary group IDs. This is the behavior of 4.2 BSD, 4.3 BSD, and System&nbsp;V Release
4.</li>
<li class="tent">Change the definition of supplementary group ID to exclude the effective group ID, and require that <a href=
"../functions/getgroups.html"><i>getgroups</i>()</a> return the union of the effective group ID and the supplementary group
IDs.</li>
<li class="tent">Change the definition of {NGROUPS_MAX} to be one more than the number of supplementary group IDs, so it continues
to be the number of values returned by <a href="../functions/getgroups.html"><i>getgroups</i>()</a> and existing applications
continue to work. This alternative is effectively the same as the second (and might actually have the same implementation).</li>
</ol>
<p class="tent">The standard developers decided to permit either 2 or 3. The effective group ID is orthogonal to the set of
supplementary group IDs, and it is implementation-defined whether <a href="../functions/getgroups.html"><i>getgroups</i>()</a>
returns this. If the effective group ID is returned with the set of supplementary group IDs, then all changes to the effective
group ID affect the supplementary group set returned by <a href="../functions/getgroups.html"><i>getgroups</i>()</a>. It is
permissible to eliminate duplicates from the list returned by <a href="../functions/getgroups.html"><i>getgroups</i>()</a>.
However, if a group ID is contained in the set of supplementary group IDs, setting the group ID to that value and then to a
different value should not remove that value from the supplementary group IDs.</p>
<p class="tent">The definition of supplementary group IDs has been changed to not include the effective group ID. This simplifies
permanent rationale and makes the relevant functions easier to understand. The <a href=
"../functions/getgroups.html"><i>getgroups</i>()</a> function has been modified so that it can, on an implementation-defined basis,
return the effective group ID. By making this change, functions that modify the effective group ID do not need to discuss adding to
the supplementary group list; the only view into the supplementary group list that the application developer has is through the
<a href="../functions/getgroups.html"><i>getgroups</i>()</a> function.</p>
<h5><a name="tag_21_03_00_120" id="tag_21_03_00_120"></a>Suspended Job</h5>
<p class="tent">Austin Group Defect 1254 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_121" id="tag_21_03_00_121"></a>Symbolic Constant</h5>
<p class="tent">Earlier versions of this standard used a variety of terms other than &quot;macro&quot; for many of the constants defined in
headers, and it was not clear in which of these cases they were required to be macros or not, or to be pre-processor constants
(i.e., usable in <b>#if</b>) or not. In cases where the symbols had a reserved prefix or suffix, there was often inconsistency
between whether the prefix/suffix was reserved only for macros or for any use, and whether the term &quot;macro&quot; or a different term
was used in the descriptions of the symbols. There were also some unintentional differences from the ISO&nbsp;C standard.</p>
<p class="tent">One of the most commonly used terms was &quot;symbolic constant&quot;. This has now been designated as the default term to
be used wherever appropriate, and a formal definition of the term has been added giving the exact requirements for symbols that are
described as symbolic constants.</p>
<p class="tent">The standard developers have performed a major rationalization of the header descriptions of symbols with constant
values according to the following policy:</p>
<ul>
<li class="tent">Where symbols are from the ISO&nbsp;C standard, the wording from the ISO&nbsp;C standard (or equivalent, in cases
where the exact wording is not appropriate) is used to describe them.</li>
<li class="tent">For all other constants, the first choice is to use &quot;symbolic constant&quot; when the requirements for the symbol are
a reasonably close fit with those of the term.
<p class="tent">The description of the symbol can override individual requirements for symbolic constants; e.g., to specify a
non-integer type, or to add a requirement that the symbol is usable in <b>#if</b> preprocessor directives.</p>
</li>
<li class="tent">When neither of the above apply, the exact requirements are stated in the description. (Note that macros are not
required to be usable in <b>#if</b>, or even to expand to constant expressions, unless explicitly stated.)</li>
<li class="tent">In cases where there is a reserved prefix or suffix, if the symbol(s) with that prefix/suffix are from the
ISO&nbsp;C standard and are required to be macros, or if the symbol is required to be usable in <b>#if</b>, then the prefix/suffix
is reserved for use only as macros. If the symbol(s) are &quot;symbolic constants&quot; and not required to be usable in <b>#if</b>, the
prefix/suffix is reserved for any use except in a few special cases.</li>
</ul>
<p class="tent">Where a constant is required to be a macro but is also allowed to be another type of constant such as an
enumeration constant, on implementations which do define it as another type of constant the macro is typically defined as
follows:</p>
<pre>
<tt>#define macro_name macro_name
</tt></pre>
<p class="tent">This allows applications to use <b>#ifdef</b>, etc. to determine whether the macro is defined, but the macro is not
usable in <b>#if</b> preprocessor directives because the preprocessor will treat the unexpanded word <i>macro_name</i> as having
the value zero.</p>
<h5><a name="tag_21_03_00_122" id="tag_21_03_00_122"></a>Symbolic Link</h5>
<p class="tent">Earlier versions of this standard did not require symbolic links to have attributes such as ownership and a file
serial number. This was because the 4.4 BSD implementation did not have them, and it was expected that other implementations may
wish to do the same. However, experience with 4.4 BSD has shown that symbolic links implemented in this way cause problems for
users and application developers, and later BSD systems have reverted to using <i>inode</i>s to implement symbolic links. Allowing
no-<i>inode</i> symbolic links also caused problems in the standard. For example, leaving the <i>st_ino</i> value for symbolic
links unspecified meant that the common technique of comparing the <i>st_dev</i> and <i>st_ino</i> values for two pathnames to see
if they refer to the same file could only be used with <a href="../functions/stat.html"><i>stat</i>()</a> in conforming
applications and not with <a href="../functions/lstat.html"><i>lstat</i>()</a>. The standard now requires symbolic links to have
meaningful values for the same <b>struct stat</b> fields as regular files, except for the file mode bits in <i>st_mode</i>.
Historically, the file mode bits were unused (the contents of a symbolic link could always be read), but implementations differed
as to whether the file mode bits (as returned in <i>st_mode</i> or reported by <a href="../utilities/ls.html"><i>ls</i></a>
<b>-l</b>) were set according to the <a href="../utilities/umask.html"><i>umask</i></a> or just to a fixed value such as 0777.
Accordingly, the standard requires the file mode bits to be ignored by <a href="../functions/readlink.html"><i>readlink</i>()</a>
and when a symbolic link is followed during pathname resolution, but leaves the corresponding part of the value returned in
<i>st_mode</i> unspecified.</p>
<p class="tent">Historical implementations were followed when determining which interfaces should apply to symbolic links.
Interfaces that historically followed symbolic links include <a href="../functions/chmod.html"><i>chmod</i>()</a>, <a href=
"../functions/stat.html"><i>stat</i>()</a>, and <i>utime</i>(). Interfaces that historically did not follow symbolic links include
<a href="../functions/lstat.html"><i>lstat</i>()</a>, <a href="../functions/rename.html"><i>rename</i>()</a>, <a href=
"../functions/remove.html"><i>remove</i>()</a>, <a href="../functions/rmdir.html"><i>rmdir</i>()</a>, and <a href=
"../functions/unlink.html"><i>unlink</i>()</a>. For <a href="../functions/chown.html"><i>chown</i>()</a> and <a href=
"../functions/link.html"><i>link</i>()</a>, historical implementations differed. POSIX.1-2024 inherited the <a href=
"../functions/lchown.html"><i>lchown</i>()</a> function from the Single UNIX Specification, Version 2, and therefore requires
<a href="../functions/chown.html"><i>chown</i>()</a> to follow symbolic links. Earlier versions of this standard required <a href=
"../functions/link.html"><i>link</i>()</a> to follow symbolic links, but with the addition of the <a href=
"../functions/linkat.html"><i>linkat</i>()</a> function (which has a flag to indicate whether to follow symbolic links), both
behaviors are now allowed for <a href="../functions/link.html"><i>link</i>()</a>.</p>
<p class="tent">When the final component of a pathname is a symbolic link, the standard requires that a trailing &lt;slash&gt;
causes the link to be followed. This is the behavior of historical implementations. For example, for <b>/a/b</b> and <b>/a/b/</b>,
if <b>/a/b</b> is a symbolic link to a directory, then <b>/a/b</b> refers to the symbolic link, and <b>/a/b/</b> refers to the
directory to which the symbolic link points.</p>
<p class="tent">Because a symbolic link and its referenced object coexist in the file system name space, confusion can arise in
distinguishing between the link itself and the referenced object. Historically, utilities and system calls have adopted their own
link following conventions in a somewhat <i>ad hoc</i> fashion. Rules for a uniform approach are outlined here, although historical
practice has been adhered to as much as was possible. To promote consistent system use, user-written utilities are encouraged to
follow these same rules.</p>
<p class="tent">Symbolic links are handled either by operating on the link itself, or by operating on the object referenced by the
link. In the latter case, an application or system call is said to &quot;follow&quot; the link. Symbolic links may reference other symbolic
links, in which case links are dereferenced until an object that is not a symbolic link is found, a symbolic link that references a
file that does not exist is found, or a loop is detected. (Current implementations do not detect loops, but have a limit on the
number of symbolic links that they will dereference before declaring it an error.)</p>
<p class="tent">There are four domains for which default symbolic link policy is established in a system. In almost all cases,
there are utility options that override this default behavior. The four domains are as follows:</p>
<ol>
<li class="tent">Symbolic links specified to system calls that take pathname arguments</li>
<li class="tent">Symbolic links specified as command line pathname arguments to utilities that are not performing a traversal of a
file hierarchy</li>
<li class="tent">Symbolic links referencing files not of type directory, specified to utilities that are performing a traversal of
a file hierarchy</li>
<li class="tent">Symbolic links referencing files of type directory, specified to utilities that are performing a traversal of a
file hierarchy</li>
</ol>
<br>
<p class="tent"><i>First Domain</i></p>
<p class="tent">The first domain is considered in earlier rationale.<br></p>
<p class="tent"><i>Second Domain</i></p>
<p class="tent">The reason this category is restricted to utilities that are not traversing the file hierarchy is that some
standard utilities take an option that specifies a hierarchical traversal, but by default operate on the arguments themselves.
Generally, users specifying the option for a file hierarchy traversal wish to operate on a single, physical hierarchy, and
therefore symbolic links, which may reference files outside of the hierarchy, are ignored. For example, <a href=
"../utilities/chown.html"><i>chown</i></a> <i>owner file</i> is a different operation from the same command with the <b>-R</b>
option specified. In this example, the behavior of the command <a href="../utilities/chown.html"><i>chown</i></a> <i>owner file</i>
is described here, while the behavior of the command <a href="../utilities/chown.html"><i>chown</i></a> <b>-R</b> <i>owner file</i>
is described in the third and fourth domains.</p>
<p class="tent">The general rule is that the utilities in this category follow symbolic links named as arguments.</p>
<p class="tent">Exceptions in the second domain are:</p>
<ul>
<li class="tent">The <a href="../utilities/mv.html"><i>mv</i></a> and <a href="../utilities/rm.html"><i>rm</i></a> utilities do not
follow symbolic links named as arguments, but respectively attempt to rename or delete them.</li>
<li class="tent">The <a href="../utilities/ls.html"><i>ls</i></a> utility is also an exception to this rule. For compatibility with
historical systems, when the <b>-R</b> option is not specified, the <a href="../utilities/ls.html"><i>ls</i></a> utility follows
symbolic links named as arguments if the <b>-L</b> option is specified or if the <b>-F</b>, <b>-d</b>, or <b>-l</b> options are not
specified. (If the <b>-L</b> option is specified, <a href="../utilities/ls.html"><i>ls</i></a> always follows symbolic links; it is
the only utility where the <b>-L</b> option affects its behavior even though a tree walk is not being performed.)</li>
</ul>
<p class="tent">All other standard utilities, when not traversing a file hierarchy, always follow symbolic links named as
arguments.</p>
<p class="tent">Historical practice is that the <b>-h</b> option is specified if standard utilities are to act upon symbolic links
instead of upon their targets. Examples of commands that have historically had a <b>-h</b> option for this purpose are the <a href=
"../utilities/chgrp.html"><i>chgrp</i></a>, <a href="../utilities/chown.html"><i>chown</i></a>, <a href=
"../utilities/file.html"><i>file</i></a>, and <a href="../utilities/test.html"><i>test</i></a> utilities.<br></p>
<p class="tent"><i>Third Domain</i></p>
<p class="tent">The third domain is symbolic links, referencing files not of type directory, specified to utilities that are
performing a traversal of a file hierarchy. (This includes symbolic links specified as command line pathname arguments or
encountered during the traversal.)</p>
<p class="tent">The intention of the Shell and Utilities volume of POSIX.1-2024 is that the operation that the utility is
performing is applied to the symbolic link itself, if that operation is applicable to symbolic links. If the operation is not
applicable to symbolic links, the symbolic link should be ignored. Specifically, by default, no change should be made to the file
referenced by the symbolic link.</p>
<p class="tent"><i>Fourth Domain</i></p>
<p class="tent">The fourth domain is symbolic links referencing files of type directory, specified to utilities that are performing
a traversal of a file hierarchy. (This includes symbolic links specified as command line pathname arguments or encountered during
the traversal.)</p>
<p class="tent">Most standard utilities do not, by default, indirect into the file hierarchy referenced by the symbolic link. (The
Shell and Utilities volume of POSIX.1-2024 uses the informal term &quot;physical walk&quot; to describe this case. The case where the
utility does indirect through the symbolic link is termed a &quot;logical walk&quot;.)</p>
<p class="tent">There are three reasons for the default to be a physical walk:</p>
<ol>
<li class="tent">With very few exceptions, a physical walk has been the historical default on UNIX systems supporting symbolic
links. Because some utilities (that is, <a href="../utilities/rm.html"><i>rm</i></a>) must default to a physical walk, regardless,
changing historical practice in this regard would be confusing to users and needlessly incompatible.</li>
<li class="tent">For systems where symbolic links have the historical file attributes (that is, <i>owner</i>, <i>group</i>,
<i>mode</i>), defaulting to a logical traversal would require the addition of a new option to the commands to modify the attributes
of the link itself. This is painful and more complex than the alternatives.</li>
<li class="tent">There is a security issue with defaulting to a logical walk. Historically, the command <a href=
"../utilities/chown.html"><i>chown</i></a> <b>-R</b> <i>user file</i> has been safe for the superuser because <i>setuid</i> and
<i>setgid</i> bits were lost when the ownership of the file was changed. If the walk were logical, changing ownership would no
longer be safe because a user might have inserted a symbolic link pointing to any file in the tree. Again, this would necessitate
the addition of an option to the commands doing hierarchy traversal to not indirect through the symbolic links, and historical
scripts doing recursive walks would instantly become security problems. While this is mostly an issue for system administrators, it
is preferable to not have different defaults for different classes of users.</li>
</ol>
<p class="tent">However, the standard developers agreed to leave it unspecified to achieve consensus.</p>
<p class="tent">As consistently as possible, users may cause standard utilities performing a file hierarchy traversal to follow any
symbolic links named on the command line, regardless of the type of file they reference, by specifying the <b>-H</b> (for half
logical) option. This option is intended to make the command line name space look like the logical name space.</p>
<p class="tent">As consistently as possible, users may cause standard utilities performing a file hierarchy traversal to follow any
symbolic links named on the command line as well as any symbolic links encountered during the traversal, regardless of the type of
file they reference, by specifying the <b>-L</b> (for logical) option. This option is intended to make the entire name space look
like the logical name space.</p>
<p class="tent">For consistency, implementors are encouraged to use the <b>-P</b> (for &quot;physical&quot;) flag to specify the physical
walk in utilities that do logical walks by default for whatever reason.</p>
<p class="tent">When one or more of the <b>-H</b>, <b>-L</b>, and <b>-P</b> flags can be specified, the last one specified
determines the behavior of the utility. This permits users to alias commands so that the default behavior is a logical walk and
then override that behavior on the command line.</p>
<p class="tent"><i>Exceptions in the Third and Fourth Domains</i></p>
<p class="tent">The <a href="../utilities/ls.html"><i>ls</i></a> and <a href="../utilities/rm.html"><i>rm</i></a> utilities are
exceptions to these rules. The <a href="../utilities/rm.html"><i>rm</i></a> utility never follows symbolic links and does not
support the <b>-H</b>, <b>-L</b>, or <b>-P</b> options. Some historical versions of <a href="../utilities/ls.html"><i>ls</i></a>
always followed symbolic links given on the command line whether the <b>-L</b> option was specified or not. Historical versions of
<a href="../utilities/ls.html"><i>ls</i></a> did not support the <b>-H</b> option. In POSIX.1-2024, unless one of the <b>-H</b> or
<b>-L</b> options is specified, the <a href="../utilities/ls.html"><i>ls</i></a> utility only follows symbolic links to directories
that are given as operands. The <a href="../utilities/ls.html"><i>ls</i></a> utility does not support the <b>-P</b> option.</p>
<p class="tent">The Shell and Utilities volume of POSIX.1-2024 requires that the standard utilities <a href=
"../utilities/ls.html"><i>ls</i></a>, <a href="../utilities/find.html"><i>find</i></a>, and <a href=
"../utilities/pax.html"><i>pax</i></a> detect infinite loops when doing logical walks; that is, a directory, or more commonly a
symbolic link, that refers to an ancestor in the current file hierarchy. If the file system itself is corrupted, causing the
infinite loop, it may be impossible to recover. Because <a href="../utilities/find.html"><i>find</i></a> and <a href=
"../utilities/ls.html"><i>ls</i></a> are often used in system administration and security applications, they should attempt to
recover and continue as best as they can. The <a href="../utilities/pax.html"><i>pax</i></a> utility should terminate because the
archive it was creating is by definition corrupted. Other, less vital, utilities should probably simply terminate as well.
Implementations are strongly encouraged to detect infinite loops in all utilities.</p>
<p class="tent">Historical practice is shown in <a href="#tagtcjh_25">Historical Practice for Symbolic Links</a>. The heading
<b>SVID3</b> stands for the Third Edition of the System&nbsp;V Interface Definition.</p>
<p class="tent">Historically, several shells have had built-in versions of the <a href="../utilities/pwd.html"><i>pwd</i></a>
utility. In some of these shells, <a href="../utilities/pwd.html"><i>pwd</i></a> reported the physical path, and in others, the
logical path. Implementations of the shell corresponding to POSIX.1-2024 must report the logical path by default.</p>
<p class="tent">The <a href="../utilities/cd.html"><i>cd</i></a> command is required, by default, to treat the filename dot-dot
logically. Implementors are required to support the <b>-P</b> flag in <a href="../utilities/cd.html"><i>cd</i></a> so that users
can have their current environment handled physically. In 4.3 BSD, <a href="../utilities/chgrp.html"><i>chgrp</i></a> during tree
traversal changed the group of the symbolic link, not the target. Symbolic links in 4.4 BSD did not have <i>owner</i>,
<i>group</i>, <i>mode</i>, or other standard UNIX system file attributes.<br></p>
<p class="caption"><a name="tagtcjh_25" id="tagtcjh_25"></a> Table: Historical Practice for Symbolic Links</p>
<center>
<table border="1" cellpadding="3" align="center">
<tr valign="top">
<th align="center">
<p class="tent"><b>Utility</b></p>
</th>
<th align="center">
<p class="tent"><b>SVID3</b></p>
</th>
<th align="center">
<p class="tent"><b>4.3 BSD</b></p>
</th>
<th align="center">
<p class="tent"><b>4.4 BSD</b></p>
</th>
<th align="center">
<p class="tent"><b>POSIX</b></p>
</th>
<th align="center">
<p class="tent"><b>Comments</b></p>
</th>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>cd</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent">Treat <tt>".."</tt> logically.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>cd</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-P</b></p>
</td>
<td align="left">
<p class="tent">Treat <tt>".."</tt> physically.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>chgrp</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent">Follow command line symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>chgrp</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>chgrp</i></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent">Affect the symlink.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>chmod</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent">Affect the symlink.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>chmod</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent">Follow command line symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>chmod</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>chown</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent">Follow command line symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>chown</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>chown</i></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent">Affect the symlink.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>cp</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent">Follow command line symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>cp</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>cpio</i></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>du</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent">Follow command line symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>du</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>file</i></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent">Affect the symlink.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>find</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent">Follow command line symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>find</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>find</i></p>
</td>
<td align="left">
<p class="tent"><b>-follow</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-follow</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>ln</i></p>
</td>
<td align="left">
<p class="tent"><b>-s</b></p>
</td>
<td align="left">
<p class="tent"><b>-s</b></p>
</td>
<td align="left">
<p class="tent"><b>-s</b></p>
</td>
<td align="left">
<p class="tent"><b>-s</b></p>
</td>
<td align="left">
<p class="tent">Create a symbolic link.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>ls</i></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>ls</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent">Follow command line symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>mv</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent">Operates on the symlink.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>pax</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent">Follow command line symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>pax</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>pwd</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-L</b></p>
</td>
<td align="left">
<p class="tent">Printed path may contain symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>pwd</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-P</b></p>
</td>
<td align="left">
<p class="tent">Printed path will not contain symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>rm</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent">Operates on the symlink.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>tar</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-H</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent">Follow command line symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>tar</i></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent">Follow symlinks.</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><i>test</i></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>&nbsp;</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent"><b>-h</b></p>
</td>
<td align="left">
<p class="tent">Affect the symlink.</p>
</td>
</tr>
</table>
</center>
<h5><a name="tag_21_03_00_123" id="tag_21_03_00_123"></a>Synchronized I/O Data Integrity Completion</h5>
<p class="tent">Austin Group Defect 672 is applied, clarifying how this definition applies to directories, and that it does not
apply to symbolic links.</p>
<h5><a name="tag_21_03_00_124" id="tag_21_03_00_124"></a>Synchronously-Generated Signal</h5>
<p class="tent">Those signals that may be generated synchronously include SIGABRT, SIGBUS, SIGILL, SIGFPE, SIGPIPE, and
SIGSEGV.</p>
<p class="tent">Any signal sent via the <a href="../functions/raise.html"><i>raise</i>()</a> function or a <a href=
"../functions/kill.html"><i>kill</i>()</a> function targeting the current process is also considered synchronous.</p>
<h5><a name="tag_21_03_00_125" id="tag_21_03_00_125"></a>System Call*</h5>
<p class="tent">The distinction between a &quot;system call&quot; and a &quot;library routine&quot; is an implementation detail that may differ
between implementations and has thus been excluded from POSIX.1.</p>
<p class="tent">See &quot;Interface, Not Implementation&quot; in the Preface.</p>
<h5><a name="tag_21_03_00_126" id="tag_21_03_00_126"></a>System Console</h5>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/7 is applied, changing from &quot;An
implementation-defined device&quot; to &quot;A device&quot;.</p>
<h5><a name="tag_21_03_00_127" id="tag_21_03_00_127"></a>System Databases</h5>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/9 is applied, rewording the definition to reference
the existing definitions for &quot;group database&quot; and &quot;user database&quot;.</p>
<h5><a name="tag_21_03_00_128" id="tag_21_03_00_128"></a>System Process</h5>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/8 is applied, rewording the definition to remove
the requirement for an implementation to define the object.</p>
<h5><a name="tag_21_03_00_129" id="tag_21_03_00_129"></a>System Reboot</h5>
<p class="tent">A &quot;system reboot&quot; is an event initiated by an unspecified circumstance that causes all processes (other than
special system processes) to be terminated in an implementation-defined manner, after which any changes to the state and contents
of files created or written to by a Conforming POSIX.1 Application prior to the event are implementation-defined.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/10 is applied, changing &quot;An implementation-defined
sequence of events&quot; to &quot;An unspecified sequence of events&quot;.</p>
<h5><a name="tag_21_03_00_130" id="tag_21_03_00_130"></a>Synchronized I/O Data (and File) Integrity Completion</h5>
<p class="tent">These terms specify that for synchronized read operations, pending writes must be successfully completed before the
read operation can complete. This is motivated by two circumstances. Firstly, when synchronizing processes can access the same
file, but not share common buffers (such as for a remote file system), this requirement permits the reading process to guarantee
that it can read data written remotely. Secondly, having data written synchronously is insufficient to guarantee the order with
respect to a subsequent write by a reading process, and thus this extra read semantic is necessary.</p>
<h5><a name="tag_21_03_00_131" id="tag_21_03_00_131"></a>Text Domain</h5>
<p class="tent">Austin Group Defect 1122 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_132" id="tag_21_03_00_132"></a>Text File</h5>
<p class="tent">The term &quot;text file&quot; does not prevent the inclusion of control or other non-printable characters (other than
NUL). Therefore, standard utilities that list text files as inputs or outputs are either able to process the special characters or
they explicitly describe their limitations within their individual descriptions. The definition of &quot;text file&quot; has caused
controversy. The only difference between text and binary files is that text files have lines of less than {LINE_MAX} bytes, with no
NUL characters, each terminated by a &lt;newline&gt;. The definition allows a file with a single &lt;newline&gt;, or a totally
empty file, to be called a text file. If a file ends with an incomplete line it is not strictly a text file by this definition. The
&lt;newline&gt; referred to in POSIX.1-2024 is not some generic line separator, but a single character; files created on systems
where they use multiple characters for ends of lines are not portable to all conforming systems without some translation process
unspecified by POSIX.1-2024.</p>
<h5><a name="tag_21_03_00_133" id="tag_21_03_00_133"></a>Thread</h5>
<p class="tent">POSIX.1-2024 defines a live thread to be a flow of control within a process. Each thread has a minimal amount of
private state; most of the state associated with a process is shared among all of the threads in the process. While most
multi-thread extensions to POSIX have taken this approach, others have made different decisions. <basefont size="2"></p>
<dl>
<dt><b>Note:</b></dt>
<dd>The choice to put threads within a process does not constrain implementations to implement threads in that manner. However, all
functions have to behave as though threads share the indicated state information with the process from which they were
created.</dd>
</dl>
<basefont size="3">
<p class="tent">Threads need to share resources in order to cooperate. Memory has to be widely shared between threads in order for
the threads to cooperate at a fine level of granularity. Threads keep data structures and the locks protecting those data
structures in shared memory. For a data structure to be usefully shared between threads, such structures should not refer to any
data that can only be interpreted meaningfully by a single thread. Thus, any system resources that might be referred to in data
structures need to be shared between all threads. File descriptors, pathnames, and pointers to stack variables are all things that
programmers want to share between their threads. Thus, the file descriptor table, the root directory, the current working
directory, and the address space have to be shared.</p>
<p class="tent">Library implementations are possible as long as the effective behavior is as if system services invoked by one
thread do not suspend other threads. This may be difficult for some library implementations on systems that do not provide
asynchronous facilities.</p>
<p class="tent">See <a href="../xrat/V4_xsh_chap01.html#tag_22_02_09"><i>B.2.9 Threads</i></a> for additional rationale.</p>
<p class="tent">Austin Group Defect 792 is applied, changing this definition.</p>
<h5><a name="tag_21_03_00_134" id="tag_21_03_00_134"></a>Thread ID</h5>
<p class="tent">See <a href="../xrat/V4_xsh_chap01.html#tag_22_02_09_10"><i>B.2.9.2 Thread IDs</i></a> for additional
rationale.</p>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h5><a name="tag_21_03_00_135" id="tag_21_03_00_135"></a>Thread Lifetime</h5>
<p class="tent">Austin Group Defect 792 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_136" id="tag_21_03_00_136"></a>Thread Termination</h5>
<p class="tent">Austin Group Defect 792 is applied, adding this definition.</p>
<h5><a name="tag_21_03_00_137" id="tag_21_03_00_137"></a>Thread-Safe</h5>
<p class="tent">All functions required by POSIX.1-2024 need to be thread-safe; see <a href="#tag_21_04_22">A.4.22 Thread-Safety</a>
and <a href="../xrat/V4_xsh_chap01.html#tag_22_02_09_09"><i>B.2.9.1 Thread-Safety</i></a> for additional rationale.</p>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h5><a name="tag_21_03_00_138" id="tag_21_03_00_138"></a>Thread-Specific Data Key</h5>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h5><a name="tag_21_03_00_139" id="tag_21_03_00_139"></a>User Database</h5>
<p class="tent">There are no references in POSIX.1-2024 to a &quot;passwd file&quot; or a &quot;group file&quot;, and there is no requirement that
the <i>group</i> or <i>passwd</i> databases be kept in files containing editable text. Many large timesharing systems use
<i>passwd</i> databases that are hashed for speed. Certain security classifications prohibit certain information in the
<i>passwd</i> database from being publicly readable.</p>
<p class="tent">The term &quot;encoded&quot; is used instead of &quot;encrypted&quot; in order to avoid the implementation connotations (such as
reversibility or use of a particular algorithm) of the latter term.</p>
<p class="tent">The <a href="../functions/getgrent.html"><i>getgrent</i>()</a>, <a href=
"../functions/setgrent.html"><i>setgrent</i>()</a>, <a href="../functions/endgrent.html"><i>endgrent</i>()</a>, <a href=
"../functions/getpwent.html"><i>getpwent</i>()</a>, <a href="../functions/setpwent.html"><i>setpwent</i>()</a>, and <a href=
"../functions/endpwent.html"><i>endpwent</i>()</a> functions are not included as part of the base standard because they provide a
linear database search capability that is not generally useful (the <a href="../functions/getpwuid.html"><i>getpwuid</i>()</a>,
<a href="../functions/getpwnam.html"><i>getpwnam</i>()</a>, <a href="../functions/getgrgid.html"><i>getgrgid</i>()</a>, and
<a href="../functions/getgrnam.html"><i>getgrnam</i>()</a> functions are provided for keyed lookup) and because in certain
distributed systems, especially those with different authentication domains, it may not be possible or desirable to provide an
application with the ability to browse the system databases indiscriminately. They are provided on XSI-conformant systems due to
their historical usage by many existing applications.</p>
<p class="tent">A change from historical implementations is that the structures used by these functions have fields of the types
<b>gid_t</b> and <b>uid_t</b>, which are required to be defined in the <a href=
"../basedefs/sys_types.h.html"><i>&lt;sys/types.h&gt;</i></a> header. POSIX.1-2024 requires implementations to ensure that these
types are defined by inclusion of <a href="../basedefs/grp.h.html"><i>&lt;grp.h&gt;</i></a> and <a href=
"../basedefs/pwd.h.html"><i>&lt;pwd.h&gt;</i></a>, respectively, without imposing any name space pollution or errors from
redefinition of types.</p>
<p class="tent">POSIX.1-2024 is silent about the content of the strings containing user or group names. These could be digit
strings. POSIX.1-2024 is also silent as to whether such digit strings bear any relationship to the corresponding (numeric) user or
group ID.<br></p>
<p class="tent"><i>Database Access</i></p>
<p class="tent">The thread-safe versions of the user and group database access functions return values in user-supplied buffers
instead of possibly using static data areas that may be overwritten by each call.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/11 is applied, removing the words &quot;of
implementation-defined format&quot;.</p>
<h5><a name="tag_21_03_00_140" id="tag_21_03_00_140"></a>User ID</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0016 [511] is applied.</p>
<h5><a name="tag_21_03_00_141" id="tag_21_03_00_141"></a>User Name</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0017 [584] is applied.</p>
<h5><a name="tag_21_03_00_142" id="tag_21_03_00_142"></a>Virtual Processor*</h5>
<p class="tent">The term &quot;virtual processor&quot; was chosen as a neutral term describing all kernel-level schedulable entities, such
as processes, Mach tasks, or lightweight processes. Implementing threads using multiple processes as virtual processors, or
implementing multiplexed threads above a virtual processor layer, should be possible, provided some mechanism has also been
implemented for sharing state between processes or virtual processors. Many systems may also wish to provide implementations of
threads on systems providing &quot;shared processes&quot; or &quot;variable-weight processes&quot;. It was felt that exposing such implementation
details would severely limit the type of systems upon which the threads interface could be supported and prevent certain types of
valid implementations. It was also determined that a virtual processor interface was out of the scope of the Rationale
(Informative) volume of POSIX.1-2024.</p>
<h5><a name="tag_21_03_00_143" id="tag_21_03_00_143"></a>White Space</h5>
<p class="tent">Austin Group Defect 1163 is applied, clarifying the definition of white space and adding definitions of white-space
byte, white-space character, and white-space wide character.</p>
<h5><a name="tag_21_03_00_144" id="tag_21_03_00_144"></a>XSI</h5>
<p class="tent">This is included to allow POSIX.1-2024 to be adopted as an IEEE standard and a standard of The Open Group, serving
both POSIX and the Single UNIX Specification in a core set of volumes.</p>
<p class="tent">When POSIX.1 and the Single UNIX Specification were merged, the term &quot;XSI&quot; had been used for over 10 years in
connection with the XPG series and the first and second versions of the base volumes of the Single UNIX Specification. The XSI
margin code was introduced to denote the extended or more restrictive semantics beyond POSIX that are applicable to UNIX
systems.</p>
<h5><a name="tag_21_03_00_145" id="tag_21_03_00_145"></a>Zombie Process</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0018 [690] is applied.</p>
<h5><a name="tag_21_03_00_146" id="tag_21_03_00_146"></a>Zombie Thread</h5>
<p class="tent">Austin Group Defect 792 is applied, adding this definition.</p>
<h3><a name="tag_21_04" id="tag_21_04"></a>A.4 General Concepts</h3>
<p class="tent">The general concepts are similar in nature to the definitions section, with the exception that a term defined in
general concepts can contain normative requirements.</p>
<h4><a name="tag_21_04_01" id="tag_21_04_01"></a>A.4.1 Case Insensitive Comparisons</h4>
<p class="tent">Case-insensitive matching is defined in this standard in terms of a simple algorithm whereby, for each character in
the string to be matched, if the character is uppercase then the lowercase equivalent (if any) is also checked for a match, and if
the character is lowercase then the uppercase equivalent (if any) is also checked for a match. It is described this way to make the
expected behavior easier to understand; however, implementations may internally use more sophisticated algorithms to improve
efficiency, provided that the result is the same as the simple algorithm would produce.</p>
<p class="tent">Austin Group Defect 1031 is applied, adding case insensitive comparisons.</p>
<h4><a name="tag_21_04_02" id="tag_21_04_02"></a>A.4.2 Concurrent Execution</h4>
<p class="tent">There is no additional rationale provided for this section.</p>
<h4><a name="tag_21_04_03" id="tag_21_04_03"></a>A.4.3 Default Initialization</h4>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0019 [934] is applied.</p>
<p class="tent">Austin Group Defect 940 is applied, removing text that was conditional on the all-zero bit pattern of a pointer
object being a null pointer, as this is now mandated.</p>
<h4><a name="tag_21_04_04" id="tag_21_04_04"></a>A.4.4 Directory Operations</h4>
<p class="tent">Earlier versions of this standard did not make clear that directory modifications are performed atomically and
serially, although that is the historical behavior and was always intended.</p>
<p class="tent">Austin Group Defect 672 is applied, adding this subsection.</p>
<h4><a name="tag_21_04_05" id="tag_21_04_05"></a>A.4.5 Directory Protection</h4>
<p class="tent">There is no additional rationale provided for this section.</p>
<h4><a name="tag_21_04_06" id="tag_21_04_06"></a>A.4.6 Extended Security Controls</h4>
<p class="tent">Allowing an implementation to define extended security controls enables the use of POSIX.1-2024 in environments
that require different or more rigorous security than that provided in POSIX.1. Extensions are allowed in two areas: privilege and
file access permissions. The semantics of these areas have been defined to permit extensions with reasonable, but not exact,
compatibility with all existing practices. For example, the elimination of the superuser definition precludes identifying a process
as privileged or not by virtue of its effective user ID.</p>
<h4><a name="tag_21_04_07" id="tag_21_04_07"></a>A.4.7 File Access Permissions</h4>
<p class="tent">A process should not try to anticipate the result of an attempt to access data by <i>a priori</i> use of these
rules. Rather, it should make the attempt to access data and examine the return value (and possibly <i>errno</i> as well), or use
<a href="../functions/access.html"><i>access</i>()</a>. An implementation may include other security mechanisms in addition to
those specified in POSIX.1, and an access attempt may fail because of those additional mechanisms, even though it would succeed
according to the rules given in this section. (For example, the user's security level might be lower than that of the object of the
access attempt.) The supplementary group IDs provide another reason for a process to not attempt to anticipate the result of an
access attempt.</p>
<p class="tent">Since the current standard does not specify a method for opening a directory for searching, it is unspecified
whether search permission on the <i>fd</i> argument to <a href="../functions/openat.html"><i>openat</i>()</a> and related functions
is based on whether the directory was opened with search mode or on the current permissions allowed by the directory at the time a
search is performed. When there is existing practice that supports opening directories for searching, it is expected that these
functions will be modified to specify that the search permissions will be granted based on the file access modes of the directory's
file descriptor identified by <i>fd</i>, and not on the mode of the directory at the time the directory is searched.</p>
<h4><a name="tag_21_04_08" id="tag_21_04_08"></a>A.4.8 File Hierarchy</h4>
<p class="tent">Though the file hierarchy is commonly regarded to be a tree, POSIX.1 does not define it as such for three
reasons:</p>
<ol>
<li class="tent">Links may join branches.</li>
<li class="tent">In some network implementations, there may be no single absolute root directory; see <i>pathname
resolution</i>.</li>
<li class="tent">With symbolic links, the file system need not be a tree or even a directed acyclic graph.</li>
</ol>
<h4><a name="tag_21_04_09" id="tag_21_04_09"></a>A.4.9 Filenames</h4>
<p class="tent">Historically, certain filenames and pathnames have been reserved. This list includes <b>core</b>,
<b>/etc/passwd</b>, and so on. Conforming applications should avoid these.</p>
<p class="tent">Most historical implementations prohibit case folding in filenames; that is, treating uppercase and lowercase
alphabetic characters as identical. However, some consider case folding desirable:</p>
<ul>
<li class="tent">For user convenience</li>
<li class="tent">For ease-of-implementation of the POSIX.1 interface as a hosted system on some popular operating systems</li>
</ul>
<p class="tent">Variants, such as maintaining case distinctions in filenames, but ignoring them in comparisons, have been
suggested. Methods of allowing escaped characters of the case opposite the default have been proposed.</p>
<p class="tent">Many reasons have been expressed for not allowing case folding, including:</p>
<ul>
<li class="tent">No solid evidence has been produced as to whether case-sensitivity or case-insensitivity is more convenient for
users.</li>
<li class="tent">Making case-insensitivity a POSIX.1 implementation option would be worse than either having it or not having it,
because:
<ul>
<li class="tent">More confusion would be caused among users.</li>
<li class="tent">Application developers would have to account for both cases in their code.</li>
<li class="tent">POSIX.1 implementors would still have other problems with native file systems, such as short or otherwise
constrained filenames or pathnames, and the lack of hierarchical directory structure.</li>
</ul>
</li>
<li class="tent">Case folding is not easily defined in many European languages, both because many of them use characters outside
the US ASCII alphabetic set, and because:
<ul>
<li class="tent">In Spanish, the digraph <tt>"ll"</tt> is considered to be a single letter, the capitalized form of which may be
either <tt>"Ll"</tt> or <tt>"LL"</tt>, depending on context.</li>
<li class="tent">In French, the capitalized form of a letter with an accent may or may not retain the accent, depending on the
country in which it is written.</li>
<li class="tent">In German, the sharp ess may be represented as a single character resembling a Greek beta (ß) in lowercase, but as
the digraph <tt>"SS"</tt> in uppercase.</li>
<li class="tent">In Greek, there are several lowercase forms of some letters; the one to use depends on its position in the word.
Arabic has similar rules.</li>
</ul>
</li>
<li class="tent">Many East Asian languages, including Japanese, Chinese, and Korean, do not distinguish case and are sometimes
encoded in character sets that use more than one byte per character.</li>
<li class="tent">Multiple character codes may be used on the same machine simultaneously. There are several ISO character sets for
European alphabets. In Japan, several Japanese character codes are commonly used together, sometimes even in filenames; this is
evidently also the case in China. To handle case insensitivity, the kernel would have to at least be able to distinguish for which
character sets the concept made sense.</li>
<li class="tent">The file system implementation historically deals only with bytes, not with characters. Limitations on valid
encodings ensure that the byte sequences for the &lt;slash&gt; character, &lt;period&gt; character, and &lt;NUL&gt; character will
not be confused with any other character in any locale. However, there exist common single-shift encodings where other single-byte
characters from the portable filename character set can also occur as a subset of a multi-byte character, making case folding of
portable filename bytes dependent on the context of whether a shift-state is active.</li>
<li class="tent">The purpose of POSIX.1 is to standardize the common, existing definition, not to change it. Mandating
case-insensitivity would make all historical implementations non-standard.</li>
<li class="tent">Not only the interface, but also application programs would need to change, counter to the purpose of having
minimal changes to existing application code.</li>
<li class="tent">At least one of the original developers of the UNIX system has expressed objection in the strongest terms to
either requiring case-insensitivity or making it an option, mostly on the basis that POSIX.1 should not hinder portability of
application programs across related implementations in order to allow compatibility with unrelated operating systems.</li>
</ul>
<p class="tent">Two proposals were entertained regarding case folding in filenames:</p>
<ol>
<li class="tent">Remove all wording that previously permitted case folding.
<dl compact>
<dd></dd>
<dt>Rationale</dt>
<dd>Case folding is inconsistent with the portable filename character set and filename definitions (all bytes except &lt;slash&gt;
and null). No known implementations allowing all bytes except &lt;slash&gt; and null also do case folding.</dd>
</dl>
</li>
<li class="tent">Change &quot;though this practice is not recommended:&quot; to &quot;although this practice is strongly discouraged.&quot;
<dl compact>
<dd></dd>
<dt>Rationale</dt>
<dd>If case folding must be included in POSIX.1, the wording should be stronger to discourage the practice.</dd>
</dl>
</li>
</ol>
<p class="tent">The consensus selected the first proposal. Otherwise, a conforming application would have to assume that case
folding would occur when it was not wanted, but that it would not occur when it was wanted.</p>
<h4><a name="tag_21_04_10" id="tag_21_04_10"></a>A.4.10 Filename Portability</h4>
<p class="tent">Filenames should be constructed from the portable filename character set because the use of other characters can be
confusing or ambiguous in certain contexts. (For example, the use of a &lt;colon&gt; (<tt>':'</tt>) in a pathname could cause
ambiguity if that pathname were included in a <i>PATH</i> definition.)</p>
<p class="tent">The constraint on use of the &lt;hyphen-minus&gt; character as the first character of a portable filename is a
constraint on application behavior and not on implementations, since applications might not work as expected when such a filename
is passed as a command line argument.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0020 [584] is applied.</p>
<h4><a name="tag_21_04_11" id="tag_21_04_11"></a>A.4.11 File System Cache</h4>
<p class="tent">Earlier versions of this standard did not specify the behavior of <a href=
"../functions/aio_fsync.html"><i>aio_fsync</i>()</a>, <a href="../functions/fdatasync.html"><i>fdatasync</i>()</a>, or <a href=
"../functions/fsync.html"><i>fsync</i>()</a> on directories, nor did they specify constraints on the underlying storage in the
absence of calls to <a href="../functions/aio_fsync.html"><i>aio_fsync</i>()</a>, <a href=
"../functions/fdatasync.html"><i>fdatasync</i>()</a>, or <a href="../functions/fsync.html"><i>fsync</i>()</a>.</p>
<p class="tent">Although directory operations are atomic and serializable, they are not necessarily durable. An application that
requires a directory modification to be durable should use <a href="../functions/fdatasync.html"><i>fdatasync</i>()</a> or <a href=
"../functions/fsync.html"><i>fsync</i>()</a> (or <a href="../functions/aio_fsync.html"><i>aio_fsync</i>()</a>) on the directory.
However, the intention of the requirements for directory modifications is that most applications should not need to do this. For
example, a common method of updating a file is to create a new temporary file, call <a href=
"../functions/fdatasync.html"><i>fdatasync</i>()</a> or <a href="../functions/fsync.html"><i>fsync</i>()</a> to synchronize the new
file, and then use <a href="../functions/rename.html"><i>rename</i>()</a> to replace the old file with the new file. If a crash
occurs after the <a href="../functions/rename.html"><i>rename</i>()</a>, then the file being updated will have either its old
contents or its new contents on the storage device when the system is rebooted. An application needs to synchronize the directory
only if it wants to be sure the updated file will have its new contents on the storage device.</p>
<p class="tent">Some operations, such as <a href="../functions/rename.html"><i>rename</i>()</a>, can affect more than one
directory, whereas synchronization calls such as <a href="../functions/fsync.html"><i>fsync</i>()</a> can affect at most one
directory at a time. Two calls to <a href="../functions/fsync.html"><i>fsync</i>()</a> may be needed after a <a href=
"../functions/rename.html"><i>rename</i>()</a> to ensure its durability.</p>
<p class="tent">If the file system is inconsistent after a crash it is usually automatically checked and repaired when the system
is rebooted, or can be repaired manually using a utility such as <i>fsck</i>.</p>
<p class="tent">If an unrecoverable I/O error occurs when cache is transferred to storage, this standard provides no way for
applications to discover the error reliably. Implementations are encouraged to report such errors on subsequent reads of the
storage.</p>
<p class="tent">Austin Group Defect 672 is applied, adding this subsection.</p>
<h4><a name="tag_21_04_12" id="tag_21_04_12"></a>A.4.12 File Times Update</h4>
<p class="tent">This section reflects the actions of historical implementations. The times are not updated immediately, but are
only marked for update by the functions. An implementation may update these times immediately.</p>
<p class="tent">The accuracy of the time update values is intentionally left unspecified so that systems can control the bandwidth
of a possible covert channel.</p>
<p class="tent">The wording was carefully chosen to make it clear that there is no requirement that the conformance document
contain information that might incidentally affect file timestamps. Any function that performs pathname resolution might update
several last data access timestamps. Functions such as <a href="../functions/getpwnam.html"><i>getpwnam</i>()</a> and <a href=
"../functions/getgrnam.html"><i>getgrnam</i>()</a> might update the last data access timestamp of some specific file or files. It
is intended that these are not required to be documented in the conformance document, but they should appear in the system
documentation.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0021 [626] is applied.</p>
<h4><a name="tag_21_04_13" id="tag_21_04_13"></a>A.4.13 Host and Network Byte Order</h4>
<p class="tent">There is no additional rationale provided for this section.</p>
<h4><a name="tag_21_04_14" id="tag_21_04_14"></a>A.4.14 Measurement of Execution Time</h4>
<p class="tent">The methods used to measure the execution time of processes and threads, and the precision of these measurements,
may vary considerably depending on the software architecture of the implementation, and on the underlying hardware. Implementations
can also make tradeoffs between the scheduling overhead and the precision of the execution time measurements. POSIX.1-2024 does not
impose any requirement on the accuracy of the execution time; it instead specifies that the measurement mechanism and its precision
are implementation-defined.</p>
<h4><a name="tag_21_04_15" id="tag_21_04_15"></a>A.4.15 Memory Ordering and Synchronization</h4>
<p class="tent">Austin Group Defect 1302 is applied, adding the <i>Memory Ordering</i> subsection, adapted from the
ISO/IEC&nbsp;9899:2018 standard.</p>
<h5 class="header4"><a name="tag_21_04_15_01" id="tag_21_04_15_01"></a>A.4.15.1 Memory Ordering</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_04_15_02" id="tag_21_04_15_02"></a>A.4.15.2 Memory Synchronization</h5>
<p class="tent">In older multi-processors, access to memory by the processors was strictly multiplexed. This meant that a processor
executing program code interrogates or modifies memory in the order specified by the code and that all the memory operation of all
the processors in the system appear to happen in some global order, though the operation histories of different processors are
interleaved arbitrarily. The memory operations of such machines are said to be sequentially consistent. In this environment,
threads can synchronize using ordinary memory operations. For example, a producer thread and a consumer thread can synchronize
access to a circular data buffer as follows:</p>
<pre>
<tt>int rdptr = 0;
int wrptr = 0;
data_t buf[BUFSIZE];
<br class="tent">
Thread 1:
    while (work_to_do) {
        int next;
<br class="tent">
        buf[wrptr] = produce();
        next = (wrptr + 1) % BUFSIZE;
        while (rdptr == next)
            ;
        wrptr = next;
}
<br class="tent">
Thread 2:
    while (work_to_do) {
        while (rdptr == wrptr)
            ;
        consume(buf[rdptr]);
        rdptr = (rdptr + 1) % BUFSIZE;
    }
</tt></pre>
<p class="tent">In modern multi-processors, these conditions are relaxed to achieve greater performance. If one processor stores
values in location A and then location B, then other processors loading data from location B and then location A may see the new
value of B but the old value of A. The memory operations of such machines are said to be weakly ordered. On these machines, the
circular buffer technique shown in the example will fail because the consumer may see the new value of <i>wrptr</i> but the old
value of the data in the buffer. In such machines, synchronization can only be achieved through the use of special instructions
that enforce an order on memory operations. Most high-level language compilers only generate ordinary memory operations to take
advantage of the increased performance. They usually cannot determine when memory operation order is important and generate the
special ordering instructions. Instead, they rely on the programmer to use synchronization primitives correctly to ensure that
modifications to a location in memory are ordered with respect to modifications and/or access to the same location in other
threads. Access to read-only data need not be synchronized. The resulting program is said to be data race-free.</p>
<p class="tent">Synchronization is still important even when accessing a single primitive variable (for example, an integer). On
machines where the integer may not be aligned to the bus data width or be larger than the data width, a single memory load may
require multiple memory cycles. This means that it may be possible for some parts of the integer to have an old value while other
parts have a newer value. On some processor architectures this cannot happen, but portable programs cannot rely on this.</p>
<p class="tent">In summary, a portable multi-threaded program, or a multi-process program that shares writable memory between
processes, has to use the synchronization primitives to synchronize data access. It cannot rely on modifications to memory being
observed by other threads in the order written in the application or even on modification of a single variable being seen
atomically.</p>
<p class="tent">Conforming applications may only use the functions listed to synchronize threads of control with respect to memory
access. There are many other candidates for functions that might also be used. Examples are: signal sending and reception, or pipe
writing and reading. In general, any function that allows one thread of control to wait for an action caused by another thread of
control is a candidate. POSIX.1-2024 does not require these additional functions to synchronize memory access since this would
imply the following:</p>
<ul>
<li class="tent">All these functions would have to be recognized by advanced compilation systems so that memory operations and
calls to these functions are not reordered by optimization.</li>
<li class="tent">All these functions would potentially have to have memory synchronization instructions added, depending on the
particular machine.</li>
<li class="tent">The additional functions complicate the model of how memory is synchronized and make automatic data race detection
techniques impractical.</li>
</ul>
<p class="tent">Formal definitions of the memory model were rejected as unreadable by the vast majority of programmers. In
addition, most of the formal work in the literature has concentrated on the memory as provided by the hardware as opposed to the
application programmer through the compiler and runtime system. It was believed that a simple statement intuitive to most
programmers would be most effective. POSIX.1-2024 defines functions that can be used to synchronize access to memory, but it leaves
open exactly how one relates those functions to the semantics of each function as specified elsewhere in POSIX.1-2024. POSIX.1-2024
also does not make a formal specification of the partial ordering in time that the functions can impose, as that is implied in the
description of the semantics of each function. It simply states that the programmer has to ensure that modifications do not occur
&quot;simultaneously&quot; with other access to a memory location.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;1-2002, item XBD/TC1/D6/4 is applied, adding a new paragraph beneath the
table of functions: &quot;The <a href="../functions/pthread_once.html"><i>pthread_once</i>()</a> function shall synchronize memory for
the first call in each thread for a given <b>pthread_once_t</b> object.&quot;.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0022 [863] is applied.</p>
<p class="tent">Austin Group Defect 1216 is applied, adding <a href=
"../functions/pthread_cond_clockwait.html"><i>pthread_cond_clockwait</i>()</a>, <a href=
"../functions/pthread_mutex_clocklock.html"><i>pthread_mutex_clocklock</i>()</a>, <a href=
"../functions/pthread_rwlock_clockrdlock.html"><i>pthread_rwlock_clockrdlock</i>()</a>, <a href=
"../functions/pthread_rwlock_clockwrlock.html"><i>pthread_rwlock_clockwrlock</i>()</a>, and <a href=
"../functions/sem_clockwait.html"><i>sem_clockwait</i>()</a> to the list of functions that synchronize memory.</p>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<p class="tent">Austin Group Defect 1426 is applied, clarifying under what conditions the functions named in this section are
required to synchronize memory, and adding <a href=
"../functions/pthread_mutex_setprioceiling.html"><i>pthread_mutex_setprioceiling</i>()</a> to the named functions.</p>
<p class="tent">Austin Group Defect 1625 is applied, adding <a href="../functions/waitid.html"><i>waitid</i>()</a> to the list of
functions that synchronize memory with respect to other threads on all successful calls.</p>
<h4><a name="tag_21_04_16" id="tag_21_04_16"></a>A.4.16 Pathname Resolution</h4>
<p class="tent">It is necessary to differentiate between the definition of pathname and the concept of pathname resolution with
respect to the handling of trailing &lt;slash&gt; characters. By specifying the behavior here, it is not possible to provide an
implementation that is conforming but extends all interfaces that handle pathnames to also handle strings that are not legal
pathnames (because they have trailing &lt;slash&gt; characters).</p>
<p class="tent">Pathnames that end with one or more trailing &lt;slash&gt; characters must refer to directory paths. Earlier
versions of this standard were not specific about the distinction between trailing &lt;slash&gt; characters on files and
directories, and both were permitted.</p>
<p class="tent">Two types of implementation have been prevalent; those that ignored trailing &lt;slash&gt; characters on all
pathnames regardless, and those that permitted them only on existing directories.</p>
<p class="tent">An earlier version of this standard required that a pathname with a trailing &lt;slash&gt; character be treated as
if it had a trailing <tt>"/."</tt> everywhere. This specification was ambiguous. In situations where the intent was that the
application wanted to require the implementation to accept the pathname only if it named a directory (existing or to be created as
a result of the call performing pathname resolution), literally adding a <tt>'.'</tt> after the trailing &lt;slash&gt; could be
interpreted to require use of that pathname to fail. Some of the uses that created ambiguous requirements included
<i>mkdir</i>("<i>newdir</i>/") and <i>rmdir</i>("<i>existing-dir</i>/"). POSIX.1-2024 requires that a pathname with a trailing
&lt;slash&gt; be rejected unless it refers to a file that is a directory or to a file that is to be created as a directory. The
<a href="../functions/rename.html"><i>rename</i>()</a> function and the <a href="../utilities/mv.html"><i>mv</i></a> utility
further specify that a trailing &lt;slash&gt; cannot be used on a pathname naming a file that does not exist when used as the last
argument to <a href="../functions/rename.html"><i>rename</i>()</a> or <a href="../functions/renameat.html"><i>renameat</i>()</a>,
or as the last operand to <a href="../utilities/mv.html"><i>mv</i></a>.</p>
<p class="tent">Note that this change does not break any conforming applications; since there were two different types of
implementation, no application could have portably depended on either behavior. This change does however require some
implementations to be altered to remain compliant. Substantial discussion over a three-year period has shown that the benefits to
application developers outweighs the disadvantages for some vendors.</p>
<p class="tent">On a historical note, some early applications automatically appended a <tt>'/'</tt> to every path. Rather than fix
the applications, the system implementation was modified to accept this behavior by ignoring any trailing &lt;slash&gt;.</p>
<p class="tent">Each directory has exactly one parent directory which is represented by the name <b>dot-dot</b> in the first
directory. No other directory, regardless of linkages established by symbolic links, is considered the parent directory by
POSIX.1-2024.</p>
<p class="tent">There are two general categories of interfaces involving pathname resolution: those that follow the symbolic link,
and those that do not. There are several exceptions to this rule; for example, <i>open</i>(<i>path</i>,O_CREAT|O_EXCL) will fail
when <i>path</i> names a symbolic link. However, in all other situations, the <a href="../functions/open.html"><i>open</i>()</a>
function will follow the link.</p>
<p class="tent">What the filename <b>dot-dot</b> refers to relative to the root directory is implementation-defined. In
Version&nbsp;7 it refers to the root directory itself; this is the behavior mentioned in POSIX.1-2024. In some networked systems
the construction <b>/../hostname/</b> is used to refer to the root directory of another host, and POSIX.1 permits this
behavior.</p>
<p class="tent">Other networked systems use the construct <b>//hostname</b> for the same purpose; that is, a double initial
&lt;slash&gt; is used. There is a potential problem with existing applications that create full pathnames by taking a trunk and a
relative pathname and making them into a single string separated by <tt>'/'</tt>, because they can accidentally create networked
pathnames when the trunk is <tt>'/'</tt>. This practice is not prohibited because such applications can be made to conform by
simply changing to use <tt>"//"</tt> as a separator instead of <tt>'/'</tt>:</p>
<ul>
<li class="tent">If the trunk is <tt>'/'</tt>, the full pathname will begin with <tt>"///"</tt> (the initial <tt>'/'</tt> and the
separator <tt>"//"</tt>). This is the same as <tt>'/'</tt>, which is what is desired. (This is the general case of making a
relative pathname into an absolute one by prefixing with <tt>"///"</tt> instead of <tt>'/'</tt>.)</li>
<li class="tent">If the trunk is <tt>"/A"</tt>, the result is <tt>"/A//..."</tt>; since non-leading sequences of two or more
&lt;slash&gt; characters are treated as a single &lt;slash&gt;, this is equivalent to the desired <tt>"/A/..."</tt>.</li>
<li class="tent">If the trunk is <tt>"//A"</tt>, the implementation-defined semantics will apply. (The multiple &lt;slash&gt; rule
would apply.)</li>
</ul>
<p class="tent">Application developers should avoid generating pathnames that start with <tt>"//"</tt>. Implementations are
strongly encouraged to avoid using this special interpretation since a number of applications currently do not follow this practice
and may inadvertently generate <tt>"//..."</tt>.</p>
<p class="tent">The term &quot;root directory&quot; is only defined in POSIX.1 relative to the process. In some implementations, there may
be no absolute root directory. The initialization of the root directory of a process is implementation-defined.</p>
<p class="tent">When the standard says: &quot;Pathname resolution for a given pathname shall yield the same results when used by any
interface in POSIX.1-2024 as long as there are no changes to any files evaluated during pathname resolution for the given pathname
between resolutions&quot;, this applies to absolute pathnames or to relative pathnames from the same current working directory. Using
the same relative pathname from two different working directories may yield different results.</p>
<p class="tent">Earlier versions of this standard were unclear as to whether a pathname was required to be a character string or
just a string. This standard is now clear that filenames are just strings, and that pathname processing is locale-independent.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0023 [541,649,825] and XBD/TC2-2008/0024 [825] are applied.</p>
<p class="tent">Austin Group Defect 1603 is applied, making a wording improvement related to symbolic links to directories.</p>
<h4><a name="tag_21_04_17" id="tag_21_04_17"></a>A.4.17 Process ID Reuse</h4>
<p class="tent">There is no additional rationale provided for this section.</p>
<h4><a name="tag_21_04_18" id="tag_21_04_18"></a>A.4.18 Scheduling Policy</h4>
<p class="tent">There is no additional rationale provided for this section.</p>
<h4><a name="tag_21_04_19" id="tag_21_04_19"></a>A.4.19 Seconds Since the Epoch</h4>
<p class="tent">Coordinated Universal Time (UTC) includes leap seconds. However, in POSIX time (seconds since the Epoch), leap
seconds are ignored (not applied) to provide an easy and compatible method of computing time differences. Broken-down POSIX time is
therefore not necessarily UTC, despite its appearance.</p>
<p class="tent">As of December 2007, 23 leap seconds had been added to UTC since the Epoch, 1 January, 1970. Historically, one leap
second is added every 15 months on average, so this offset can be expected to grow with time.</p>
<p class="tent">Most systems' notion of &quot;time&quot; is that of a continuously increasing value, so this value should increase even
during leap seconds. However, not only do most systems not keep track of leap seconds, but most systems are probably not
synchronized to any standard time reference. Therefore, it is inappropriate to require that a time represented as seconds since the
Epoch precisely represent the number of seconds between the referenced time and the Epoch.</p>
<p class="tent">It is sufficient to require that applications be allowed to treat this time as if it represented the number of
seconds between the referenced time and the Epoch. It is the responsibility of the vendor of the system, and the administrator of
the system, to ensure that this value represents the number of seconds between the referenced time and the Epoch as closely as
necessary for the application being run on that system.</p>
<p class="tent">It is important that the interpretation of time names and seconds since the Epoch values be consistent across
conforming systems; that is, it is important that all conforming systems interpret &quot;536457599 seconds since the Epoch&quot; as 59
seconds, 59 minutes, 23 hours 31 December 1986, regardless of the accuracy of the system's idea of the current time. The expression
is given to ensure a consistent interpretation, not to attempt to specify the calendar. The relationship between <i>tm_yday</i> and
the day of week, day of month, and month is in accordance with the Gregorian calendar, and so is not specified in POSIX.1.</p>
<p class="tent">Consistent interpretation of seconds since the Epoch can be critical to certain types of distributed applications
that rely on such timestamps to synchronize events. The accrual of leap seconds in a time standard is not predictable. The number
of leap seconds since the Epoch will likely increase. POSIX.1 is more concerned about the synchronization of time between
applications of astronomically short duration.</p>
<p class="tent">Note that <i>tm_yday</i> is zero-based, not one-based, so the day number in the example above is 364. Note also
that the division is an integer division (discarding remainder) as in the C language.</p>
<p class="tent">Note also that the meaning of <a href="../functions/gmtime.html"><i>gmtime</i>()</a>, <a href=
"../functions/localtime.html"><i>localtime</i>()</a>, and <a href="../functions/mktime.html"><i>mktime</i>()</a> is specified in
terms of this expression. However, the ISO&nbsp;C standard computes <i>tm_yday</i> from <i>tm_mday</i>, <i>tm_mon</i>, and
<i>tm_year</i> in <a href="../functions/mktime.html"><i>mktime</i>()</a>. Because it is stated as a (bidirectional) relationship,
not a function, and because the conversion between month-day-year and day-of-year dates is presumed well known and is also a
relationship, this is not a problem.</p>
<p class="tent">The number of seconds since the epoch overflows a signed 32-bit integer in 2038. This standard requires that
<b>time_t</b> is an integer type with a width of at least 64 bits (in conforming programming environments). The requirement that
<b>time_t</b> is an integer type is an additional constraint beyond the ISO&nbsp;C standard, which allows a real-floating
<b>time_t</b>. Implementation practice has shown that much existing code is unprepared to deal with a floating-point <b>time_t</b>,
and that use of <b>struct timespec</b> is a more uniform way to provide sub-second time manipulation within applications.</p>
<p class="tent">See also <a href="#tag_21_03_00_33">Epoch</a>.</p>
<p class="tent">The topic of whether seconds since the Epoch should account for leap seconds has been debated on a number of
occasions, and each time consensus was reached (with acknowledged dissent each time) that the majority of users are best served by
treating all days identically. (That is, the majority of applications were judged to assume a single length—as measured in seconds
since the Epoch—for all days. Thus, leap seconds are not applied to seconds since the Epoch.) Those applications which do care
about leap seconds can determine how to handle them in whatever way those applications feel is best. This was particularly
emphasized because there was disagreement about what the best way of handling leap seconds might be. It is a practical
impossibility to mandate that a conforming implementation must have a fixed relationship to any particular official clock (consider
isolated systems, or systems performing &quot;reruns&quot; by setting the clock to some arbitrary time).</p>
<p class="tent">Note that as a practical consequence of this, the length of a second as measured by some external standard is not
specified. This unspecified second is nominally equal to an International System (SI) second in duration. Applications must be
matched to a system that provides the particular handling of external time in the way required by the application.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/12 is applied, making an editorial correction to
the paragraph commencing &quot;How any changes to the value of seconds ...&quot;.</p>
<p class="tent">Austin Group Defect 1627 is applied, clarifying that the relationship between the actual date and time in
Coordinated Universal Time, as determined by the International Earth Rotation Service, and the system's current value for seconds
since the Epoch is unspecified.</p>
<h4><a name="tag_21_04_20" id="tag_21_04_20"></a>A.4.20 Semaphore</h4>
<p class="tent">Austin Group Defect 502 is applied, clarifying the range of values that an XSI semaphore can have.</p>
<p class="tent">Austin Group Defect 1116 is applied, removing a reference to the Semaphores option that existed in earlier versions
of this standard.</p>
<h4><a name="tag_21_04_21" id="tag_21_04_21"></a>A.4.21 Special Device Drivers</h4>
<p class="tent">POSIX systems interact with their physical environment using a variety of devices (such as analog-digital
converters, digital-analog converters, counters, and video graphic equipment), which provide a set of services that cannot be fully
utilized in terms of read and/or write semantics. Traditional practice uses a single function, called <i>ioctl</i>(), to
encapsulate all the control operations on the different devices connected to the system, both special or common devices. The
POSIX.1-1988 standard developers decided not to standardize this interface because it was not type safe, it had a variable number
of parameters, and it had behaviors that could not be specified by the standard because they were driver-dependent. Instead, the
POSIX.1-1988 standard defined a device-specific application program interface (API) for a common class of drivers, Terminals.
Later, The Single UNIX Specification, Version 1 included the <i>ioctl</i>() function, but restricted it to control of STREAMS
devices.</p>
<p class="tent">Although the POSIX.1-1988 standard's solution for common classes of devices is the best from the point of view of
application portability, there is still a need for a way to interact with special, or even common devices, for which developing a
full standard API is not practical. The device control option standardized in POSIX.26 and now included in this standard is a
general method for interfacing to the widest possible range of devices, through a new service to pass control information and
commands between the application and the device drivers.</p>
<p class="tent">A driver for a special device will normally not be portable between POSIX implementations, but an application that
uses such a driver can be made portable if all functions calling the driver are well defined and standardized. Users and
integrators of realtime systems often add drivers for special devices, and a standardized function format for interfacing with
these devices greatly simplifies this process.</p>
<p class="tent">Austin Group Defect 729 is applied, adding this subsection.</p>
<h4><a name="tag_21_04_22" id="tag_21_04_22"></a>A.4.22 Thread-Safety</h4>
<p class="tent">Where the interface of a function required by POSIX.1-2024 precludes thread-safety, an alternate thread-safe form
is provided. The names of these thread-safe forms are the same as the non-thread-safe forms with the addition of the suffix &quot;_r&quot;.
The suffix &quot;_r&quot; is historical, where the <tt>'r'</tt> stood for &quot;reentrant&quot;.</p>
<p class="tent">In some cases, thread-safety is provided by restricting the arguments to an existing function.</p>
<p class="tent">See also <a href="../xrat/V4_xsh_chap01.html#tag_22_02_09_09"><i>B.2.9.1 Thread-Safety</i></a>.</p>
<h4><a name="tag_21_04_23" id="tag_21_04_23"></a>A.4.23 Treatment of Error Conditions for Mathematical Functions</h4>
<p class="tent">It is intended that undeserved underflow and inexact floating-point exceptions are raised only if avoiding them
would be too costly.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0025 [543] is applied.</p>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h4><a name="tag_21_04_24" id="tag_21_04_24"></a>A.4.24 Treatment of NaN Arguments for Mathematical Functions</h4>
<p class="tent">There is no additional rationale provided for this section.</p>
<h4><a name="tag_21_04_25" id="tag_21_04_25"></a>A.4.25 Utility</h4>
<p class="tent">There is no additional rationale provided for this section.</p>
<h4><a name="tag_21_04_26" id="tag_21_04_26"></a>A.4.26 Variable Assignment</h4>
<p class="tent">Austin Group Defect 351 is applied, adding a requirement relating to declaration utilities.</p>
<h3><a name="tag_21_05" id="tag_21_05"></a>A.5 File Format Notation</h3>
<p class="tent">The notation for spaces allows some flexibility for application output. Note that an empty character position in
<i>format</i> represents one or more &lt;blank&gt; characters on the output (not <i>white space</i>, which can include
&lt;newline&gt; characters). Therefore, another utility that reads that output as its input must be prepared to parse the data
using <a href="../functions/scanf.html"><i>scanf</i>()</a>, <a href="../utilities/awk.html"><i>awk</i></a>, and so on. The
<tt>'Δ'</tt> character is used when exactly one &lt;space&gt; is output.</p>
<p class="tent">The treatment of integers and spaces is different from the <a href="../functions/printf.html"><i>printf</i>()</a>
function in that they can be surrounded with &lt;blank&gt; characters. This was done so that, given a format such as:</p>
<pre>
<tt>"%d\n",&lt;</tt><i>foo</i><tt>&gt;
</tt></pre>
<p class="tent">the implementation could use a <a href="../functions/printf.html"><i>printf</i>()</a> call such as:</p>
<pre>
<tt>printf("%6d\n", foo);
</tt></pre>
<p class="tent">and still conform. This notation is thus somewhat like <a href="../functions/scanf.html"><i>scanf</i>()</a> in
addition to <a href="../functions/printf.html"><i>printf</i>()</a>.</p>
<p class="tent">The <a href="../functions/printf.html"><i>printf</i>()</a> function was chosen as a model because most of the
standard developers were familiar with it. One difference from the C function <a href=
"../functions/printf.html"><i>printf</i>()</a> is that the <tt>l</tt> and <tt>h</tt> conversion specifier characters are not used.
As expressed by the Shell and Utilities volume of POSIX.1-2024, there is no differentiation between decimal values for type
<b>int</b>, type <b>long</b>, or type <b>short</b>. The conversion specifications <tt>%d</tt> or <tt>%i</tt> should be interpreted
as an arbitrary length sequence of digits. Also, no distinction is made between single precision and double precision numbers
(<b>float</b> or <b>double</b> in C). These are simply referred to as floating-point numbers.</p>
<p class="tent">Many of the output descriptions in the Shell and Utilities volume of POSIX.1-2024 use the term &quot;line&quot;, such
as:</p>
<pre>
<tt>"%s", &lt;input line&gt;
</tt></pre>
<p class="tent">Since the definition of <i>line</i> includes the trailing &lt;newline&gt; already, there is no need to include a
<tt>'\n'</tt> in the format; a double &lt;newline&gt; would otherwise result.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0026 [584] is applied.</p>
<p class="tent">Austin Group Defect 1205 is applied, changing the description of the <tt>%</tt> conversion specifier.</p>
<p class="tent">Austin Group Defect 1687 is applied, clarifying the references to &lt;blank&gt; characters to specify they are from
the portable character set.</p>
<h3><a name="tag_21_06" id="tag_21_06"></a>A.6 Character Set</h3>
<h4><a name="tag_21_06_01" id="tag_21_06_01"></a>A.6.1 Portable Character Set</h4>
<p class="tent">The portable character set is listed in full so there is no dependency on the ISO/IEC&nbsp;646:1991 standard (or
historically ASCII) encoded character set, although the set is identical to the characters defined in the International Reference
version of the ISO/IEC&nbsp;646:1991 standard.</p>
<p class="tent">POSIX.1-2024 poses no requirement that multiple character sets or codesets be supported, leaving this as a
marketing differentiation for implementors. Although multiple charmap files are supported, it is the responsibility of the
implementation to provide the file(s); if only one is provided, only that one will be accessible using the <a href=
"../utilities/localedef.html"><i>localedef</i></a> <b>-f</b> option.</p>
<p class="tent">The statement about invariance in codesets for the portable character set is worded to avoid precluding
implementations where multiple incompatible codesets are available (for instance, ASCII and EBCDIC). The standard utilities cannot
be expected to produce predictable results if they access portable characters that vary on the same implementation.</p>
<p class="tent">Not all character sets need include the portable character set, but each locale must include it. For example, a
Japanese-based locale might be supported by a mixture of character sets: JIS&nbsp;X&nbsp;0201 Roman (a Japanese version of the
ISO/IEC&nbsp;646:1991 standard), JIS&nbsp;X&nbsp;0208, and JIS&nbsp;X&nbsp;0201 Katakana. Not all of these character sets include
the portable characters, but at least one does (JIS&nbsp;X&nbsp;0201 Roman).</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0027 [584,967] and XBD/TC2-2008/0028 [745] are applied.</p>
<h4><a name="tag_21_06_02" id="tag_21_06_02"></a>A.6.2 Character Encoding</h4>
<p class="tent">Encoding mechanisms based on single shifts, such as the EUC encoding used in some Asian and other countries, can be
supported via the current charmap mechanism. With single-shift encoding, each character is preceded by a shift code (SS2 or SS3). A
complete EUC code, consisting of the portable character set (G0) and up to three additional character sets (G1, G2, G3), can be
described using the current charmap mechanism; the encoding for each character in additional character sets G2 and G3 must then
include their single-shift code. Other mechanisms to support locales based on encoding mechanisms such as locking shift are not
addressed by this volume of POSIX.1-2024.</p>
<p class="tent">The encodings for &lt;slash&gt; and &lt;period&gt; are required to be the same across all locales, in part because
pathname resolution requires recognition of these bytes. It is a fortunate accident that all common shift-based encodings did not
use either &lt;slash&gt; or &lt;period&gt; as a valid second byte in a multi-byte character.</p>
<p class="tent">The encodings for &lt;newline&gt; and &lt;carriage-return&gt; are required to be the same across all locales since
they are special to the general terminal interface and cannot be changed (see XBD <a href=
"../basedefs/V1_chap11.html#tag_11_01_09"><i>11.1.9 Special Characters</i></a>).</p>
<p class="tent">Earlier versions of this standard did not state the requirement that the POSIX locale contains 256 single-byte
characters. This was an oversight; the intention was always that the POSIX locale should have an 8-bit-clean single-byte
encoding.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0029 [663,967] and XBD/TC2-2008/0030 [745] are applied.</p>
<h4><a name="tag_21_06_03" id="tag_21_06_03"></a>A.6.3 C Language Wide-Character Codes</h4>
<p class="tent">The standard does not specify how wide characters are encoded or provide a method for defining wide characters in a
charmap. It specifies ways of translating between wide characters and multi-byte characters. The standard does not prevent an
extension from providing a method to define wide characters.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/13 is applied, adding a statement that the standard
has no means of defining a wide-character codeset.</p>
<p class="tent">Austin Group Defect 1302 is applied, aligning this section with the ISO/IEC&nbsp;9899:2018 standard.</p>
<h4><a name="tag_21_06_04" id="tag_21_06_04"></a>A.6.4 Character Set Description File</h4>
<p class="tent">IEEE PASC Interpretation 1003.2 #196 is applied, removing three lines of text dealing with ranges of symbolic names
using position constant values which had been erroneously included in the final IEEE&nbsp;P1003.2b draft standard.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/14 is applied, correcting the example and adding a
statement that the standard provides no means of defining a wide-character codeset.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/15 is applied, allowing the value zero for the
width value of <b>WIDTH</b> and <b>WIDTH_DEFAULT</b>. This is required to cover some existing locales.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0031 [967] is applied.</p>
<h5 class="header4"><a name="tag_21_06_04_01" id="tag_21_06_04_01"></a>A.6.4.1 State-Dependent Character Encodings</h5>
<p class="tent">A requirement was considered that would force utilities to eliminate any redundant locking shifts, but this was
left as a quality of implementation issue.</p>
<p class="tent">This change satisfies the following requirement from the ISO&nbsp;POSIX-2:1993 standard, Annex H.1:</p>
<blockquote><i>The support of state-dependent (shift encoding) character sets should be addressed fully. See descriptions of these
in XBD <a href="../basedefs/V1_chap06.html#tag_06_02"><i>6.2 Character Encoding</i></a>. If such character encodings are
supported, it is expected that this will impact XBD <a href="../basedefs/V1_chap06.html#tag_06_02"><i>6.2 Character
Encoding</i></a>, <a href="../basedefs/V1_chap07.html#tag_07"><i>7. Locale</i></a>, <a href=
"../basedefs/V1_chap09.html#tag_09"><i>9. Regular Expressions</i></a>, and the <a href="../utilities/comm.html"><i>comm</i></a>,
<a href="../utilities/cut.html"><i>cut</i></a>, <a href="../utilities/diff.html"><i>diff</i></a>, <a href=
"../utilities/grep.html"><i>grep</i></a>, <a href="../utilities/head.html"><i>head</i></a>, <a href=
"../utilities/join.html"><i>join</i></a>, <a href="../utilities/paste.html"><i>paste</i></a>, and <a href=
"../utilities/tail.html"><i>tail</i></a> utilities.</i></blockquote>
<p class="tent">The character set description file provides:</p>
<ul>
<li class="tent">The capability to describe character set attributes (such as collation order or character classes) independent of
character set encoding, and using only the characters in the portable character set. This makes it possible to create generic
<a href="../utilities/localedef.html"><i>localedef</i></a> source files for all codesets that share the portable character set
(such as the ISO&nbsp;8859 family or IBM Extended ASCII).</li>
<li class="tent">Standardized symbolic names for all characters in the portable character set, making it possible to refer to any
such character regardless of encoding.</li>
</ul>
<p class="tent">Implementations are free to choose their own symbolic names, as long as the names identified by the Base
Definitions volume of POSIX.1-2024 are also defined; this provides support for already existing &quot;character names&quot;.</p>
<p class="tent">The names selected for the members of the portable character set follow the ISO/IEC&nbsp;8859-1:1998 standard and
the ISO/IEC&nbsp;10646-1:2020 standard. However, several commonly used UNIX system names occur as synonyms in the list:</p>
<ul>
<li class="tent">The historical UNIX system names are used for control characters.</li>
<li class="tent">The word &quot;slash&quot; is given in addition to &quot;solidus&quot;.</li>
<li class="tent">The word &quot;backslash&quot; is given in addition to &quot;reverse-solidus&quot;.</li>
<li class="tent">The word &quot;hyphen&quot; is given in addition to &quot;hyphen-minus&quot;.</li>
<li class="tent">The word &quot;period&quot; is given in addition to &quot;full-stop&quot;.</li>
<li class="tent">For digits, the word &quot;digit&quot; is eliminated.</li>
<li class="tent">For letters, the words &quot;Latin Capital Letter&quot; and &quot;Latin Small Letter&quot; are eliminated.</li>
<li class="tent">The words &quot;left brace&quot; and &quot;right brace&quot; are given in addition to &quot;left-curly-bracket&quot; and
&quot;right-curly-bracket&quot;.</li>
<li class="tent">The names of the digits are preferred over the numbers to avoid possible confusion between <tt>'0'</tt> and
<tt>'O'</tt>, and between <tt>'1'</tt> and <tt>'l'</tt> (one and the letter ell).</li>
</ul>
<p class="tent">The names for the control characters in XBD <a href="../basedefs/V1_chap06.html#tag_06"><i>6. Character Set</i></a>
were taken from the ISO/IEC&nbsp;4873:1991 standard.</p>
<p class="tent">The charmap file was introduced to resolve problems with the portability of, especially, <a href=
"../utilities/localedef.html"><i>localedef</i></a> sources. POSIX.1-2024 assumes that the portable character set is constant across
all locales, but does not prohibit implementations from supporting two incompatible codings, such as both ASCII and EBCDIC. Such
dual-support implementations should have all charmaps and <a href="../utilities/localedef.html"><i>localedef</i></a> sources
encoded using one portable character set, in effect cross-compiling for the other environment. Naturally, charmaps (and <a href=
"../utilities/localedef.html"><i>localedef</i></a> sources) are only portable without transformation between systems using the same
encodings for the portable character set. They can, however, be transformed between two sets using only a subset of the actual
characters (the portable character set). However, the particular coded character set used for an application or an implementation
does not necessarily imply different characteristics or collation; on the contrary, these attributes should in many cases be
identical, regardless of codeset. The charmap provides the capability to define a common locale definition for multiple codesets
(the same <a href="../utilities/localedef.html"><i>localedef</i></a> source can be used for codesets with different extended
characters; the ability in the charmap to define empty names allows for characters missing in certain codesets).</p>
<p class="tent">The <b>&lt;escape_char&gt;</b> declaration was added at the request of the international community to ease the
creation of portable charmap files on terminals not implementing the default &lt;backslash&gt;-escape. The
<b>&lt;comment_char&gt;</b> declaration was added at the request of the international community to eliminate the potential
confusion between the &lt;number-sign&gt; and the hash sign.</p>
<p class="tent">The octal number notation with no leading zero required was selected to match those of <a href=
"../utilities/awk.html"><i>awk</i></a> and <a href="../utilities/tr.html"><i>tr</i></a> and is consistent with that used by
<a href="../utilities/localedef.html"><i>localedef</i></a>. To avoid confusion between an octal constant and the back-references
used in <a href="../utilities/localedef.html"><i>localedef</i></a> source, the octal, hexadecimal, and decimal constants must
contain at least two digits. As single-digit constants are relatively rare, this should not impose any significant hardship.
Provision is made for more digits to account for systems in which the byte size is larger than 8 bits. For example, a Unicode
(ISO/IEC&nbsp;10646-1:2020 standard) system that has defined 16-bit bytes may require six octal, four hexadecimal, and five decimal
digits.</p>
<p class="tent">The decimal notation is supported because some newer international standards define character values in decimal,
rather than in the old column/row notation.</p>
<p class="tent">The charmap identifies the coded character sets supported by an implementation. At least one charmap must be
provided, but no implementation is required to provide more than one. Likewise, implementations can allow users to generate new
charmaps (for instance, for a new version of the ISO&nbsp;8859 family of coded character sets), but does not have to do so. If
users are allowed to create new charmaps, the system documentation describes the rules that apply (for instance, &quot;only coded
character sets that are supersets of the ISO/IEC&nbsp;646:1991 standard IRV, no multi-byte characters&quot;).</p>
<p class="tent">This addition of the <b>WIDTH</b> specification satisfies the following requirement from the ISO&nbsp;POSIX-2:1993
standard, Annex H.1:</p>
<blockquote>
<dl compact>
<dd></dd>
<dt>(9)</dt>
<dd><i>The definition of column position relies on the implementation's knowledge of the integral width of the characters. The
charmap or LC_CTYPE locale definitions should be enhanced to allow application specification of these widths.</i></dd>
</dl>
</blockquote>
<p class="tent">The character &quot;width&quot; information was first considered for inclusion under <i>LC_CTYPE</i> but was moved because
it is more closely associated with the information in the charmap than information in the locale source (cultural conventions
information). Concerns were raised that formalizing this type of information is moving the locale source definition from the
codeset-independent entity that it was designed to be to a repository of codeset-specific information. A similar issue occurred
with the <b>&lt;code_set_name&gt;</b>, <b>&lt;mb_cur_max&gt;</b>, and <b>&lt;mb_cur_min&gt;</b> information, which was resolved to
reside in the charmap definition.</p>
<p class="tent">The width definition was added to the IEEE&nbsp;P1003.2b draft standard with the intent that the <a href=
"../functions/wcswidth.html"><i>wcswidth</i>()</a> and/or <a href="../functions/wcwidth.html"><i>wcwidth</i>()</a> functions
(currently specified in the System Interfaces volume of POSIX.1-2024) be the mechanism to retrieve the character width
information.</p>
<h3><a name="tag_21_07" id="tag_21_07"></a>A.7 Locale</h3>
<h4><a name="tag_21_07_01" id="tag_21_07_01"></a>A.7.1 General</h4>
<p class="tent">The description of locales is based on work performed in the UniForum Technical Committee, Subcommittee on
Internationalization. Wherever appropriate, keywords are taken from the ISO&nbsp;C standard or the X/Open Portability Guide.</p>
<p class="tent">The value used to specify a locale with environment variables is the name specified as the <i>name</i> operand to
the <a href="../utilities/localedef.html"><i>localedef</i></a> utility when the locale was created. This provides a verifiable
method to create and invoke a locale.</p>
<p class="tent">The &quot;object&quot; definitions need not be portable, as long as &quot;source&quot; definitions are. Strictly speaking, source
definitions are portable only between implementations using the same character set(s). Such source definitions, if they use
symbolic names only, easily can be ported between systems using different codesets, as long as the characters in the portable
character set (see XBD <a href="../basedefs/V1_chap06.html#tag_06_01"><i>6.1 Portable Character Set</i></a>) have common values
between the codesets; this is frequently the case in historical implementations. Of source, this requires that the symbolic names
used for characters outside the portable character set be identical between character sets. The definition of symbolic names for
characters is outside the scope of POSIX.1-2024, but is certainly within the scope of other standards organizations.</p>
<p class="tent">Applications can select the desired locale by invoking the <a href=
"../functions/setlocale.html"><i>setlocale</i>()</a> function (or equivalent) with the appropriate value. If the function is
invoked with an empty string, the value of the corresponding environment variable is used. If the environment variable is not set
or is set to the empty string, the implementation sets the appropriate environment as defined in XBD <a href=
"../basedefs/V1_chap08.html#tag_08"><i>8. Environment Variables</i></a>.</p>
<p class="tent">The locale settings of individual categories cannot be truly independent and still guarantee correct results. For
example, when collating two strings, characters must first be extracted from each string (governed by <i>LC_CTYPE )</i> before
being mapped to collating elements (governed by <i>LC_COLLATE )</i> for comparison. That is, if <i>LC_CTYPE</i> is causing parsing
according to the rules of a large, multi-byte code set (potentially returning 20000 or more distinct character codeset values), but
<i>LC_COLLATE</i> is set to handle only an 8-bit codeset with 256 distinct characters, meaningful results are obviously
impossible.</p>
<p class="tent">Earlier versions of this standard stated that if different character sets are used by the locale categories, the
results achieved by an application utilizing these categories are undefined. This was felt to be overly restrictive. For example,
when setting:</p>
<pre>
<tt>LANG=en_US.utf8
LC_TIME=POSIX
</tt></pre>
on a system where the codeset for the POSIX locale is ASCII and the codeset for en_US.utf8 is UTF-8, all of the characters used in
the <i>LC_TIME</i> locale data exist, with the same encoding, in the codeset used for <i>LC_CTYPE</i> (via <i>LANG ),</i> so there
is no reason for the behavior to be undefined in this case. This standard now has more precise requirements in this area.
<p class="tent">Austin Group Defect 1122 is applied, adding item 3 to the list of ways to select the locale to be used by some
C-language functions.</p>
<p class="tent">Austin Group Defect 1477 is applied, clarifying the behavior when locale categories have different character
sets.</p>
<h4><a name="tag_21_07_02" id="tag_21_07_02"></a>A.7.2 POSIX Locale</h4>
<p class="tent">On POSIX.1 implementations the POSIX locale is equal to the C locale, even though the requirements for the POSIX
locale are more extensive than the ISO&nbsp;C standard requirements for the C locale. To avoid being classified as a C-language
function, the name has been changed to the POSIX locale; the environment variable value can be either <tt>"POSIX"</tt> or, for
historical reasons, <tt>"C"</tt>.</p>
<p class="tent">The POSIX definitions mirror the historical UNIX system behavior.</p>
<p class="tent">The use of symbolic names for characters in the tables does not imply that the POSIX locale must be described using
symbolic character names, but merely that it may be advantageous to do so.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0032 [796] and XBD/TC2-2008/0033 [663] are applied.</p>
<h4><a name="tag_21_07_03" id="tag_21_07_03"></a>A.7.3 Locale Definition</h4>
<p class="tent">The decision to separate the file format from the <a href="../utilities/localedef.html"><i>localedef</i></a>
utility description was only partially editorial. Implementations may provide other interfaces than <a href=
"../utilities/localedef.html"><i>localedef</i></a>. Requirements on &quot;the utility&quot;, mostly concerning error messages, are
described in this way because they are meant to affect the other interfaces implementations may provide as well as <a href=
"../utilities/localedef.html"><i>localedef</i></a>.</p>
<p class="tent">The text about POSIX2_LOCALEDEF does not mean that internationalization is optional; only that the functionality of
the <a href="../utilities/localedef.html"><i>localedef</i></a> utility is. REs, for instance, must still be able to recognize, for
example, character class expressions such as <tt>"[[:alpha:]]"</tt>. A possible analogy is with an applications development
environment; while all conforming implementations must be capable of executing applications, not all need to have the development
environment installed. The assumption is that the capability to modify the behavior of utilities (and applications) via locale
settings must be supported. If the <a href="../utilities/localedef.html"><i>localedef</i></a> utility is not present, then the only
choice is to select an existing (presumably implementation-documented) locale. An implementation could, for example, choose to
support only the POSIX locale, which would in effect limit the amount of changes from historical implementations quite drastically.
The <a href="../utilities/localedef.html"><i>localedef</i></a> utility is still required, but would always terminate with an exit
code indicating that no locale could be created. Supported locales must be documented using the syntax defined in this chapter.
(This ensures that users can accurately determine what capabilities are provided. If the implementation decides to provide
additional capabilities to the ones in this chapter, that is already provided for.)</p>
<p class="tent">If the option is present (that is, locales can be created), then the <a href=
"../utilities/localedef.html"><i>localedef</i></a> utility must be capable of creating locales based on the syntax and rules
defined in this chapter. This does not mean that the implementation cannot also provide alternate means for creating locales.</p>
<p class="tent">The octal, decimal, and hexadecimal notations are the same employed by the charmap facility (see XBD <a href=
"../basedefs/V1_chap06.html#tag_06_04"><i>6.4 Character Set Description File</i></a>). To avoid confusion between an octal
constant and a back-reference, the octal, hexadecimal, and decimal constants must contain at least two digits. As single-digit
constants are relatively rare, this should not impose any significant hardship. Provision is made for more digits to account for
systems in which the byte size is larger than 8 bits. For example, a Unicode (see the ISO/IEC&nbsp;10646-1:2020 standard) system
that has defined 16-bit bytes may require six octal, four hexadecimal, and five decimal digits. As with the charmap file,
multi-byte characters are described in the locale definition file using &quot;big-endian&quot; notation for reasons of portability. There
is no requirement that the internal representation in the computer memory be in this same order.</p>
<p class="tent">One of the guidelines used for the development of this volume of POSIX.1-2024 is that characters outside the
invariant part of the ISO/IEC&nbsp;646:1991 standard should not be used in portable specifications. The &lt;backslash&gt; character
is not in the invariant part; the &lt;number-sign&gt; is, but with multiple representations: as a &lt;number-sign&gt;, and as a
hash sign. As far as general usage of these symbols, they are covered by the &quot;grandfather clause&quot;, but for newly defined
interfaces, the WG15 POSIX working group has requested that POSIX provide alternate representations. Consequently, while the
default escape character remains the &lt;backslash&gt; and the default comment character is the &lt;number-sign&gt;,
implementations are required to recognize alternative representations, identified in the applicable source file via the
<b>&lt;escape_char&gt;</b> and <b>&lt;comment_char&gt;</b> keywords.</p>
<h5 class="header4"><a name="tag_21_07_03_01" id="tag_21_07_03_01"></a>A.7.3.1 LC_CTYPE</h5>
<p class="tent">The <i>LC_CTYPE</i> category is primarily used to define the encoding-independent aspects of a character set, such
as character classification. In addition, certain encoding-dependent characteristics are also defined for an application via the
<i>LC_CTYPE</i> category. POSIX.1-2024 does not mandate that the encoding used in the locale is the same as the one used by the
application because an implementation may decide that it is advantageous to define locales in a system-wide encoding rather than
having multiple, logically identical locales in different encodings, and to convert from the application encoding to the
system-wide encoding on usage. Other implementations could require encoding-dependent locales.</p>
<p class="tent">In either case, the <i>LC_CTYPE</i> attributes that are directly dependent on the encoding, such as
<b>&lt;mb_cur_max&gt;</b> and the display width of characters, are not user-specifiable in a locale source and are consequently not
defined as keywords.</p>
<p class="tent">Implementations may define additional keywords or extend the <i>LC_CTYPE</i> mechanism to allow application-defined
keywords.</p>
<p class="tent">The text &quot;The ellipsis specification shall only be valid within a single encoded character set&quot; is present
because it is possible to have a locale supported by multiple character encodings, as explained in the rationale for XBD <a href=
"../basedefs/V1_chap06.html#tag_06_01"><i>6.1 Portable Character Set</i></a>. An example given there is of a possible
Japanese-based locale supported by a mixture of the character sets JIS&nbsp;X&nbsp;0201 Roman, JIS&nbsp;X&nbsp;0208, and
JIS&nbsp;X&nbsp;0201 Katakana. Attempting to express a range of characters across these sets is not logical and the implementation
is free to reject such attempts.</p>
<p class="tent">As the <i>LC_CTYPE</i> character classes are based on the ISO&nbsp;C standard character class definition, the
category does not support multi-character elements. For instance, the German character &lt;sharp-s&gt; is traditionally classified
as a lowercase letter. There is no corresponding uppercase letter; in proper capitalization of German text, the &lt;sharp-s&gt;
will be replaced by <tt>"SS"</tt>; that is, by two characters. This kind of conversion is outside the scope of the <b>toupper</b>
and <b>tolower</b> keywords.</p>
<p class="tent">Where POSIX.1-2024 specifies that only certain characters can be specified, as for the keywords <b>digit</b> and
<b>xdigit</b>, the specified characters must be from the portable character set, as shown. As an example, only the Arabic digits 0
through 9 are acceptable as digits.</p>
<p class="tent">The character classes <b>digit</b>, <b>xdigit</b>, <b>lower</b>, <b>upper</b>, and <b>space</b> have a set of
automatically included characters. These only need to be specified if the character values (that is, encoding) differs from the
implementation default values. It is not possible to define a locale without these automatically included characters unless some
implementation extension is used to prevent their inclusion. Such a definition would not be a proper superset of the C locale, and
thus, it might not be possible for the standard utilities to be implemented as programs conforming to the ISO&nbsp;C standard.</p>
<p class="tent">The definition of character class <b>digit</b> requires that only ten characters—the ones defining digits—can be
specified; alternate digits (for example, Hindi or Kanji) cannot be specified here. However, the encoding may vary if an
implementation supports more than one encoding.</p>
<p class="tent">The definition of character class <b>xdigit</b> requires that the characters included in character class
<b>digit</b> are included here also and allows for different symbols for the hexadecimal digits 10 through 15.</p>
<p class="tent">The inclusion of the <b>charclass</b> keyword satisfies the following requirement from the ISO&nbsp;POSIX-2:1993
standard, Annex H.1:</p>
<dl compact>
<dd></dd>
<dt>(3)</dt>
<dd><i>The LC_CTYPE (2.5.2.1) locale definition should be enhanced to allow user-specified additional character classes, similar in
concept to the ISO&nbsp;C standard Multibyte Support Extension (MSE) <a href="../functions/iswctype.html"><i>iswctype</i>()</a>
function.</i></dd>
</dl>
<p class="tent">This keyword was previously included in The Open Group specifications and is now mandated in the Shell and
Utilities volume of POSIX.1-2024.</p>
<p class="tent">The symbolic constant {CHARCLASS_NAME_MAX} was also adopted from The Open Group specifications. Applications
portability is enhanced by the use of symbolic constants.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0033 [663], XBD/TC2-2008/0034 [663], XBD/TC2-2008/0035 [584],
and XBD/TC2-2008/0036 [584] are applied.</p>
<p class="tent">Austin Group Defect 1078 is applied, clarifying that only the specified set of characters can be included in the
<b>digit</b> and <b>xdigit</b> classes in all locales, not just the POSIX locale.</p>
<p class="tent">Austin Group Defect 1589 is applied, disallowing some characters from being included in the <b>blank</b> class.</p>
<h5 class="header4"><a name="tag_21_07_03_02" id="tag_21_07_03_02"></a>A.7.3.2 LC_COLLATE</h5>
<p class="tent">The rules governing collation depend to some extent on the use. At least five different levels of increasingly
complex collation rules can be distinguished:</p>
<ol>
<li class="tent"><i>Byte/machine code order</i>: This is the historical collation order in the UNIX system and many proprietary
operating systems. Collation is here performed character by character, without any regard to context. The primary virtue is that it
usually is quite fast and also completely deterministic; it works well when the native machine collation sequence matches the user
expectations.</li>
<li class="tent"><i>Character order</i>: On this level, collation is also performed character by character, without regard to
context. The order between characters is, however, not determined by the code values, but on the expectations by the user of the
&quot;correct&quot; order between characters. In addition, such a (simple) collation order can specify that certain characters collate
equally (for example, uppercase and lowercase letters).</li>
<li class="tent"><i>String ordering</i>: On this level, entire strings are compared based on relatively straightforward rules.
Several &quot;passes&quot; may be required to determine the order between two strings. Characters may be ignored in some passes, but not in
others; the strings may be compared in different directions; and simple string substitutions may be performed before strings are
compared. This level is best described as &quot;dictionary&quot; ordering; it is based on the spelling, not the pronunciation, or meaning,
of the words.</li>
<li class="tent"><i>Text search ordering</i>: This is a further refinement of the previous level, best described as &quot;telephone
book ordering&quot;; some common homonyms (words spelled differently but with the same pronunciation) are collated together; numbers
are collated as if they were spelled out, and so on.</li>
<li class="tent"><i>Semantic-level ordering</i>: Words and strings are collated based on their meaning; entire words (such as
&quot;the&quot;) are eliminated; the ordering is not deterministic. This usually requires special software and is highly dependent on the
intended use.</li>
</ol>
<p class="tent">While the historical collation order formally is at level 1, for the English language it corresponds roughly to
elements at level 2. The user expects to see the output from the <a href="../utilities/ls.html"><i>ls</i></a> utility sorted very
much as it would be in a dictionary. While telephone book ordering would be an optimal goal for standard collation, this was ruled
out as the order would be language-dependent. Furthermore, a requirement was that the order must be determined solely from the text
string and the collation rules; no external information (for example, &quot;pronunciation dictionaries&quot;) could be required.</p>
<p class="tent">As a result, the goal for the collation support is at level 3. This also matches the requirements for the Canadian
collation order, as well as other, known collation requirements for alphabetic scripts. It specifically rules out collation based
on pronunciation rules or based on semantic analysis of the text.</p>
<p class="tent">The syntax for the <i>LC_COLLATE</i> category source meets the requirements for level 3 and has been verified to
produce the correct result with examples based on French, Canadian, and Danish collation order. Because it supports multi-character
collating elements, it is also capable of supporting collation in codesets where a character is expressed using non-spacing
characters followed by the base character (such as the ISO/IEC&nbsp;6937:2001 standard).</p>
<p class="tent">The directives that can be specified in an operand to the <b>order_start</b> keyword are based on the requirements
specified in several proposed standards and in customary use. The following is a rephrasing of rules defined for &quot;lexical ordering
in English and French&quot; by the Canadian Standards Association (the text in square brackets is rephrased):</p>
<ul>
<li class="tent">Once special characters [punctuation] have been removed from original strings, the ordering is determined by
scanning forwards (left to right) [disregarding case and diacriticals].</li>
<li class="tent">In case of equivalence, special characters are once again removed from original strings and the ordering is
determined by scanning backwards (starting from the rightmost character of the string and back), character by character
[disregarding case but considering diacriticals].</li>
<li class="tent">In case of repeated equivalence, special characters are removed again from original strings and the ordering is
determined by scanning forwards, character by character [considering both case and diacriticals].</li>
<li class="tent">If there is still an ordering equivalence after the first three rules have been applied, then only special
characters and the position they occupy in the string are considered to determine ordering. The string that has a special character
in the lowest position comes first. If two strings have a special character in the same position, the character [with the lowest
collation value] comes first. In case of equality, the other special characters are considered until there is a difference or until
all special characters have been exhausted.</li>
</ul>
<p class="tent">It is estimated that this part of POSIX.1-2024 covers the requirements for all European languages, and no
particular problems are anticipated with Slavic or Middle East character sets.</p>
<p class="tent">The Far East (particularly Japanese/Chinese) collations are often based on contextual information and pronunciation
rules (the same ideogram can have different meanings and different pronunciations). Such collation, in general, falls outside the
desired goal of POSIX.1-2024. There are, however, several other collation rules (stroke/radical or &quot;most common pronunciation&quot;)
that can be supported with the mechanism described here.</p>
<p class="tent">The character order is defined by the order in which characters and elements are specified between the
<b>order_start</b> and <b>order_end</b> keywords. Weights assigned to the characters and elements define the collation sequence; in
the absence of weights, the character order is also the collation sequence.</p>
<p class="tent">The <b>position</b> keyword provides the capability to consider, in a compare, the relative position of characters
not subject to <b>IGNORE</b>. As an example, consider the two strings <tt>"o-ring"</tt> and <tt>"or-ing"</tt>. Assuming the
&lt;hyphen-minus&gt; is subject to <b>IGNORE</b> on the first pass, the two strings compare equal, and the position of the
&lt;hyphen-minus&gt; is immaterial. On second pass, all characters except the &lt;hyphen-minus&gt; are subject to <b>IGNORE</b>,
and in the normal case the two strings would again compare equal. By taking position into account, the first collates before the
second.</p>
<p class="tent">This standard requires that all implementation-provided locales define a collation sequence that has a total
ordering of all characters unless the locale name has an <tt>'@'</tt> modifier indicating that it has a special collation sequence.
Defining locales in this way eliminates unexpected behavior when non-identical strings can collate equally (for example, <tt>sort
-u</tt> and <tt>sort | uniq</tt> are not equivalent). The exception for locales with a suitable <tt>'@'</tt> modifier in the name
allows implementations to supply locales which do not have a total ordering of all characters provided that they draw attention to
it in the modifier name. For example, <tt>@icase</tt> could indicate that each upper and lowercase character pair collates equally.
Even with an <tt>'@'</tt> modifier, total ordering is preferred when possible; for example, characters that are &quot;ignored&quot; in
dictionary order need not be completely ignored (by using <b>IGNORE</b> for all collation weights), but can instead be given a
unique weight after one or more <b>IGNORE</b> weights.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0037 [938], XBD/TC2-2008/0038 [663], and XBD/TC2-2008/0039
[584] are applied.</p>
<p class="tent">Austin Group Defect 948 is applied, requiring that all implementation-provided locales define a collation sequence
that has a total ordering of all characters unless the locale name has an <tt>'@'</tt> modifier indicating that it has a special
collation sequence.</p>
<p class="tent">Austin Group Defect 1740 is applied, noting that it is the responsibility of the locale writer to ensure
&lt;NUL&gt; has the lowest primary weight in a collation ordering.</p>
<h5 class="header4"><a name="tag_21_07_03_03" id="tag_21_07_03_03"></a>A.7.3.3 LC_MONETARY</h5>
<p class="tent">The currency symbol does not appear in <i>LC_MONETARY</i> because it is not defined in the C locale of the
ISO&nbsp;C standard.</p>
<p class="tent">The ISO&nbsp;C standard limits the size of decimal points and thousands delimiters to single-byte values. In
locales based on multi-byte coded character sets, this cannot be enforced; POSIX.1-2024 does not prohibit such characters, but
makes the behavior unspecified (in the text &quot;In contexts where other standards ...&quot;).</p>
<p class="tent">The grouping specification is based on, but not identical to, the ISO&nbsp;C standard. The -1 indicates that no
further grouping is performed; the equivalent of {CHAR_MAX} in the ISO&nbsp;C standard.</p>
<p class="tent">The text &quot;the value is not available in the locale&quot; is taken from the ISO&nbsp;C standard and is used instead of
the &quot;unspecified&quot; text in early proposals. There is no implication that omitting these keywords or assigning them values of
<tt>""</tt> or -1 produces unspecified results; such omissions or assignments eliminate the effects described for the keyword or
produce zero-length strings, as appropriate.</p>
<p class="tent">The locale definition is an extension of the ISO&nbsp;C standard <a href=
"../functions/localeconv.html"><i>localeconv</i>()</a> specification. In particular, rules on how <b>currency_symbol</b> is treated
are extended to also cover <b>int_curr_symbol</b>, and <b>p_set_by_space</b> and <b>n_sep_by_space</b> have been augmented with the
value 2, which places a &lt;space&gt; between the sign and the symbol. This has been updated to match the ISO/IEC&nbsp;9899:1999
standard requirements and is an incompatible change from UNIX 98 and the ISO&nbsp;POSIX-2 standard and the ISO&nbsp;POSIX-1:1996
standard requirements. The following table shows the result of various combinations:</p>
<center>
<table border="1" cellpadding="3" align="center">
<tr valign="top">
<th align="left">
<p class="tent">&nbsp;</p>
</th>
<th align="left">
<p class="tent">&nbsp;</p>
</th>
<th colspan="3" align="center">
<p class="tent"><b>p_sep_by_space</b></p>
</th>
</tr>
<tr valign="top">
<th align="left">
<p class="tent">&nbsp;</p>
</th>
<th align="left">
<p class="tent">&nbsp;</p>
</th>
<th align="center">
<p class="tent"><b>2</b></p>
</th>
<th align="center">
<p class="tent"><b>1</b></p>
</th>
<th align="center">
<p class="tent"><b>0</b></p>
</th>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>p_cs_precedes</b> = 1</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 0</p>
</td>
<td align="left">
<p class="tent">($1.25)</p>
</td>
<td align="left">
<p class="tent">($ 1.25)</p>
</td>
<td align="left">
<p class="tent">($1.25)</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">&nbsp;</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 1</p>
</td>
<td align="left">
<p class="tent">+ $1.25</p>
</td>
<td align="left">
<p class="tent">+$ 1.25</p>
</td>
<td align="left">
<p class="tent">+$1.25</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">&nbsp;</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 2</p>
</td>
<td align="left">
<p class="tent">$1.25 +</p>
</td>
<td align="left">
<p class="tent">$ 1.25+</p>
</td>
<td align="left">
<p class="tent">$1.25+</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">&nbsp;</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 3</p>
</td>
<td align="left">
<p class="tent">+ $1.25</p>
</td>
<td align="left">
<p class="tent">+$ 1.25</p>
</td>
<td align="left">
<p class="tent">+$1.25</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">&nbsp;</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 4</p>
</td>
<td align="left">
<p class="tent">$ +1.25</p>
</td>
<td align="left">
<p class="tent">$+ 1.25</p>
</td>
<td align="left">
<p class="tent">$+1.25</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><b>p_cs_precedes</b> = 0</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 0</p>
</td>
<td align="left">
<p class="tent">(1.25 $)</p>
</td>
<td align="left">
<p class="tent">(1.25 $)</p>
</td>
<td align="left">
<p class="tent">(1.25$)</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">&nbsp;</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 1</p>
</td>
<td align="left">
<p class="tent">+1.25 $</p>
</td>
<td align="left">
<p class="tent">+1.25 $</p>
</td>
<td align="left">
<p class="tent">+1.25$</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">&nbsp;</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 2</p>
</td>
<td align="left">
<p class="tent">1.25$ +</p>
</td>
<td align="left">
<p class="tent">1.25 $+</p>
</td>
<td align="left">
<p class="tent">1.25$+</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">&nbsp;</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 3</p>
</td>
<td align="left">
<p class="tent">1.25+ $</p>
</td>
<td align="left">
<p class="tent">1.25 +$</p>
</td>
<td align="left">
<p class="tent">1.25+$</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">&nbsp;</p>
</td>
<td align="left">
<p class="tent"><b>p_sign_posn</b> = 4</p>
</td>
<td align="left">
<p class="tent">1.25$ +</p>
</td>
<td align="left">
<p class="tent">1.25 $+</p>
</td>
<td align="left">
<p class="tent">1.25$+</p>
</td>
</tr>
</table>
</center>
<p class="tent">The following is an example of the interpretation of the <b>mon_grouping</b> keyword. Assuming that the value to be
formatted is 123456789 and the <b>mon_thousands_sep</b> is &lt;apostrophe&gt;, then the following table shows the result. The third
column shows the equivalent string in the ISO&nbsp;C standard that would be used by the <a href=
"../functions/localeconv.html"><i>localeconv</i>()</a> function to accommodate this grouping.</p>
<center>
<table border="1" cellpadding="3" align="center">
<tr valign="top">
<th align="center">
<p class="tent"><b>mon_grouping</b></p>
</th>
<th align="center">
<p class="tent"><b>Formatted Value</b></p>
</th>
<th align="center">
<p class="tent"><b>ISO C String</b></p>
</th>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">3;-1</p>
</td>
<td align="left">
<p class="tent">123456'789</p>
</td>
<td align="left">
<p class="tent">"\3\177"</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">3</p>
</td>
<td align="left">
<p class="tent">123'456'789</p>
</td>
<td align="left">
<p class="tent">"\3"</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">3;2;-1</p>
</td>
<td align="left">
<p class="tent">1234'56'789</p>
</td>
<td align="left">
<p class="tent">"\3\2\177"</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">3;2</p>
</td>
<td align="left">
<p class="tent">12'34'56'789</p>
</td>
<td align="left">
<p class="tent">"\3\2"</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent">-1</p>
</td>
<td align="left">
<p class="tent">123456789</p>
</td>
<td align="left">
<p class="tent">"\177"</p>
</td>
</tr>
</table>
</center>
<p class="tent">In these examples, the octal value of {CHAR_MAX} is 177.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;1-2002, item XBD/TC1/D6/6 adds a correction that permits the Euro currency
symbol and addresses extensibility. The correction is stated using the term &quot;should&quot; intentionally, in order to make this a
recommendation rather than a restriction on implementations. This allows for flexibility in implementations on how they handle
future currency symbol additions.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;1-2002, tem XBD/TC1/D6/5 is applied, adding the <b>int_[np]_*</b> values to
the POSIX locale definition of <i>LC_MONETARY .</i></p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/16 is applied, updating the descriptions of
<b>p_sep_by_space</b>, <b>n_sep_by_space</b>, <b>int_p_sep_by_space</b>, and <b>int_n_sep_by_space</b> to match the description of
these keywords in the ISO&nbsp;C standard and the System Interfaces volume of POSIX.1-2024, <a href=
"../functions/localeconv.html"><i>localeconv</i>()</a>.</p>
<p class="tent">Austin Group Defect 1199 is applied, adding a requirement that <a href=
"../utilities/localedef.html"><i>localedef</i></a> does not accept certain combinations of <b>*_sign_posn</b>,
<b>positive_sign</b>, and <b>negative_sign</b> values.</p>
<p class="tent">Austin Group Defect 1241 is applied, clarifying the meaning of empty string values.</p>
<h5 class="header4"><a name="tag_21_07_03_04" id="tag_21_07_03_04"></a>A.7.3.4 LC_NUMERIC</h5>
<p class="tent">See the rationale for <i>LC_MONETARY</i> for a description of the behavior of grouping.</p>
<p class="tent">Austin Group Defect 1241 is applied, clarifying the meaning of empty string values.</p>
<h5 class="header4"><a name="tag_21_07_03_05" id="tag_21_07_03_05"></a>A.7.3.5 LC_TIME</h5>
<p class="tent">Although certain of the conversion specifications in the POSIX locale (such as the name of the month) are shown
with initial capital letters, this need not be the case in other locales. Programs using these conversion specifications may need
to adjust the capitalization if the output is going to be used at the beginning of a sentence.</p>
<p class="tent">The <i>LC_TIME</i> descriptions of <b>abday</b>, <b>day</b>, <b>mon</b>, and <b>abmon</b> imply a Gregorian style
calendar (7-day weeks, 12-month years, leap years, and so on). Formatting time strings for other types of calendars is outside the
scope of POSIX.1-2024.</p>
<p class="tent">While the ISO&nbsp;8601:2019 standard numbers the weekdays starting with Monday, historical practice is to use the
Sunday as the first day. Rather than change the order and introduce potential confusion, the days must be specified beginning with
Sunday; previous references to &quot;first day&quot; have been removed. Note also that the Shell and Utilities volume of POSIX.1-2024
<a href="../utilities/date.html"><i>date</i></a> utility supports numbering compliant with the ISO&nbsp;8601:2019 standard.</p>
<p class="tent">As specified under <a href="../utilities/date.html"><i>date</i></a> in the Shell and Utilities volume of
POSIX.1-2024 and <a href="../functions/strftime.html"><i>strftime</i>()</a> in the System Interfaces volume of POSIX.1-2024, the
conversion specifications corresponding to the optional keywords consist of a modifier followed by a traditional conversion
specification (for instance, <tt>%Ex</tt>). If the optional keywords are not supported by the implementation or are unspecified for
the current locale, these modified conversion specifications are treated as the traditional conversion specifications. For example,
assume the following keywords:</p>
<pre>
<tt>alt_digits   "0th";"1st";"2nd";"3rd";"4th";"5th";\
             "6th";"7th";"8th";"9th";"10th"
<br class="tent">
d_fmt        "The %Od day of %B in %Y"
</tt></pre>
<p class="tent">On July 4th 1776, the <tt>%x</tt> conversion specifications would result in <tt>"The 4th day of July in 1776"</tt>,
while on July 14th 1789 it would result in <tt>"The 14 day of July in 1789"</tt>. It can be noted that the above example is for
illustrative purposes only; the <tt>%O</tt> modifier is primarily intended to provide for Kanji or Hindi digits in <a href=
"../utilities/date.html"><i>date</i></a> formats.</p>
<p class="tent">The following is an example for Japan that supports the current plus last three Emperors and reverts to Western
style numbering for years prior to the Meiji era. The example also allows for the custom of using a special name for the first year
of an era instead of using 1. (The examples substitute romaji where kanji should be used.)</p>
<pre>
<tt>era_d_fmt "%EY%mgatsu%dnichi (%a)"
<br class="tent">
era    "+:2:1990/01/01:+*:Heisei:%EC%Eynen";\
       "+:1:1989/01/08:1989/12/31:Heisei:%ECgannen";\
       "+:2:1927/01/01:1989/01/07:Shouwa:%EC%Eynen";\
       "+:1:1926/12/25:1926/12/31:Shouwa:%ECgannen";\
       "+:2:1913/01/01:1926/12/24:Taishou:%EC%Eynen";\
       "+:1:1912/07/30:1912/12/31:Taishou:%ECgannen";\
       "+:2:1869/01/01:1912/07/29:Meiji:%EC%Eynen";\
       "+:1:1868/09/08:1868/12/31:Meiji:%ECgannen";\
       "-:1868:1868/09/07:-*::%Ey"
</tt></pre>
<p class="tent">Assuming that the current date is September 21, 1991, a request to <a href="../utilities/date.html"><i>date</i></a>
or <a href="../functions/strftime.html"><i>strftime</i>()</a> would yield the following results:</p>
<pre>
<tt>%Ec - Heisei3nen9gatsu21nichi (Sat) 14:39:26
%EC - Heisei
%Ex - Heisei3nen9gatsu21nichi (Sat)
%Ey - 3
%EY - Heisei3nen
</tt></pre>
<p class="tent">Example era definitions for the Republic of China:</p>
<pre>
<tt>era    "+:2:1913/01/01:+*:ChungHwaMingGuo:%EC%EyNen";\
       "+:1:1912/1/1:1912/12/31:ChungHwaMingGuo:%ECYuenNen";\
       "+:1:1911/12/31:-*:MingChien:%EC%EyNen"
</tt></pre>
<p class="tent">Example definitions for the Christian Era:</p>
<pre>
<tt>era    "+:1:0001/01/01:+*:AD:%EC %Ey";\
       "+:1:-0001/12/31:-*:BC:%Ey %EC"
</tt></pre>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0040 [912] is applied.</p>
<p class="tent">Austin Group Defects 258 and 1166 are applied, adding the <b>alt_mon</b> and <b>ab_alt_mon</b> locale keywords.</p>
<p class="tent">Austin Group Defect 1307 is applied, changing the <b>am_pm</b> and <b>t_fmt_ampm</b> keywords and the AM_STR,
PM_STR, and T_FMT_AMPM constants in relation to locales that do not support the 12-hour clock format.</p>
<h5 class="header4"><a name="tag_21_07_03_06" id="tag_21_07_03_06"></a>A.7.3.6 LC_MESSAGES</h5>
<p class="tent">The <b>yesstr</b> and <b>nostr</b> locale keywords and the YESSTR and NOSTR <i>langinfo</i> items were formerly
used to match user affirmative and negative responses. In POSIX.1-2024, the <b>yesexpr</b>, <b>noexpr</b>, YESEXPR, and NOEXPR
extended regular expressions have replaced them. Applications should use the general locale-based messaging facilities to issue
prompting messages which include sample desired responses.</p>
<p class="tent">Affirmative responses like:</p>
<pre>
<tt>y
Yes
Yes!
</tt></pre>
<p class="tent">and negative responses like:</p>
<pre>
<tt>N
No
Never
No way!
</tt></pre>
<p class="tent">should all be recognized as affirmative and negative responses, respectively, by the EREs identified by the
<b>yesexpr</b> and <b>noexpr</b> keywords for English language-based locales. There is no requirement that multi-line responses nor
ambiguous responses like:</p>
<pre>
<tt>no or yes
yes or no
maybe
</tt></pre>
<p class="tent">be correctly classified by either of these EREs. Application writers are encouraged to include locale-specific
suggestions for affirmative and negative responses in prompts.</p>
<h4><a name="tag_21_07_04" id="tag_21_07_04"></a>A.7.4 Locale Definition Grammar</h4>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_07_04_01" id="tag_21_07_04_01"></a>A.7.4.1 Locale Lexical Conventions</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_07_04_02" id="tag_21_07_04_02"></a>A.7.4.2 Locale Grammar</h5>
<p class="tent">Austin Group Defects 258 and 1166 are applied, adding the <b>alt_mon</b> and <b>ab_alt_mon</b> locale keywords.</p>
<h4><a name="tag_21_07_05" id="tag_21_07_05"></a>A.7.5 Locale Definition Example</h4>
<p class="tent">The following is an example of a locale definition file that could be used as input to the <a href=
"../utilities/localedef.html"><i>localedef</i></a> utility. It assumes that the utility is executed with the <b>-f</b> option,
naming a charmap file with (at least) the following content:</p>
<pre>
<tt>CHARMAP
&lt;space&gt;      \x20
&lt;dollar&gt;     \x24
&lt;A&gt;          \101
&lt;a&gt;          \141
&lt;A-acute&gt;    \346
&lt;a-acute&gt;    \365
&lt;A-grave&gt;    \300
&lt;a-grave&gt;    \366
&lt;b&gt;          \142
&lt;C&gt;          \103
&lt;c&gt;          \143
&lt;c-cedilla&gt;  \347
&lt;d&gt;          \x64
&lt;H&gt;          \110
&lt;h&gt;          \150
&lt;eszet&gt;      \xb7
&lt;s&gt;          \x73
&lt;z&gt;          \x7a
END CHARMAP
</tt></pre>
<p class="tent">It should not be taken as complete or to represent any actual locale, but only to illustrate the syntax.</p>
<pre>
<tt>#
LC_CTYPE
lower   &lt;a&gt;;&lt;b&gt;;&lt;c&gt;;&lt;c-cedilla&gt;;&lt;d&gt;;...;&lt;z&gt;
upper   A;B;C;Ç;...;Z
space   \x20;\x09;\x0a;\x0b;\x0c;\x0d
blank   \040;\011
toupper (&lt;a&gt;,&lt;A&gt;);(b,B);(c,C);(ç,Ç);(d,D);(z,Z)
END LC_CTYPE
#
LC_COLLATE
#
# The following example of collation is based on
# Canadian standard Z243.4.1-1998, "Canadian Alphanumeric
# Ordering Standard for Character Sets of CSA Z234.4 Standard".
# (Other parts of this example locale definition file do not
# purport to relate to Canada, or to any other real culture.)
# The proposed standard defines a 4-weight collation, such that
# in the first pass, characters are compared without regard to
# case or accents; in the second pass, backwards-compare without
# regard to case; in the third pass, forwards-compare without
# regard to diacriticals. In the 3 first passes, non-alphabetic
# characters are ignored; in the fourth pass, only special
# characters are considered, such that "The string that has a
# special character in the lowest position comes first. If two
# strings have a special character in the same position, the
# collation value of the special character determines ordering.
#
# Only a subset of the character set is used here; mostly to
# illustrate the set-up.
#
collating-symbol &lt;NULL&gt;
collating-symbol &lt;LOW_VALUE&gt;
collating-symbol &lt;LOWER-CASE&gt;
collating-symbol &lt;SUBSCRIPT-LOWER&gt;
collating-symbol &lt;SUPERSCRIPT-LOWER&gt;
collating-symbol &lt;UPPER-CASE&gt;
collating-symbol &lt;NO-ACCENT&gt;
collating-symbol &lt;PECULIAR&gt;
collating-symbol &lt;LIGATURE&gt;
collating-symbol &lt;ACUTE&gt;
collating-symbol &lt;GRAVE&gt;
# Further collating-symbols follow.
#
# Properly, the standard does not include any multi-character
# collating elements; the one below is added for completeness.
#
collating_element &lt;ch&gt; from "&lt;c&gt;&lt;h&gt;"
collating_element &lt;CH&gt; from "&lt;C&gt;&lt;H&gt;"
collating_element &lt;Ch&gt; from "&lt;C&gt;&lt;h&gt;"
#
order_start forward;backward;forward;forward,position
#
# Collating symbols are specified first in the sequence to allocate
# basic collation values to them, lower than that of any character.
&lt;NULL&gt;
&lt;LOW_VALUE&gt;
&lt;LOWER-CASE&gt;
&lt;SUBSCRIPT-LOWER&gt;
&lt;SUPERSCRIPT-LOWER&gt;
&lt;UPPER-CASE&gt;
&lt;NO-ACCENT&gt;
&lt;PECULIAR&gt;
&lt;LIGATURE&gt;
&lt;ACUTE&gt;
&lt;GRAVE&gt;
&lt;RING-ABOVE&gt;
&lt;DIAERESIS&gt;
&lt;TILDE&gt;
# Further collating symbols are given a basic collating value here.
#
# Here follow special characters.
&lt;space&gt;        IGNORE;IGNORE;IGNORE;&lt;space&gt;
# Other special characters follow here.
#
# Here follow the regular characters.
&lt;a&gt;        &lt;a&gt;;&lt;NO-ACCENT&gt;;&lt;LOWER-CASE&gt;;IGNORE
&lt;A&gt;        &lt;a&gt;;&lt;NO-ACCENT&gt;;&lt;UPPER-CASE&gt;;IGNORE
&lt;a-acute&gt;  &lt;a&gt;;&lt;ACUTE&gt;;&lt;LOWER-CASE&gt;;IGNORE
&lt;A-acute&gt;  &lt;a&gt;;&lt;ACUTE&gt;;&lt;UPPER-CASE&gt;;IGNORE
&lt;a-grave&gt;  &lt;a&gt;;&lt;GRAVE&gt;;&lt;LOWER-CASE&gt;;IGNORE
&lt;A-grave&gt;  &lt;a&gt;;&lt;GRAVE&gt;;&lt;UPPER-CASE&gt;;IGNORE
&lt;ae&gt;      "&lt;a&gt;&lt;e&gt;";"&lt;LIGATURE&gt;&lt;LIGATURE&gt;";\
          "&lt;LOWER-CASE&gt;&lt;LOWER-CASE&gt;";IGNORE
&lt;AE&gt;      "&lt;a&gt;&lt;e&gt;";"&lt;LIGATURE&gt;&lt;LIGATURE&gt;";\
          "&lt;UPPER-CASE&gt;&lt;UPPER-CASE&gt;";IGNORE
&lt;b&gt;        &lt;b&gt;;&lt;NO-ACCENT&gt;;&lt;LOWER-CASE&gt;;IGNORE
&lt;B&gt;        &lt;b&gt;;&lt;NO-ACCENT&gt;;&lt;UPPER-CASE&gt;;IGNORE
&lt;c&gt;        &lt;c&gt;;&lt;NO-ACCENT&gt;;&lt;LOWER-CASE&gt;;IGNORE
&lt;C&gt;        &lt;c&gt;;&lt;NO-ACCENT&gt;;&lt;UPPER-CASE&gt;;IGNORE
&lt;ch&gt;       &lt;ch&gt;;&lt;NO-ACCENT&gt;;&lt;LOWER-CASE&gt;;IGNORE
&lt;Ch&gt;       &lt;ch&gt;;&lt;NO-ACCENT&gt;;&lt;PECULIAR&gt;;IGNORE
&lt;CH&gt;       &lt;ch&gt;;&lt;NO-ACCENT&gt;;&lt;UPPER-CASE&gt;;IGNORE
#
# As an example, the strings "Bach" and "bach" could be encoded (for
# compare purposes) as:
# "Bach"  &lt;b&gt;;&lt;a&gt;;&lt;ch&gt;;&lt;LOW_VALUE&gt;;&lt;NO_ACCENT&gt;;&lt;NO_ACCENT&gt;;\
#         &lt;NO_ACCENT&gt;;&lt;LOW_VALUE&gt;;&lt;UPPER-CASE&gt;;&lt;LOWER-CASE&gt;;\
#         &lt;LOWER-CASE&gt;;&lt;NULL&gt;
# "bach"  &lt;b&gt;;&lt;a&gt;;&lt;ch&gt;;&lt;LOW_VALUE&gt;;&lt;NO_ACCENT&gt;;&lt;NO_ACCENT&gt;;\
#         &lt;NO_ACCENT&gt;;&lt;LOW_VALUE&gt;;&lt;LOWER-CASE&gt;;&lt;LOWER-CASE&gt;;\
#         &lt;LOWER-CASE&gt;;&lt;NULL&gt;
#
# The two strings are equal in pass 1 and 2, but differ in pass 3.
#
# Further characters follow.
#
UNDEFINED    IGNORE;IGNORE;IGNORE;IGNORE
#
order_end
#
END LC_COLLATE
#
LC_MONETARY
int_curr_symbol    "USD "
currency_symbol    "$"
mon_decimal_point  "."
mon_grouping       3;0
positive_sign      ""
negative_sign      "-"
p_cs_precedes      1
n_sign_posn        0
END LC_MONETARY
#
LC_NUMERIC
copy "US_en.ASCII"
END LC_NUMERIC
#
LC_TIME
abday   "Sun";"Mon";"Tue";"Wed";"Thu";"Fri";"Sat"
#
day     "Sunday";"Monday";"Tuesday";"Wednesday";\
        "Thursday";"Friday";"Saturday"
#
abmon   "Jan";"Feb";"Mar";"Apr";"May";"Jun";\
         "Jul";"Aug";"Sep";"Oct";"Nov";"Dec"
#
mon     "January";"February";"March";"April";\
        "May";"June";"July";"August";"September";\
        "October";"November";"December"
#
d_t_fmt "%a %b %d %T %Z %Y\n"
END LC_TIME
#
LC_MESSAGES
yesexpr "^([yY][[:alpha:]]*)|(OK)"
#
noexpr  "^[nN][[:alpha:]]*"
END LC_MESSAGES
</tt></pre>
<h3><a name="tag_21_08" id="tag_21_08"></a>A.8 Environment Variables</h3>
<h4><a name="tag_21_08_01" id="tag_21_08_01"></a>A.8.1 Environment Variable Definition</h4>
<p class="tent">The variable <i>environ</i> is not intended to be declared in any header, but rather to be declared by the user for
accessing the array of strings that is the environment. This is the traditional usage of the symbol. Putting it into a header could
break some programs that use the symbol for their own purposes.</p>
<p class="tent">The decision to restrict conforming systems to the use of digits, uppercase letters, and underscores for
environment variable names allows applications to use lowercase letters in their environment variable names without conflicting
with any conforming system.</p>
<p class="tent">In addition to the obvious conflict with the shell syntax for positional parameter substitution, some historical
applications (including some shells) exclude names with leading digits from the environment.</p>
<p class="tent">Some historical implementations removed certain environment variables during program startup when security criteria
were not met, instead of just ignoring them at the point of use. The standard developers decided not to allow this behavior because
if a process drops all privileges and sets its effective user and group IDs to be the same as its real user and group IDs before
executing a program or utility, the behavior should be the same as if the process had originally met the security criteria.</p>
<p class="tent">Austin Group Defect 367 is applied, adding requirements relating to the use of <a href=
"../utilities/readonly.html"><i>readonly</i></a> on environment variables that are manipulated by shell built-in utilities.</p>
<p class="tent">Austin Group Defect 922 is applied, allowing implementations to ignore some environment variables at the point of
use for security reasons.</p>
<p class="tent">Austin Group Defect 1561 is applied, clarifying that environment variable values can contain byte sequences that do
not form valid characters.</p>
<h4><a name="tag_21_08_02" id="tag_21_08_02"></a>A.8.2 Internationalization Variables</h4>
<p class="tent">Utilities conforming to the Shell and Utilities volume of POSIX.1-2024 and written in standard C can access the
locale variables by issuing the following call:</p>
<pre>
<tt>setlocale(LC_ALL, "")
</tt></pre>
<p class="tent">If this were omitted, the ISO&nbsp;C standard specifies that the C (or POSIX) locale would be used.</p>
<p class="tent">The DESCRIPTION of <a href="../functions/setlocale.html"><i>setlocale</i>()</a> requires that when setting all
categories of a locale, if the value of any of the environment variable searches yields a locale that is not supported (and
non-null), the <a href="../functions/setlocale.html"><i>setlocale</i>()</a> function returns a null pointer and the global locale
is unchanged.</p>
<p class="tent">For the standard utilities, if any of the environment variables are invalid, it makes sense to default to an
implementation-defined, consistent locale environment. It is more confusing for a user to have partial settings occur in case of a
mistake. All utilities would then behave in one language/cultural environment. Furthermore, it provides a way of forcing the whole
environment to be the implementation-defined default. Disastrous results could occur if a pipeline of utilities partially uses the
environment variables in different ways. In this case, it would be appropriate for utilities that use <i>LANG</i> and related
variables to exit with an error if any of the variables are invalid. For example, users typing individual commands at a terminal
might want <a href="../utilities/date.html"><i>date</i></a> to work if <i>LC_MONETARY</i> is invalid as long as <i>LC_TIME</i> is
valid. Since these are conflicting reasonable alternatives, POSIX.1-2024 leaves the results unspecified if the locale environment
variables would not produce a complete locale matching the specification of the user.</p>
<p class="tent">The <i>LC_MESSAGES</i> variable affects the language of messages generated by the standard utilities.</p>
<p class="tent">The description of the environment variable names starting with the characters &quot;LC_&quot; acknowledges the fact that
the interfaces presented may be extended as new international functionality is required. In the ISO&nbsp;C standard, names preceded
by &quot;LC_&quot; are reserved in the name space for future categories.</p>
<p class="tent">To avoid name clashes, new categories and environment variables are divided into two classifications:
&quot;implementation-independent&quot; and &quot;implementation-defined&quot;.</p>
<p class="tent">Implementation-independent names will have the following format:</p>
<pre>
<tt>LC_</tt><i>NAME</i><tt>
</tt></pre>
<p class="tent">where <i>NAME</i> is the name of the new category and environment variable. Capital letters must be used for
implementation-independent names.</p>
<p class="tent">Implementation-defined names must be in lowercase letters, as below:</p>
<pre>
<tt>LC_</tt><i>name</i><tt>
</tt></pre>
<p class="tent">Austin Group Defect 1122 is applied, adding the <i>LANGUAGE ,</i> <i>TEXTDOMAIN ,</i> and <i>TEXTDOMAINDIR</i>
environment variables and updating <i>NLSPATH</i> with requirements relating to the <i>gettext</i> family of functions and the
<a href="../utilities/gettext.html"><i>gettext</i></a> and <a href="../utilities/ngettext.html"><i>ngettext</i></a> utilities.</p>
<p class="tent">Austin Group Defect 1477 is applied, moving a paragraph of rationale about incompatible locale categories to
<a href="#tag_21_07_01">A.7.1 General</a>.</p>
<p class="tent">Austin Group Defect 1571 is applied, simplifying the final item in the precedence order for internationalization
environment variables.</p>
<h4><a name="tag_21_08_03" id="tag_21_08_03"></a>A.8.3 Other Environment Variables</h4>
<h5><a name="tag_21_08_03_01" id="tag_21_08_03_01"></a>COLUMNS, LINES</h5>
<p class="tent">The default values for the number of column positions when <i>COLUMNS</i> is unset or null, and screen height when
<i>LINES</i> is unset or null, are unspecified if the terminal window size cannot be obtained (from <a href=
"../functions/tcgetwinsize.html"><i>tcgetwinsize</i>()</a>) because historical implementations use different methods to determine
the values. Users should not need to set these variables in the environment unless there is a specific reason to override the
default behavior of the implementation, such as to display data in an area arbitrarily smaller than the terminal or window. Values
for these variables that are not decimal integers greater than zero are implicitly undefined values; it is unnecessary to enumerate
all of the possible values outside of the acceptable set.</p>
<p class="tent">Austin Group Defect 1185 is applied, changing the descriptions of the <i>COLUMNS</i> and <i>LINES</i> environment
variables.</p>
<h5><a name="tag_21_08_03_02" id="tag_21_08_03_02"></a>LOGNAME</h5>
<p class="tent">In most implementations, the value of such a variable is easily forged, so security-critical applications should
rely on other means of determining user identity. <i>LOGNAME</i> is required to be constructed from the portable filename character
set for reasons of interchange. No diagnostic condition is specified for violating this rule, and no requirement for enforcement
exists. The intent of the requirement is that if extended characters are used, the &quot;guarantee&quot; of portability implied by a
standard is void.</p>
<h5><a name="tag_21_08_03_03" id="tag_21_08_03_03"></a>PATH</h5>
<p class="tent">Many historical implementations of the Bourne shell do not interpret a trailing &lt;colon&gt; to represent the
current working directory and are thus non-conforming. The C Shell and the KornShell conform to POSIX.1-2024 on this point. The
usual name of dot may also be used to refer to the current working directory.</p>
<p class="tent">Many implementations historically have used a default value of <b>/bin</b> and <b>/usr/bin</b> for the <i>PATH</i>
variable. POSIX.1-2024 does not mandate this default path be identical to that retrieved from <i>getconf</i> <i>PATH</i> because it
is likely that the standardized utilities may be provided in another directory separate from the directories used by some
historical applications.</p>
<p class="tent">The standard specifies that (when no &lt;slash&gt; character is included in a command pathname) special built-in
utilities and intrinsic utilities are not subject to a search using <i>PATH .</i> All other standard utilities, even if implemented
as shell built-ins, are required to be found by searching <i>PATH .</i> This means that if a shell includes a built-in for a
standard utility that is not intrinsic, a user can write a utility that will override that built-in. The standard also requires
that all standard utilities can be executed by commands like:</p>
<pre>
<tt>find . -type d -exec printf 'Found directory: %s\n' '{}' +
</tt></pre>
<p class="tent">So, other than differences caused by using different shell execution environments, a standard utility that is
implemented as a built-in and the non-built-in version of that standard utility are both required to behave as the standard
specifies. But, if a non-standard utility is found in <i>PATH</i> before the standard utility's location in <i>PATH ,</i> the
non-standard utility must be invoked rather than the built-in. For instance, if the shell includes a built-in <a href=
"../utilities/printf.html"><i>printf</i></a> utility (which most shells do), <i>PATH</i> is initialized using:</p>
<pre>
<tt>PATH="$HOME/bin:$(command -p getconf PATH)"
</tt></pre>
<p class="tent">and <b>$HOME/bin/printf</b> is an executable file containing:</p>
<pre>
<tt>command -p printf 'In %s with args:\n' "${0##*/}" &gt;&amp;2
command -p printf '     %s\n' "$@" &gt;&amp;2
command -V printf &gt;&amp;2
command -Vp printf &gt;&amp;2
command -p printf "$@"
</tt></pre>
<p class="tent">then the command:</p>
<pre>
<tt>printf '%s %s\n' HOME "$HOME" PATH "$PATH"
</tt></pre>
<p class="tent">should produce output similar to:</p>
<pre>
<tt>In printf with args:
    %s %s\n
    HOME
    /Users/dwc
    PATH
    /Users/dwc/bin:/usr/bin:/bin:/usr/sbin:/sbin
printf is a tracked alias for /Users/dwc/bin/printf
printf is a shell builtin
HOME /Users/dwc
PATH /Users/dwc/bin:/usr/bin:/bin:/usr/sbin:/sbin
</tt></pre>
<p class="tent">The current version of the Korn shell installs built-ins into the shell using a <i>builtin</i> utility that allows
the built-in to be associated with the pathname of the non-built-in version of that utility. (Unfortunately, some implementations
that use <i>ksh93</i> as their standard <a href="../utilities/sh.html"><i>sh</i></a> utility do not make use of this feature and
install built-ins for standard utilities that are not associated with a <i>PATH</i> search. And, most other shells incorrectly
always use a built-in utility if one is installed, even when it should be overridden by a <i>PATH</i> search that should find the
non-standard version of a utility with the name of that built-in.) Some other shells use a &lt;percent-sign&gt; character in a
directory pathname in <i>PATH</i> to indicate one or more directories that should be used when processing <i>PATH</i> to determine
when non-intrinsic standard utilities should be found. The POSIX.1-2024 revision of the standard allows either of these methods to
be used to install built-ins that meet the requirements stated in XCU <a href=
"../utilities/V3_chap02.html#tag_19_09_01_04"><i>2.9.1.4 Command Search and Execution</i></a> by making the behavior of the
built-in path search implementation-defined when a &lt;percent-sign&gt; character is found in <i>PATH .</i></p>
<p class="tent">Austin Group Defect 854 is applied, changing how <i>PATH</i> searching applies to built-in utilities.</p>
<p class="tent">Austin Group Defect 1340 is applied, clarifying the description of <i>PATH .</i></p>
<h5><a name="tag_21_08_03_04" id="tag_21_08_03_04"></a>SHELL</h5>
<p class="tent">The <i>SHELL</i> variable names the preferred shell of the user; it is a guide to applications. There is no direct
requirement that that shell conform to POSIX.1-2024; that decision should rest with the user. It is the intention of the standard
developers that alternative shells be permitted, if the user chooses to develop or acquire one. An operating system that builds its
shell into the &quot;kernel&quot; in such a manner that alternative shells would be impossible does not conform to the spirit of
POSIX.1-2024.</p>
<h5><a name="tag_21_08_03_05" id="tag_21_08_03_05"></a>TZ</h5>
<p class="tent">The quoted form of the timezone variable allows timezone names of the form UTC+1 (or any name that contains the
&lt;plus-sign&gt; (<tt>'+'</tt>), the &lt;hyphen-minus&gt; (<tt>'-'</tt>), or digits), which may be appropriate for countries that
do not have an official timezone name. It would be coded as &lt;UTC+1&gt;+1&lt;UTC+2&gt;, which would cause <i>std</i> to have a
value of UTC+1 and <i>dst</i> a value of UTC+2, each with a length of 5 characters. This does not appear to conflict with any
existing usage. The characters <tt>'&lt;'</tt> and <tt>'&gt;'</tt> were chosen for quoting because they are easier to parse
visually than a quoting character that does not provide some sense of bracketing (and in a string like this, such bracketing is
helpful). They were also chosen because they do not need special treatment when assigning to the <i>TZ</i> variable. Users are
often confused by embedding quotes in a string. Because <tt>'&lt;'</tt> and <tt>'&gt;'</tt> are meaningful to the shell, the whole
string would have to be quoted, but that is easily explained. (Parentheses would have presented the same problems.) Although the
<tt>'&gt;'</tt> symbol could have been permitted in the string by either escaping it or doubling it, it seemed of little value to
require that. This could be provided as an extension if there was a need. Timezone names of this new form lead to a requirement
that the value of {_POSIX_TZNAME_MAX} change from 3 to 6.</p>
<p class="tent">Since the <i>TZ</i> environment variable is usually inherited by all applications started by a user after the value
of the <i>TZ</i> environment variable is changed and since many applications run using the C or POSIX locale, using characters that
are not in the portable character set in the <i>std</i> and <i>dst</i> fields could cause unexpected results.</p>
<p class="tent">Implementations are encouraged to incorporate the IANA timezone database into the timezone database used for
<i>TZ</i> values specifying geographical and special timezones, and to provide a method to allow it to be updated in accordance
with RFC 6557.</p>
<p class="tent">The <i>TZ</i> format beginning with &lt;colon&gt; was originally introduced as a way for implementations to support
geographical timezones in the form <tt>:<i>Area</i>/<i>Location</i></tt> as an extension, but implementations started to support
them without the leading &lt;colon&gt; (as well as with it) and their use without the &lt;colon&gt; became the de-facto standard.
Consequently when geographical timezones were added to this standard, it was without the &lt;colon&gt;.</p>
<p class="tent">The format of the <i>TZ</i> environment variable is changed in Issue 6 to allow for the quoted form, as defined in
earlier versions of the ISO&nbsp;POSIX-1 standard.</p>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;1-2002, item XBD/TC1/D6/7 is applied, adding the <i>ctime_r</i>() and
<a href="../functions/localtime_r.html"><i>localtime_r</i>()</a> functions to the list of functions that use the <i>TZ</i>
environment variable.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0041 [584] is applied.</p>
<p class="tent">Austin Group Defect 1030 is applied, making it implementation-defined when the changes to and from Daylight Saving
Time occur if the <i>dst</i> field is specified in <i>TZ</i> and the <i>rule</i> field is not.</p>
<p class="tent">Austin Group Defect 1252 is applied, changing the <i>time</i> field to allow the hour to range from zero to 167 and
allowing a leading sign.</p>
<p class="tent">Austin Group Defect 1253 is applied, changing &quot;alternative time&quot; to &quot;Daylight Saving Time&quot;.</p>
<p class="tent">Austin Group Defect 1410 is applied, removing the <i>ctime_r</i>() function.</p>
<p class="tent">Austin Group Defect 1619 is applied, adding support for a third <i>TZ</i> format with values specifying
geographical and special timezones.</p>
<p class="tent">Austin Group Defects 1638 and 1639 are applied, clarifying the length limits for the <i>std</i> and <i>dst</i>
fields of <i>TZ .</i></p>
<h3><a name="tag_21_09" id="tag_21_09"></a>A.9 Regular Expressions</h3>
<p class="tent">Rather than repeating the description of REs for each utility supporting REs, the standard developers preferred a
common, comprehensive description of regular expressions in one place. The most common behavior is described here, and exceptions
or extensions to this are documented for the respective utilities, as appropriate.</p>
<p class="tent">The BRE corresponds to the <a href="../utilities/ed.html"><i>ed</i></a> or historical <a href=
"../utilities/grep.html"><i>grep</i></a> type, and the ERE corresponds to the historical <i>egrep</i> type (now <a href=
"../utilities/grep.html"><i>grep</i></a> <b>-E</b>).</p>
<p class="tent">The text is based on the <a href="../utilities/ed.html"><i>ed</i></a> description and substantially modified,
primarily to aid developers and others in the understanding of the capabilities and limitations of REs. Much of this was influenced
by internationalization requirements.</p>
<p class="tent">It should be noted that the definitions in this section do not cover the <a href=
"../utilities/tr.html"><i>tr</i></a> utility; the <a href="../utilities/tr.html"><i>tr</i></a> syntax does not employ REs.</p>
<p class="tent">The specification of REs is particularly important to internationalization because pattern matching operations are
very basic operations in business and other operations. The syntax and rules of REs are intended to be as intuitive as possible to
make them easy to understand and use. The historical rules and behavior do not provide that capability to non-English language
users, and do not provide the necessary support for commonly used characters and language constructs. It was necessary to provide
extensions to the historical RE syntax and rules to accommodate other languages.</p>
<p class="tent">As they are limited to bracket expressions, the rationale for these modifications is in XBD <a href=
"../basedefs/V1_chap09.html#tag_09_03_05"><i>9.3.5 RE Bracket Expression</i></a>.</p>
<h4><a name="tag_21_09_01" id="tag_21_09_01"></a>A.9.1 Regular Expression Definitions</h4>
<p class="tent">It is possible to determine what strings correspond to subexpressions by recursively applying the leftmost longest
rule to each subexpression, but only with the proviso that the overall match is leftmost longest. For example, matching
<tt>"\(ac*\)c*d[ac]*\1"</tt> against <i>acdacaaa</i> matches <i>acdacaaa</i> (with \1=<i>a</i>); simply matching the longest match
for <tt>"\(ac*\)"</tt> would yield \1=<i>ac</i>, but the overall match would be smaller (<i>acdac</i>). Conceptually, the
implementation must examine every possible match and among those that yield the leftmost longest total matches, pick the one that
does the longest match for the leftmost subexpression, and so on. Note that this means that matching by subexpressions is
context-dependent: a subexpression within a larger RE may match a different string from the one it would match as an independent
RE, and two instances of the same subexpression within the same larger RE may match different lengths even in similar sequences of
characters. For example, in the ERE <tt>"(a.*b)(a.*b)"</tt>, the two identical subexpressions would match four and six characters,
respectively, of <i>accbaccccb</i>.</p>
<p class="tent">The definition of single character has been expanded to include also collating elements consisting of two or more
characters; this expansion is applicable only when a bracket expression is included in the BRE or ERE. An example of such a
collating element may be the Dutch <i>ij</i>, which collates as a <tt>'y'</tt>. In some encodings, a ligature &quot;i with j&quot; exists
as a character and would represent a single-character collating element. In another encoding, no such ligature exists, and the
two-character sequence <i>ij</i> is defined as a multi-character collating element. Outside brackets, the <i>ij</i> is treated as a
two-character RE and matches the same characters in a string. Historically, a bracket expression only matched a single character.
The ISO&nbsp;POSIX-2:1993 standard required bracket expressions like <tt>"[^[:lower:]]"</tt> to match multi-character collating
elements such as <tt>"ij"</tt>. However, this requirement led to behavior that many users did not expect and that could not
feasibly be mimicked in user code, and it was rarely if ever implemented correctly. The current standard leaves it unspecified
whether a bracket expression matches a multi-character collating element, allowing both historical and ISO&nbsp;POSIX-2:1993
standard implementations to conform.</p>
<p class="tent">Also, in the current standard, it is unspecified whether character class expressions like <tt>"[:lower:]"</tt> can
include multi-character collating elements like <tt>"ij"</tt>; hence <tt>"[[:lower:]]"</tt> can match <tt>"ij"</tt>, and
<tt>"[^[:lower:]]"</tt> can fail to match <tt>"ij"</tt>. Common practice is for a character class expression to match a collating
element if it matches the collating element's first character.</p>
<p class="tent">Austin Group Defect 1329 is applied, adding a definition of &quot;leftmost&quot; and updating the definition of &quot;matched&quot;
to include an example ERE using the repetition modifier <tt>'?'</tt>.</p>
<p class="tent">Austin Group Defect 1546 is applied, adding a definition of &quot;escape sequence&quot;.</p>
<h4><a name="tag_21_09_02" id="tag_21_09_02"></a>A.9.2 Regular Expression General Requirements</h4>
<p class="tent">The definition of which sequence is matched when several are possible is based on the leftmost-longest rule
historically used by deterministic recognizers. This rule is easier to define and describe, and arguably more useful, than the
first-match rule historically used by non-deterministic recognizers. It is thought that dependencies on the choice of rule are
rare; carefully contrived examples are needed to demonstrate the difference.</p>
<p class="tent">A formal expression of the leftmost-longest rule is:</p>
<blockquote>The search is performed as if all possible suffixes of the string were tested for a prefix matching the pattern; the
longest suffix containing a matching prefix is chosen, and the longest possible matching prefix of the chosen suffix is identified
as the matching sequence.</blockquote>
<p class="tent">EREs can optionally use a leftmost-shortest rule for repetitions (enabled via the REG_MINIMAL flag or the
<tt>'?'</tt> repetition modifier), in which case the shortest possible matching prefix is instead identified as the matching
sequence for the affected repetition(s).</p>
<p class="tent">Historically, most RE implementations only match lines, not strings. However, that is more an effect of the usage
than of an inherent feature of REs themselves. Consequently, POSIX.1-2024 does not regard &lt;newline&gt; characters as special;
they are ordinary characters, and both a &lt;period&gt; and a non-matching list can match them. Those utilities (like <a href=
"../utilities/grep.html"><i>grep</i></a>) that do not allow &lt;newline&gt; characters to match are responsible for eliminating any
&lt;newline&gt; from strings before matching against the RE. The <a href="../functions/regcomp.html"><i>regcomp</i>()</a> function,
however, can provide support for such processing without violating the rules of this section.</p>
<p class="tent">Some implementations of <i>egrep</i> have had very limited flexibility in handling complex EREs. POSIX.1-2024 does
not attempt to define the complexity of a BRE or ERE, but does place a lower limit on it—any RE must be handled, as long as it can
be expressed in 256 bytes or less. (Of course, this does not place an upper limit on the implementation.) There are historical
programs using a non-deterministic-recognizer implementation that should have no difficulty with this limit. It is possible that a
good approach would be to attempt to use the faster, but more limited, deterministic recognizer for simple expressions and to fall
back on the non-deterministic recognizer for those expressions requiring it. Non-deterministic implementations must be careful to
observe the rules on which match is chosen; the longest match, not the first match, starting at a given character is used.</p>
<p class="tent">The term &quot;invalid&quot; highlights a difference between this section and some others: POSIX.1-2024 frequently avoids
mandating of errors for syntax violations because they can be used by implementors to trigger extensions. However, the authors of
the internationalization features of REs wanted to mandate errors for certain conditions to identify usage problems or non-portable
constructs. These are identified within this rationale as appropriate. The remaining syntax violations have been left implicitly or
explicitly undefined. For example, the BRE construct <tt>"\{1,2,3\}"</tt> does not comply with the grammar. A conforming
application cannot rely on it producing an error nor matching the literal characters <tt>"\{1,2,3\}"</tt>.</p>
<p class="tent">The term &quot;undefined&quot; was used in favor of &quot;unspecified&quot; because many of the situations are considered errors on
some implementations, and the standard developers considered that consistency throughout the section was preferable to mixing
undefined and unspecified.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0042 [554] is applied.</p>
<p class="tent">Austin Group Defect 1031 is applied, replacing text relating to case insensitive comparisons with a reference to
XBD <a href="../basedefs/V1_chap04.html#tag_04_01"><i>4.1 Case Insensitive Comparisons</i></a>.</p>
<h4><a name="tag_21_09_03" id="tag_21_09_03"></a>A.9.3 Basic Regular Expressions</h4>
<p class="tent">Austin Group Defect 1139 is applied, making minor editorial changes to several subsections of this section and
changing them to require that, when not inside a bracket expression, <tt>"\]"</tt> matches <tt>']'</tt>.</p>
<h5 class="header4"><a name="tag_21_09_03_01" id="tag_21_09_03_01"></a>A.9.3.1 BREs Matching a Single Character or Collating
Element</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_09_03_02" id="tag_21_09_03_02"></a>A.9.3.2 BRE Ordinary Characters</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0043 [554] is applied.</p>
<p class="tent">Austin Group Defect 1546 is applied, adding optional support for <tt>"\?"</tt>, <tt>"\+"</tt>, and
<tt>"\|"</tt>.</p>
<h5 class="header4"><a name="tag_21_09_03_03" id="tag_21_09_03_03"></a>A.9.3.3 BRE Special Characters</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0043 [554] is applied.</p>
<p class="tent">Austin Group Defect 1546 is applied, adding optional support for <tt>"\?"</tt>, <tt>"\+"</tt>, and
<tt>"\|"</tt>.</p>
<h5 class="header4"><a name="tag_21_09_03_04" id="tag_21_09_03_04"></a>A.9.3.4 Periods in BREs</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_09_03_05" id="tag_21_09_03_05"></a>A.9.3.5 RE Bracket Expression</h5>
<p class="tent">Range expressions are, historically, an integral part of REs. However, the requirements of &quot;natural language
behavior&quot; and portability do conflict. In the POSIX locale, ranges must be treated according to the collating sequence and include
such characters that fall within the range based on that collating sequence, regardless of character values. In other locales,
ranges have unspecified behavior.</p>
<p class="tent">Some historical implementations allow range expressions where the ending range point of one range is also the
starting point of the next (for instance, <tt>"[a-m-o]"</tt>). This behavior should not be permitted, but to avoid breaking
historical implementations, it is now <i>undefined</i> whether it is a valid expression and how it should be interpreted.</p>
<p class="tent">Current practice in <a href="../utilities/awk.html"><i>awk</i></a> and <a href=
"../utilities/lex.html"><i>lex</i></a> is to accept escape sequences in bracket expressions as per XBD <a href=
"../basedefs/V1_chap05.html#tagtcjh_2"><i>Escape Sequences and Associated Actions</i></a>, while the normal ERE behavior is to
regard such a sequence as consisting of two characters. Allowing the <a href="../utilities/awk.html"><i>awk</i></a>/<a href=
"../utilities/lex.html"><i>lex</i></a> behavior in EREs would change the normal behavior in an unacceptable way; it is expected
that <a href="../utilities/awk.html"><i>awk</i></a> and <a href="../utilities/lex.html"><i>lex</i></a> will decode escape sequences
in EREs before passing them to <a href="../functions/regcomp.html"><i>regcomp</i>()</a> or comparable routines. Each utility
describes the escape sequences it accepts as an exception to the rules in this section; the list is not the same, for historical
reasons.</p>
<p class="tent">As noted previously, the new syntax and rules have been added to accommodate other languages than English. The
remainder of this section describes the rationale for these modifications.</p>
<p class="tent">In the POSIX locale, a regular expression that starts with a range expression matches a set of strings that are
contiguously sorted, but this is not necessarily true in other locales. For example, a French locale might have the following
behavior:</p>
<pre>
<b>$</b><tt> ls
alpha   Alpha   estimé   ESTIMÉ   été   eurêka
</tt><b>$</b><tt> ls [a-e]*
alpha   Alpha   estimé  eurêka
</tt></pre>
<p class="tent">Such disagreements between matching and contiguous sorting are unavoidable because POSIX sorting cannot be
implemented in terms of a deterministic finite-state automaton (DFA), but range expressions by design are implementable in terms of
DFAs.</p>
<p class="tent">Historical implementations used native character order to interpret range expressions. The ISO&nbsp;POSIX-2:1993
standard instead required collating element order (CEO): the order that collating elements were specified between the
<b>order_start</b> and <b>order_end</b> keywords in the <i>LC_COLLATE</i> category of the current locale. CEO had some advantages
in portability over the native character order, but it also had some disadvantages:</p>
<ul>
<li class="tent">CEO could not feasibly be mimicked in user code, leading to inconsistencies between POSIX matchers and matchers in
popular user programs like Emacs, <i>ksh</i>, and Perl.</li>
<li class="tent">CEO caused range expressions to match accented and capitalized letters contrary to many users' expectations. For
example, <tt>"[a-e]"</tt> typically matched both <tt>'E'</tt> and <tt>'á'</tt> but neither <tt>'A'</tt> nor <tt>'é'</tt>.</li>
<li class="tent">CEO was not consistent across implementations. In practice, CEO was often less portable than native character
order. For example, it was common for the CEOs of two implementation-supplied locales to disagree, even if both locales were named
<tt>"da_DK"</tt>.</li>
</ul>
<p class="tent">Because of these problems, some implementations of regular expressions continued to use native character order.
Others used the collation sequence, which is more consistent with sorting than either CEO or native order, but which departs
further from the traditional POSIX semantics because it generally requires <tt>"[a-e]"</tt> to match either <tt>'A'</tt> or
<tt>'E'</tt> but not both. As a result of this kind of implementation variation, programmers who wanted to write portable regular
expressions could not rely on the ISO&nbsp;POSIX-2:1993 standard guarantees in practice.</p>
<p class="tent">While revising the standard, lengthy consideration was given to proposals to attack this problem by adding an API
for querying the CEO to allow user-mode matchers, but none of these proposals had implementation experience and none achieved
consensus. Leaving the standard alone was also considered, but rejected due to the problems described above.</p>
<p class="tent">The current standard leaves unspecified the behavior of a range expression outside the POSIX locale. This makes it
clearer that conforming applications should avoid range expressions outside the POSIX locale, and it allows implementations and
compatible user-mode matchers to interpret range expressions using native order, CEO, collation sequence, or other, more advanced
techniques. The concerns which led to this change were raised in IEEE PASC interpretation 1003.2 #43 and others, and related to
ambiguities in the specification of how multi-character collating elements should be handled in range expressions. These
ambiguities had led to multiple interpretations of the specification, in conflicting ways, which led to varying implementations. As
noted above, efforts were made to resolve the differences, but no solution has been found that would be specific enough to allow
for portable software while not invalidating existing implementations.</p>
<p class="tent">The standard developers recognize that collating elements are important, such elements being common in several
European languages; for example, <tt>'ch'</tt> or <tt>'ll'</tt> in traditional Spanish; <tt>'aa'</tt> in several Scandinavian
languages. Existing internationalized implementations have processed, and continue to process, these elements in range expressions.
Efforts are expected to continue in the future to find a way to define the behavior of these elements precisely and portably.</p>
<p class="tent">The ISO&nbsp;POSIX-2:1993 standard required <tt>"[b-a]"</tt> to be an invalid expression in the POSIX locale, but
this requirement has been relaxed in this version of the standard so that <tt>"[b-a]"</tt> can instead be treated as a valid
expression that does not match any string.</p>
<p class="tent">The standard specifies three possible behaviors for regular expressions such as <tt>"[:alpha:]"</tt>. One behavior
is the traditional implementation, which behaves like <tt>"[:ahlp]"</tt>. Another, for alignment with the <a href=
"../utilities/tr.html"><i>tr</i></a> utility, is to treat it like <tt>"[[:alpha:]]"</tt>. And finally, the standard allows
rejecting the regular expression as invalid, as a means of alerting a user to the non-portable aspect of that regular expression.
The set of regular expressions with this undefined behavior is limited solely to the expressions where the outer <tt>'['</tt> and
<tt>']'</tt> of the bracket expression can be confused with the missing bracket pair <tt>'['</tt> and <tt>']'</tt> necessary to
form a collating symbol, equivalence class, or character class; thus <tt>"[_:alpha:]"</tt> or <tt>"[::]"</tt> do not trigger the
unspecified behavior.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0044 [938], XBD/TC2-2008/0045 [872], XBD/TC2-2008/0046 [938],
XBD/TC2-2008/0047 [584], and XBD/TC2-2008/0048 [584] are applied.</p>
<p class="tent">Austin Group Defect 948 is applied, requiring that an ordinary character in a matching list only matches that
character.</p>
<p class="tent">Austin Group Defect 1190 is applied, clarifying which characters lose their special meaning inside a bracket
expression.</p>
<p class="tent">Austin Group Defect 1288 is applied, changing &quot;rejected as an error&quot; to &quot;treated as an invalid bracket
expression&quot;.</p>
<h5 class="header4"><a name="tag_21_09_03_06" id="tag_21_09_03_06"></a>A.9.3.6 BREs Matching Multiple Characters</h5>
<p class="tent">The limit of nine back-references to subexpressions in the RE is based on the use of a single-digit identifier;
increasing this to multiple digits would break historical applications. This does not imply that only nine subexpressions are
allowed in REs. The following is a valid BRE with ten subexpressions:</p>
<pre>
<tt>\(\(\(ab\)*c\)*d\)\(ef\)*\(gh\)\{2\}\(ij\)*\(kl\)*\(mn\)*\(op\)*\(qr\)*
</tt></pre>
<p class="tent">The standard developers regarded the common historical behavior, which supported <tt>"\n*"</tt>, but not
<tt>"\n\{min,max\}"</tt>, <tt>"\(...\)*"</tt>, or <tt>"\(...\)\{min,max\}"</tt>, as a non-intentional result of a specific
implementation, and they supported both duplication and interval expressions following subexpressions and back-references.</p>
<p class="tent">The changes to the processing of the back-reference expression remove an unspecified or ambiguous behavior in the
Shell and Utilities volume of POSIX.1-2024, aligning it with the requirements specified for the <a href=
"../functions/regcomp.html"><i>regcomp</i>()</a> expression, and is the result of PASC Interpretation 1003.2-92 #43 submitted for
the ISO&nbsp;POSIX-2:1993 standard.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0049 [595] is applied.</p>
<h5 class="header4"><a name="tag_21_09_03_07" id="tag_21_09_03_07"></a>A.9.3.7 BRE Precedence</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_09_03_08" id="tag_21_09_03_08"></a>A.9.3.8 BRE Expression Anchoring</h5>
<p class="tent">Often, the &lt;dollar-sign&gt; is viewed as matching the ending &lt;newline&gt; in text files. This is not strictly
true; the &lt;newline&gt; is typically eliminated from the strings to be matched, and the &lt;dollar-sign&gt; matches the
terminating null character.</p>
<p class="tent">The ability of <tt>'^'</tt>, <tt>'$'</tt>, and <tt>'*'</tt> to be non-special in certain circumstances may be
confusing to some programmers, but this situation was changed only in a minor way from historical practice to avoid breaking many
historical scripts. Some consideration was given to making the use of the anchoring characters undefined if not escaped and not at
the beginning or end of strings. This would cause a number of historical BREs, such as <tt>"2^10"</tt>, <tt>"$HOME"</tt>, and
<tt>"$1.35"</tt>, that relied on the characters being treated literally, to become invalid.</p>
<p class="tent">However, one relatively uncommon case was changed to allow an extension used on some implementations. Historically,
the BREs <tt>"^foo"</tt> and <tt>"\(^foo\)"</tt> did not match the same string, despite the general rule that subexpressions and
entire BREs match the same strings. To increase consensus, POSIX.1-2024 has allowed an extension on some implementations to treat
these two cases in the same way by declaring that anchoring <i>may</i> occur at the beginning or end of a subexpression. Therefore,
portable BREs that require a literal &lt;circumflex&gt; at the beginning or a &lt;dollar-sign&gt; at the end of a subexpression
must escape them. Note that a BRE such as <tt>"a\(^bc\)"</tt> will either match <tt>"a^bc"</tt> or nothing on different systems
under the rules.</p>
<p class="tent">ERE anchoring has been different from BRE anchoring in all historical systems. An unescaped anchor character has
never matched its literal counterpart outside a bracket expression. Some implementations treated <tt>"foo$bar"</tt> as a valid
expression that never matched anything; others treated it as invalid. POSIX.1-2024 mandates the former, valid unmatched
behavior.</p>
<p class="tent">Some implementations have extended the BRE syntax to add alternation. For example, the subexpression
<tt>"\(foo$\|bar\)"</tt> would match either <tt>"foo"</tt> at the end of the string or <tt>"bar"</tt> anywhere. The extension is
triggered by the use of the undefined <tt>"\|"</tt> sequence. Because the BRE is undefined for portable scripts, the extending
system is free to make other assumptions, such that the <tt>'$'</tt> represents the end-of-line anchor in the middle of a
subexpression. If it were not for the extension, the <tt>'$'</tt> would match a literal &lt;dollar-sign&gt; under the rules.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0049 [595] is applied.</p>
<p class="tent">Austin Group Defect 1546 is applied, adding optional support for <tt>"\?"</tt>, <tt>"\+"</tt>, and
<tt>"\|"</tt>.</p>
<p class="tent">Austin Group Defect 1579 is applied, eliminating an inconsistency between the list items relating to
&lt;circumflex&gt; and &lt;dollar-sign&gt;.</p>
<h4><a name="tag_21_09_04" id="tag_21_09_04"></a>A.9.4 Extended Regular Expressions</h4>
<p class="tent">As with BREs, the standard developers decided to make the interpretation of escaped ordinary characters
undefined.</p>
<p class="tent">The &lt;right-parenthesis&gt; is not listed as an ERE special character because it is only special in the context
of a preceding &lt;left-parenthesis&gt;. If found without a preceding &lt;left-parenthesis&gt;, the &lt;right-parenthesis&gt; has
no special meaning.</p>
<p class="tent">The interval expression, <tt>"{m,n}"</tt>, has been added to EREs. Historically, the interval expression has only
been supported in some ERE implementations. The standard developers estimated that the addition of interval expressions to EREs
would not decrease consensus and would also make BREs more of a subset of EREs than in many historical implementations.</p>
<p class="tent">It was suggested that, in addition to interval expressions, back-references (<tt>'\n'</tt>) should also be added to
EREs. This was rejected by the standard developers as likely to decrease consensus.</p>
<p class="tent">In historical implementations, multiple duplication symbols are usually interpreted from left to right and treated
as additive. As an example, <tt>"a+*b"</tt> matches zero or more instances of <tt>'a'</tt> followed by a <tt>'b'</tt>. In
POSIX.1-2024, multiple duplication symbols are undefined; that is, they cannot be relied upon for conforming applications. One
reason for this is to provide some scope for future enhancements.</p>
<p class="tent">The precedence of operations differs between EREs and those in <a href="../utilities/lex.html"><i>lex</i></a>; in
<a href="../utilities/lex.html"><i>lex</i></a>, for historical reasons, interval expressions have a lower precedence than
concatenation.</p>
<p class="tent">Austin Group Defect 1139 is applied, making minor editorial changes to several subsections of this section and
changing them to require that, when not inside a bracket expression, <tt>"\]"</tt> matches <tt>']'</tt> and <tt>"\}"</tt> matches
<tt>'}'</tt>.</p>
<h5 class="header4"><a name="tag_21_09_04_01" id="tag_21_09_04_01"></a>A.9.4.1 EREs Matching a Single Character or Collating
Element</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_09_04_02" id="tag_21_09_04_02"></a>A.9.4.2 ERE Ordinary Characters</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0050 [554] is applied.</p>
<h5 class="header4"><a name="tag_21_09_04_03" id="tag_21_09_04_03"></a>A.9.4.3 ERE Special Characters</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0050 [554] is applied.</p>
<h5 class="header4"><a name="tag_21_09_04_04" id="tag_21_09_04_04"></a>A.9.4.4 Periods in EREs</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_09_04_05" id="tag_21_09_04_05"></a>A.9.4.5 ERE Bracket Expression</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_09_04_06" id="tag_21_09_04_06"></a>A.9.4.6 EREs Matching Multiple Characters</h5>
<p class="tent">Austin Group Defects 793 and 1329 are applied, adding the repetition modifier <tt>'?'</tt> and the REG_MINIMAL
flag.</p>
<h5 class="header4"><a name="tag_21_09_04_07" id="tag_21_09_04_07"></a>A.9.4.7 ERE Alternation</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_09_04_08" id="tag_21_09_04_08"></a>A.9.4.8 ERE Precedence</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_09_04_09" id="tag_21_09_04_09"></a>A.9.4.9 ERE Expression Anchoring</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0051 [595] is applied.</p>
<h4><a name="tag_21_09_05" id="tag_21_09_05"></a>A.9.5 Regular Expression Grammar</h4>
<p class="tent">The grammars are intended to represent the range of acceptable syntaxes available to conforming applications. There
are instances in the text where undefined constructs are described; as explained previously, these allow implementation extensions.
There is no intended requirement that an implementation extension must somehow fit into the grammars shown here.</p>
<p class="tent">The BRE grammar does not permit L_ANCHOR or R_ANCHOR inside <tt>"\("</tt> and <tt>"\)"</tt> (which implies that
<tt>'^'</tt> and <tt>'$'</tt> are ordinary characters). This reflects the semantic limits on the application, as noted in XBD
<a href="../basedefs/V1_chap09.html#tag_09_03_08"><i>9.3.8 BRE Expression Anchoring</i></a>. Implementations are permitted to
extend the language to interpret <tt>'^'</tt> and <tt>'$'</tt> as anchors in these locations, and as such, conforming applications
cannot use unescaped <tt>'^'</tt> and <tt>'$'</tt> in positions inside <tt>"\("</tt> and <tt>"\)"</tt> that might be interpreted as
anchors.</p>
<p class="tent">The ERE grammar does not permit several constructs that XBD <a href=
"../basedefs/V1_chap09.html#tag_09_04_02"><i>9.4.2 ERE Ordinary Characters</i></a> and <a href=
"../basedefs/V1_chap09.html#tag_09_04_03"><i>9.4.3 ERE Special Characters</i></a> specify as having undefined results:</p>
<ul>
<li class="tent">ORD_CHAR preceded by &lt;backslash&gt;</li>
<li class="tent"><i>ERE_dupl_symbol</i>(s) appearing first in an ERE, or immediately following <tt>'|'</tt>, <tt>'^'</tt>, or
<tt>'('</tt></li>
<li class="tent"><tt>'{'</tt> not part of a valid <i>ERE_dupl_symbol</i></li>
<li class="tent"><tt>'|'</tt> appearing first or last in an ERE, or immediately following <tt>'|'</tt> or <tt>'('</tt>, or
immediately preceding <tt>')'</tt></li>
</ul>
<p class="tent">Implementations are permitted to extend the language to allow these. Conforming applications cannot use such
constructs.</p>
<h5 class="header4"><a name="tag_21_09_05_01" id="tag_21_09_05_01"></a>A.9.5.1 BRE/ERE Grammar Lexical Conventions</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0052 [554] is applied.</p>
<p class="tent">Austin Group Defect 1139 is applied, updating <b>QUOTED_CHAR</b> to add <tt>\]</tt> to the BRE list and add
<tt>\]</tt> and <tt>\}</tt> to the ERE list, and changing &quot;outside bracket expressions&quot; to &quot;except inside bracket
expressions&quot;.</p>
<p class="tent">Austin Group Defect 1546 is applied, adding optional support for <tt>\?</tt>, <tt>\+</tt>, and <tt>\|</tt> in
BREs.</p>
<h5 class="header4"><a name="tag_21_09_05_02" id="tag_21_09_05_02"></a>A.9.5.2 RE and Bracket Expression Grammar</h5>
<p class="tent">The removal of the <i>Back_open_paren</i> <i>Back_close_paren</i> option from the <i>nondupl_RE</i> specification
is the result of PASC Interpretation 1003.2-92 #43 submitted for the ISO&nbsp;POSIX-2:1993 standard. Although the grammar required
support for null subexpressions, this section does not describe the meaning of, and historical practice did not support, this
construct.</p>
<p class="tent">Austin Group Defect 1546 is applied, adding optional support for <tt>\?</tt>, <tt>\+</tt>, and <tt>\|</tt> in
BREs.</p>
<h5 class="header4"><a name="tag_21_09_05_03" id="tag_21_09_05_03"></a>A.9.5.3 ERE Grammar</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0052 [554] and XBD/TC2-2008/0053 [916] are applied.</p>
<h3><a name="tag_21_10" id="tag_21_10"></a>A.10 Directory Structure and Devices</h3>
<h4><a name="tag_21_10_01" id="tag_21_10_01"></a>A.10.1 Directory Structure and Files</h4>
<p class="tent">A description of the historical <b>/usr/tmp</b> was omitted, removing any concept of differences in emphasis
between the <b>/</b> and <b>/usr</b> directories. The descriptions of <b>/bin</b>, <b>/usr/bin</b>, <b>/lib</b>, and
<b>/usr/lib</b> were omitted because they are not useful for applications. In an early draft, a distinction was made between system
and application directory usage, but this was not found to be useful.</p>
<p class="tent">The directories <b>/</b> and <b>/dev</b> are included because the notion of a hierarchical directory structure is
key to other information presented elsewhere in POSIX.1-2024. In early drafts, it was argued that special devices and temporary
files could conceivably be handled without a directory structure on some implementations. For example, the system could treat the
characters <tt>"/tmp"</tt> as a special token that would store files using some non-POSIX file system structure. This notion was
rejected by the standard developers, who required that all the files in this section be implemented via POSIX file systems.</p>
<p class="tent">The <b>/tmp</b> directory is retained in POSIX.1-2024 to accommodate historical applications that assume its
availability. Implementations are encouraged to provide suitable directory names in the environment variable <i>TMPDIR</i> and
applications are encouraged to use the contents of <i>TMPDIR</i> for creating temporary files.</p>
<p class="tent">The standard files <b>/dev/null</b> and <b>/dev/tty</b> are required to be both readable and writable to allow
applications to have the intended historical access to these files.</p>
<p class="tent">The standard file <b>/dev/console</b> has been added for alignment with the Single UNIX Specification.</p>
<h4><a name="tag_21_10_02" id="tag_21_10_02"></a>A.10.2 Output Devices and Terminal Types</h4>
<p class="tent">IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XBD/TC2/D6/17 is applied, making it clear that the
requirements for documenting terminal support are in the system documentation.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0054 [967] is applied.</p>
<h3><a name="tag_21_11" id="tag_21_11"></a>A.11 General Terminal Interface</h3>
<p class="tent">If the implementation does not support this interface on any device types, it should behave as if it were being
used on a device that is not a terminal device (in most cases <i>errno</i> will be set to [ENOTTY] on return from functions defined
by this interface). This is based on the fact that many applications are written to run both interactively and in some
non-interactive mode, and they adapt themselves at runtime. Requiring that they all be modified to test an environment variable to
determine whether they should try to adapt is unnecessary. On a system that provides no general terminal interface, providing all
the entry points as stubs that return [ENOTTY] (or an equivalent, as appropriate) has the same effect and requires no changes to
the application.</p>
<p class="tent">Although the needs of both interface implementors and application developers were addressed throughout
POSIX.1-2024, this section pays more attention to the needs of the latter. This is because, while many aspects of the programming
interface can be hidden from the user by the application developer, the terminal interface is usually a large part of the user
interface. Although to some extent the application developer can build missing features or work around inappropriate ones, the
difficulties of doing that are greater in the terminal interface than elsewhere. For example, efficiency prohibits the average
program from interpreting every character passing through it in order to simulate character erase, line kill, and so on. These
functions should usually be done by the operating system, possibly at the interrupt level.</p>
<p class="tent">The <i>tc*</i>() functions were introduced as a way of avoiding the problems inherent in the traditional
<i>ioctl</i>() function and in variants of it that were proposed. For example, <a href=
"../functions/tcsetattr.html"><i>tcsetattr</i>()</a> is specified in place of the use of the TCSETA <i>ioctl</i>() command
function. This allows specification of all the arguments in a manner consistent with the ISO&nbsp;C standard unlike the varying
third argument of <i>ioctl</i>(), which is sometimes a pointer (to any of many different types) and sometimes an <b>int</b>.</p>
<p class="tent">The advantages of this new method include:</p>
<ul>
<li class="tent">It allows strict type checking.</li>
<li class="tent">The direction of transfer of control data is explicit.</li>
<li class="tent">Portable capabilities are clearly identified.</li>
<li class="tent">The need for a general interface routine is avoided.</li>
<li class="tent">Size of the argument is well-defined (there is only one type).</li>
</ul>
<p class="tent">The disadvantages include:</p>
<ul>
<li class="tent">No historical implementation used the new method.</li>
<li class="tent">There are many small routines instead of one general-purpose one.</li>
<li class="tent">The historical parallel with <a href="../functions/fcntl.html"><i>fcntl</i>()</a> is broken.</li>
</ul>
<p class="tent">The issue of modem control was excluded from POSIX.1-2024 on the grounds that:</p>
<ul>
<li class="tent">It was concerned with setting and control of hardware timers.</li>
<li class="tent">The appropriate timers and settings vary widely internationally.</li>
<li class="tent">Feedback from European computer manufacturers indicated that this facility was not consistent with European needs
and that specification of such a facility was not a requirement for portability.</li>
</ul>
<h4><a name="tag_21_11_01" id="tag_21_11_01"></a>A.11.1 Interface Characteristics</h4>
<h5 class="header4"><a name="tag_21_11_01_01" id="tag_21_11_01_01"></a>A.11.1.1 Opening a Terminal Device File</h5>
<p class="tent">The O_TTY_INIT flag for <a href="../functions/open.html"><i>open</i>()</a> has been added to POSIX.1-2024 to solve
a problem encountered by applications written for earlier versions of this standard which need to open a modem or similar device
and initialize all of the parameter settings. Using the <a href=
"../functions/tcgetattr.html"><i>tcgetattr</i>()</a>-modify-<a href="../functions/tcsetattr.html"><i>tcsetattr</i>()</a> method
mandated by the standard could result in non-conforming behavior if the device had previously been used with non-conforming
parameter settings, on implementations which do not reset the parameter settings in between the last close of the device by one
application and the first open by another application. To avoid this problem, some application developers were resorting to using
<a href="../functions/memset.html"><i>memset</i>()</a> to zero the <b>termios</b> structure before setting all of the standard
parameters, but this risks non-conforming behavior on systems where some non-standard parameter needs a non-zero value in order for
the terminal to behave in a conforming manner.</p>
<p class="tent">On systems which do reset the parameter settings to defaults between uses of a terminal device, it is expected that
either O_TTY_INIT will have the value zero or <i>open</i>(<i>ttypath</i>, O_RDWR|O_TTY_INIT) will do nothing additional.</p>
<p class="tent">The standard developers considered an alternative solution of a special <i>fildes</i> argument for the <a href=
"../functions/tcgetattr.html"><i>tcgetattr</i>()</a> call to obtain default parameters. However, this would not be adequate if a
system supports several different types of terminal device and the default settings need to differ between the different types.
With the O_TTY_INIT open flag, the implementor can determine which device type is being opened.</p>
<p class="tent">The standard developers also considered a special POSIX_TTY_INIT value for the <b>termios</b> structure used in
<a href="../functions/tcsetattr.html"><i>tcsetattr</i>()</a>, which would reset the values if used immediately after an <a href=
"../functions/open.html"><i>open</i>()</a> call. However, it was felt that this would lead to confusion amongst application
developers who wanted to reset the parameters at other points, and implementations might diverge.</p>
<p class="tent">Austin Group Defect 1466 is applied, changing the terminology used for pseudo-terminal devices.</p>
<h5 class="header4"><a name="tag_21_11_01_02" id="tag_21_11_01_02"></a>A.11.1.2 Process Groups</h5>
<p class="tent">There is a potential race when the members of the foreground process group on a terminal leave that process group,
either by exit or by changing process groups. After the last process exits the process group, but before the foreground process
group ID of the terminal is changed (usually by a job control shell), it would be possible for a new process to be created with its
process ID equal to the terminal's foreground process group ID. That process might then become the process group leader and
accidentally be placed into the foreground on a terminal that was not necessarily its controlling terminal. As a result of this
problem, the controlling terminal is defined to not have a foreground process group during this time.</p>
<p class="tent">The cases where a controlling terminal has no foreground process group occur when all processes in the foreground
process group either terminate and are waited for or join other process groups via <a href=
"../functions/setpgid.html"><i>setpgid</i>()</a> or <a href="../functions/setsid.html"><i>setsid</i>()</a>. If the process group
leader terminates, this is the first case described; if it leaves the process group via <a href=
"../functions/setpgid.html"><i>setpgid</i>()</a>, this is the second case described (a process group leader cannot successfully
call <a href="../functions/setsid.html"><i>setsid</i>()</a>). When one of those cases causes a controlling terminal to have no
foreground process group, it has two visible effects on applications. The first is the value returned by <a href=
"../functions/tcgetpgrp.html"><i>tcgetpgrp</i>()</a>. The second (which occurs only in the case where the process group leader
terminates) is the sending of signals in response to special input characters. The intent of POSIX.1-2024 is that no process group
be wrongly identified as the foreground process group by <a href="../functions/tcgetpgrp.html"><i>tcgetpgrp</i>()</a> or
unintentionally receive signals because of placement into the foreground.</p>
<p class="tent">In 4.3 BSD, the old process group ID continues to be used to identify the foreground process group and is returned
by the function equivalent to <a href="../functions/tcgetpgrp.html"><i>tcgetpgrp</i>()</a>. In that implementation it is possible
for a newly created process to be assigned the same value as a process ID and then form a new process group with the same value as
a process group ID. The result is that the new process group would receive signals from this terminal for no apparent reason, and
POSIX.1-2024 precludes this by forbidding a process group from entering the foreground in this way. It would be more direct to
place part of the requirement made by the last sentence under <a href="../functions/fork.html"><i>fork</i>()</a>, but there is no
convenient way for that section to refer to the value that <a href="../functions/tcgetpgrp.html"><i>tcgetpgrp</i>()</a> returns,
since in this case there is no process group and thus no process group ID.</p>
<p class="tent">One possibility for a conforming implementation is to behave similarly to 4.3 BSD, but to prevent this reuse of the
ID, probably in the implementation of <a href="../functions/fork.html"><i>fork</i>()</a>, as long as it is in use by the
terminal.</p>
<p class="tent">Another possibility is to recognize when the last process stops using the terminal's foreground process group ID,
which is when the process group lifetime ends, and to change the terminal's foreground process group ID to a reserved value that is
never used as a process ID or process group ID. (See the definition of <i>process group lifetime</i> in the definitions section.)
The process ID can then be reserved until the terminal has another foreground process group.</p>
<p class="tent">The 4.3 BSD implementation permits the leader (and only member) of the foreground process group to leave the
process group by calling the equivalent of <a href="../functions/setpgid.html"><i>setpgid</i>()</a> and to later return, expecting
to return to the foreground. There are no known application needs for this behavior, and POSIX.1-2024 neither requires nor forbids
it (except that it is forbidden for session leaders) by leaving it unspecified.</p>
<h5 class="header4"><a name="tag_21_11_01_03" id="tag_21_11_01_03"></a>A.11.1.3 The Controlling Terminal</h5>
<p class="tent">POSIX.1-2024 does not specify a mechanism by which to allocate a controlling terminal. This is normally done by a
system utility (such as <i>getty</i>) and is considered an administrative feature outside the scope of POSIX.1-2024.</p>
<p class="tent">Historical implementations allocate controlling terminals on certain <a href=
"../functions/open.html"><i>open</i>()</a> calls. Since <a href="../functions/open.html"><i>open</i>()</a> is part of POSIX.1, its
behavior had to be dealt with. The traditional behavior is not required because it is not very straightforward or flexible for
either implementations or applications. However, because of its prevalence, it was not practical to disallow this behavior either.
Thus, a mechanism was standardized to ensure portable, predictable behavior in <a href=
"../functions/open.html"><i>open</i>()</a>.</p>
<p class="tent">Some historical implementations deallocate a controlling terminal on the last system-wide close. This behavior in
neither required nor prohibited. Even on implementations that do provide this behavior, applications generally cannot depend on it
due to its system-wide nature.</p>
<h5 class="header4"><a name="tag_21_11_01_04" id="tag_21_11_01_04"></a>A.11.1.4 Terminal Access Control</h5>
<p class="tent">The access controls described in this section apply only to a process that is accessing its controlling terminal. A
process accessing a terminal that is not its controlling terminal is effectively treated the same as a member of the foreground
process group. While this may seem unintuitive, note that these controls are for the purpose of job control, not security, and job
control relates only to the controlling terminal of a process. Normal file access permissions handle security.</p>
<p class="tent">If the process calling <a href="../functions/read.html"><i>read</i>()</a> or <a href=
"../functions/write.html"><i>write</i>()</a> is in a background process group that is orphaned, it is not desirable to stop the
process group, as it is no longer under the control of a job control shell that could put it into the foreground again.
Accordingly, calls to <a href="../functions/read.html"><i>read</i>()</a> or <a href="../functions/write.html"><i>write</i>()</a>
functions by such processes receive an immediate error return. This is different from 4.2 BSD, which kills orphaned processes that
receive terminal stop signals.</p>
<p class="tent">The foreground/background/orphaned process group check performed by the terminal driver must be repeatedly
performed until the calling process moves into the foreground or until the process group of the calling process becomes orphaned.
That is, when the terminal driver determines that the calling process is in the background and should receive a job control signal,
it sends the appropriate signal (SIGTTIN or SIGTTOU) to every process in the process group of the calling process and then it
allows the calling process to immediately receive the signal. The latter is typically performed by blocking the process so that the
signal is immediately noticed. Note, however, that after the process finishes receiving the signal and control is returned to the
driver, the terminal driver must re-execute the foreground/background/orphaned process group check. The process may still be in the
background, either because it was continued in the background by a job control shell, or because it caught the signal and did
nothing.</p>
<p class="tent">The terminal driver repeatedly performs the foreground/background/orphaned process group checks whenever a process
is about to access the terminal. In the case of <a href="../functions/write.html"><i>write</i>()</a> or the control <i>tc*</i>()
functions, the check is performed at the entry of the function. In the case of <a href="../functions/read.html"><i>read</i>()</a>,
the check is performed not only at the entry of the function, but also after blocking the process to wait for input characters (if
necessary). That is, once the driver has determined that the process calling the <a href="../functions/read.html"><i>read</i>()</a>
function is in the foreground, it attempts to retrieve characters from the input queue. If the queue is empty, it blocks the
process waiting for characters. When characters are available and control is returned to the driver, the terminal driver must
return to the repeated foreground/background/orphaned process group check again. The process may have moved from the foreground to
the background while it was blocked waiting for input characters.</p>
<p class="tent">Austin Group Defect 1151 is applied, adding <a href="../functions/tcsetwinsize.html"><i>tcsetwinsize</i>()</a>.</p>
<h5 class="header4"><a name="tag_21_11_01_05" id="tag_21_11_01_05"></a>A.11.1.5 Input Processing and Reading Data</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_11_01_06" id="tag_21_11_01_06"></a>A.11.1.6 Canonical Mode Input Processing</h5>
<p class="tent">The term &quot;character&quot; is intended here. ERASE should erase the last character, not the last byte. In the case of
multi-byte characters, these two may be different.</p>
<p class="tent">4.3 BSD has a WERASE character that erases the last &quot;word&quot; typed (but not any preceding &lt;blank&gt; or
&lt;tab&gt; characters). A word is defined as a sequence of non-&lt;blank&gt; characters, with &lt;tab&gt; characters counted as
&lt;blank&gt; characters. Like ERASE, WERASE does not erase beyond the beginning of the line. This WERASE feature has not been
specified in POSIX.1 because it is difficult to define in the international environment. It is only useful for languages where
words are delimited by &lt;blank&gt; characters. In some ideographic languages, such as Japanese and Chinese, words are not
delimited at all. The WERASE character should presumably go back to the beginning of a sentence in those cases; practically, this
means it would not be used much for those languages.</p>
<p class="tent">It should be noted that there is a possible inherent deadlock if the application and implementation conflict on the
value of {MAX_CANON}. With ICANON set (if IXOFF is enabled) and more than {MAX_CANON} characters transmitted without a
&lt;linefeed&gt;, transmission will be stopped, the &lt;linefeed&gt; (or &lt;carriage-return&gt; when ICRLF is set) will never
arrive, and the <a href="../functions/read.html"><i>read</i>()</a> will never be satisfied.</p>
<p class="tent">An application should not set IXOFF if it is using canonical mode unless it knows that (even in the face of a
transmission error) the conditions described previously cannot be met or unless it is prepared to deal with the possible deadlock
in some other way, such as timeouts.</p>
<p class="tent">It should also be noted that this can be made to happen in non-canonical mode if the trigger value for sending
IXOFF is less than VMIN and VTIME is zero.</p>
<h5 class="header4"><a name="tag_21_11_01_07" id="tag_21_11_01_07"></a>A.11.1.7 Non-Canonical Mode Input Processing</h5>
<p class="tent">Some points to note about MIN and TIME:</p>
<ol>
<li class="tent">The interactions of MIN and TIME are not symmetric. For example, when MIN&gt;0 and TIME=0, TIME has no effect.
However, in the opposite case where MIN=0 and TIME&gt;0, both MIN and TIME play a role in that MIN is satisfied with the receipt of
a single character.</li>
<li class="tent">Also note that in case A (MIN&gt;0, TIME&gt;0), TIME represents an inter-character timer, while in case C (MIN=0,
TIME&gt;0), TIME represents a read timer.</li>
</ol>
<p class="tent">These two points highlight the dual purpose of the MIN/TIME feature. Cases A and B, where MIN&gt;0, exist to handle
burst-mode activity (for example, file transfer programs) where a program would like to process at least MIN characters at a time.
In case A, the inter-character timer is activated by a user as a safety measure; in case B, it is turned off.</p>
<p class="tent">Cases C and D exist to handle single-character timed transfers. These cases are readily adaptable to screen-based
applications that need to know if a character is present in the input queue before refreshing the screen. In case C, the read is
timed; in case D, it is not.</p>
<p class="tent">Another important note is that MIN is always just a minimum. It does not denote a record length. That is, if a
program does a read of 20 bytes, MIN is 10, and 25 characters are present, 20 characters are returned to the user. In the special
case of MIN=0, this still applies: if more than one character is available, they all will be returned immediately.</p>
<h5 class="header4"><a name="tag_21_11_01_08" id="tag_21_11_01_08"></a>A.11.1.8 Writing Data and Output Processing</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_11_01_09" id="tag_21_11_01_09"></a>A.11.1.9 Special Characters</h5>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0055 [745] is applied.</p>
<h5 class="header4"><a name="tag_21_11_01_10" id="tag_21_11_01_10"></a>A.11.1.10 Modem Disconnect</h5>
<p class="tent">There is no additional rationale provided for this section.</p>
<h5 class="header4"><a name="tag_21_11_01_11" id="tag_21_11_01_11"></a>A.11.1.11 Closing a Terminal Device File</h5>
<p class="tent">POSIX.1-2024 does not specify that a <a href="../functions/close.html"><i>close</i>()</a> on a terminal device file
include the equivalent of a call to <i>tcflow</i>(<i>fd</i>,TCOON).</p>
<p class="tent">An implementation that discards output at the time <a href="../functions/close.html"><i>close</i>()</a> is called
after reporting the return value to the <a href="../functions/write.html"><i>write</i>()</a> call that data was written does not
conform with POSIX.1-2024. An application has functions such as <a href="../functions/tcdrain.html"><i>tcdrain</i>()</a>, <a href=
"../functions/tcflush.html"><i>tcflush</i>()</a>, and <a href="../functions/tcflow.html"><i>tcflow</i>()</a> available to obtain
the detailed behavior it requires with respect to flushing of output.</p>
<p class="tent">At the time of the last close on a terminal device, an application relinquishes any ability to exert flow control
via <a href="../functions/tcflow.html"><i>tcflow</i>()</a>.</p>
<h4><a name="tag_21_11_02" id="tag_21_11_02"></a>A.11.2 Parameters that Can be Set</h4>
<h5 class="header4"><a name="tag_21_11_02_01" id="tag_21_11_02_01"></a>A.11.2.1 The termios Structure</h5>
<p class="tent">This structure is part of an interface that, in general, retains the historic grouping of flags. Although a more
optimal structure for implementations may be possible, the degree of change to applications would be significantly larger.</p>
<h5 class="header4"><a name="tag_21_11_02_02" id="tag_21_11_02_02"></a>A.11.2.2 Input Modes</h5>
<p class="tent">Some historical implementations treated a long break as multiple events, as many as one per character time. The
wording in POSIX.1 explicitly prohibits this.</p>
<p class="tent">Although the ISTRIP flag is normally superfluous with today's terminal hardware and software, it is historically
supported. Therefore, applications may be using ISTRIP, and there is no technical problem with supporting this flag. Also,
applications may wish to receive only 7-bit input bytes and may not be connected directly to the hardware terminal device (for
example, when a connection traverses a network).</p>
<p class="tent">Also, there is no requirement in general that the terminal device ensures that high-order bits beyond the specified
character size are cleared. ISTRIP provides this function for 7-bit characters, which are common.</p>
<p class="tent">In dealing with multi-byte characters, the consequences of a parity error in such a character, or in an escape
sequence affecting the current character set, are beyond the scope of POSIX.1 and are best dealt with by the application processing
the multi-byte characters.</p>
<h5 class="header4"><a name="tag_21_11_02_03" id="tag_21_11_02_03"></a>A.11.2.3 Output Modes</h5>
<p class="tent">POSIX.1 does not describe post-processing of output to a terminal or detailed control of that from a conforming
application. (That is, translation of &lt;newline&gt; to &lt;carriage-return&gt; followed by &lt;linefeed&gt; or &lt;tab&gt;
processing.) There is nothing that a conforming application should do to its output for a terminal because that would require
knowledge of the operation of the terminal. It is the responsibility of the operating system to provide post-processing appropriate
to the output device, whether it is a terminal or some other type of device.</p>
<p class="tent">Extensions to POSIX.1 to control the type of post-processing already exist and are expected to continue into the
future. The control of these features is primarily to adjust the interface between the system and the terminal device so the output
appears on the display correctly. This should be set up before use by any application.</p>
<p class="tent">In general, both the input and output modes should not be set absolutely, but rather modified from the inherited
state.</p>
<h5 class="header4"><a name="tag_21_11_02_04" id="tag_21_11_02_04"></a>A.11.2.4 Control Modes</h5>
<p class="tent">This section could be misread that the symbol &quot;CSIZE&quot; is a title in the <b>termios</b> <i>c_cflag</i> field.
Although it does serve that function, it is also a required symbol, as a literal reading of POSIX.1 (and the caveats about
typography) would indicate.</p>
<h5 class="header4"><a name="tag_21_11_02_05" id="tag_21_11_02_05"></a>A.11.2.5 Local Modes</h5>
<p class="tent">Non-canonical mode is provided to allow fast bursts of input to be read efficiently while still allowing
single-character input.</p>
<p class="tent">The ECHONL function historically has been in many implementations. Since there seems to be no technical problem
with supporting ECHONL, it is included in POSIX.1 to increase consensus.</p>
<p class="tent">The alternate behavior possible when ECHOK or ECHOE are specified with ICANON is permitted as a compromise
depending on what the actual terminal hardware can do. Erasing characters and lines is preferred, but is not always possible.</p>
<h5 class="header4"><a name="tag_21_11_02_06" id="tag_21_11_02_06"></a>A.11.2.6 Special Control Characters</h5>
<p class="tent">Permitting VMIN and VTIME to overlap with VEOF and VEOL was a compromise for historical implementations. Only when
backwards-compatibility of object code is a serious concern to an implementor should an implementation continue this practice.
Correct applications that work with the overlap (at the source level) should also work if it is not present, but not the
reverse.</p>
<h3><a name="tag_21_12" id="tag_21_12"></a>A.12 Utility Conventions</h3>
<h4><a name="tag_21_12_01" id="tag_21_12_01"></a>A.12.1 Utility Argument Syntax</h4>
<p class="tent">The standard developers considered that recent trends toward diluting the SYNOPSIS sections of historical reference
pages to the equivalent of:</p>
<pre>
<tt>command </tt><b>[</b><i>options</i><b>][</b><i>operands</i><b>]</b><tt>
</tt></pre>
<p class="tent">were a disservice to the reader. Therefore, considerable effort was placed into rigorous definitions of all the
command line arguments and their interrelationships. The relationships depicted in the synopses are normative parts of
POSIX.1-2024; this information is sometimes repeated in textual form, but that is only for clarity within context.</p>
<p class="tent">The use of &quot;undefined&quot; for conflicting argument usage and for repeated usage of the same option is meant to
prevent conforming applications from using conflicting arguments or repeated options unless specifically allowed (as is the case
with <a href="../utilities/ls.html"><i>ls</i></a>, which allows simultaneous, repeated use of the <b>-C</b>, <b>-l</b>, and
<b>-1</b> options). Many historical implementations will tolerate this usage, choosing either the first or the last applicable
argument. This tolerance can continue, but conforming applications cannot rely upon it. (Other implementations may choose to print
usage messages instead.)</p>
<p class="tent">The use of &quot;undefined&quot; for conflicting argument usage also allows an implementation to make reasonable extensions
to utilities where the implementor considers mutually-exclusive options according to POSIX.1-2024 to have a sensible meaning and
result.</p>
<p class="tent">POSIX.1-2024 does not define the result of a command when an option-argument or operand is not followed by ellipses
and the application specifies more than one of that option-argument or operand. This allows an implementation to define valid
(although non-standard) behavior for the utility when more than one such option or operand is specified.</p>
<p class="tent">The requirements for option-arguments are summarized as follows:</p>
<center>
<table border="1" cellpadding="3" align="center">
<tr valign="top">
<th align="center">
<p class="tent">&nbsp;</p>
</th>
<th colspan="2" align="center">
<p class="tent"><b>SYNOPSIS Shows:</b></p>
</th>
</tr>
<tr valign="top">
<td align="right">
<p class="tent">&nbsp;</p>
</td>
<td align="center">
<p class="tent">-a <i>arg</i></p>
</td>
<td align="center">
<p class="tent">-c[<i>arg</i>]</p>
</td>
</tr>
<tr valign="top">
<td align="right">
<p class="tent">Conforming application uses:</p>
</td>
<td align="center">
<p class="tent">-a <i>arg</i></p>
</td>
<td align="center">
<p class="tent">-c<i>arg</i> or <tt>-c</tt></p>
</td>
</tr>
<tr valign="top">
<td align="right">
<p class="tent">System supports:</p>
</td>
<td align="center">
<p class="tent">-a <i>arg</i> and <tt>-a</tt><i>arg</i></p>
</td>
<td align="center">
<p class="tent">-c<i>arg</i> and <tt>-c</tt></p>
</td>
</tr>
<tr valign="top">
<td align="right">
<p class="tent">Non-conforming applications may use:</p>
</td>
<td align="center">
<p class="tent">-a<i>arg</i></p>
</td>
<td align="center">
<p class="tent">N/A</p>
</td>
</tr>
</table>
</center>
<p class="tent">Earlier versions of this standard included obsolescent syntax which showed some options with (mandatory) adjacent
option-arguments in the SYNOPSIS for some utilities. These have since been removed. For all options with mandatory
option-arguments, the SYNOPSIS now shows &lt;blank&gt; characters between the option and the option-argument; however, historical
usage has not been consistent in this area; therefore, &lt;blank&gt; characters are required to be used by conforming applications
and to be handled by all implementations, but implementations are also required to handle an adjacent option-argument in order to
preserve backwards-compatibility for old scripts. One of the justifications for selecting the multiple-argument method was that the
single-argument case is inherently ambiguous when the option-argument can legitimately be a null string.</p>
<p class="tent">POSIX.1-2024 explicitly states that digits are permitted as operands and option-arguments. The lower and upper
bounds for the values of the numbers used for operands and option-arguments were derived from the ISO&nbsp;C standard values for
{LONG_MIN} and {LONG_MAX}. The requirement on the standard utilities is that numbers in the specified range do not cause a syntax
error, although the specification of a number need not be semantically correct for a particular operand or option-argument of a
utility. For example, the specification of:</p>
<pre>
dd obs=3000000000
</pre>
<p class="tent">would yield undefined behavior for the application and could be a syntax error because the number 3000000000 is
outside of the range -2147483647 to +2147483647. On the other hand:</p>
<pre>
<tt>dd obs=2000000000
</tt></pre>
<p class="tent">may cause some error, such as &quot;blocksize too large&quot;, rather than a syntax error.</p>
<p class="tent">POSIX.1-2008, Technical Corrigendum 2, XBD/TC2-2008/0056 [584] and XBD/TC2-2008/0057 [813] are applied.</p>
<p class="tent">Austin Group Defect 1062 is applied, correcting the spacing in some example SYNOPSIS lines.</p>
<h4><a name="tag_21_12_02" id="tag_21_12_02"></a>A.12.2 Utility Syntax Guidelines</h4>
<p class="tent">This section is based on the rules listed in the SVID. It was included for two reasons:</p>
<ol>
<li class="tent">The individual utility descriptions in XCU <a href="../utilities/V3_chap03.html#tag_20"><i>3. Utilities</i></a>
needed a set of common (although not universal) actions on which they could anchor their descriptions of option and operand syntax.
Most of the standard utilities actually do use these guidelines, and many of their historical implementations use the <a href=
"../functions/getopt.html"><i>getopt</i>()</a> function for their parsing. Therefore, it was simpler to cite the rules and merely
identify exceptions.</li>
<li class="tent">Developers of conforming applications need suggested guidelines if the POSIX community is to avoid the chaos of
historical UNIX system command syntax.</li>
</ol>
<p class="tent">It is recommended that all <i>future</i> utilities and applications use these guidelines to enhance &quot;user
portability&quot;. The fact that some historical utilities could not be changed (to avoid breaking historical applications) should not
deter this future goal.</p>
<p class="tent">The voluntary nature of the guidelines is highlighted by repeated uses of the word <i>should</i> throughout. This
usage should not be misinterpreted to imply that utilities that claim conformance in their OPTIONS sections do not always
conform.</p>
<p class="tent">Guidelines 1 and 2 encourage utility writers to use only characters from the portable character set because use of
locale-specific characters may make the utility inaccessible from other locales. Use of uppercase letters is discouraged due to
problems associated with porting utilities to systems that do not distinguish between uppercase and lowercase characters in
filenames. Use of non-alphanumeric characters is discouraged due to the number of utilities that treat non-alphanumeric characters
in &quot;special&quot; ways depending on context (such as the shell using white-space characters to delimit arguments, various quote
characters for quoting, the &lt;dollar-sign&gt; to introduce variable expansion, etc.).</p>
<p class="tent">In XCU <a href="../utilities/V3_chap02.html#tag_19_09_01"><i>2.9.1 Simple Commands</i></a>, it is further stated
that a command used in the Shell Command Language cannot be named with a trailing &lt;colon&gt;.</p>
<p class="tent">Guideline 3 was changed to allow alphanumeric characters (letters and digits) from the character set to allow
compatibility with historical usage. Historical practice allows the use of digits wherever practical, and there are no portability
issues that would prohibit the use of digits. In fact, from an internationalization viewpoint, digits (being
non-language-dependent) are preferable over letters (a <b>-2</b> is intuitively self-explanatory to any user, while in the
<b>-f</b> <i>filename</i> the letter <tt>'f'</tt> is a mnemonic aid only to speakers of Latin-based languages where &quot;filename&quot;
happens to translate to a word that begins with <tt>'f'</tt>. Since Guideline 3 still retains the word &quot;single&quot;, multi-digit
options are not allowed. Instances of historical utilities that used them have been marked obsolescent, with the numbers being
changed from option names to option-arguments.</p>
<p class="tent">It was difficult to achieve a satisfactory solution to the problem of name space in option characters. When the
standard developers desired to extend the historical <i>cc</i> utility to accept ISO&nbsp;C standard programs, they found that all
of the portable alphabet was already in use by various vendors. Thus, they had to devise a new name, <i>c89</i> (subsequently
superseded by <i>c99</i> and now by <a href="../utilities/c17.html"><i>c17</i></a>), rather than something like <i>cc</i>
<b>-X</b>. There were suggestions that implementors be restricted to providing extensions through various means (such as using a
&lt;plus-sign&gt; as the option delimiter or using option characters outside the alphanumeric set) that would reserve all of the
remaining alphanumeric characters for future POSIX standards. These approaches were resisted because they lacked the historical
style of UNIX systems. Furthermore, if a vendor-provided option should become commonly used in the industry, it would be a
candidate for standardization. It would be desirable to standardize such a feature using historical practice for the syntax (the
semantics can be standardized with any syntax). This would not be possible if the syntax was one reserved for the vendor. However,
since the standardization process may lead to minor changes in the semantics, it may prove to be better for a vendor to use a
syntax that will not be affected by standardization.</p>
<p class="tent">Guideline 8 includes the concept of &lt;comma&gt;-separated lists in a single argument. It is up to the utility to
parse such a list itself because <a href="../functions/getopt.html"><i>getopt</i>()</a> just returns the single string. This
situation was retained so that certain historical utilities would not violate the guidelines. Applications preparing for
international use should be aware of an occasional problem with &lt;comma&gt;-separated lists: in some locales, the &lt;comma&gt;
is used as the radix character. Thus, if an application is preparing operands for a utility that expects a &lt;comma&gt;-separated
list, it should avoid generating non-integer values through one of the means that is influenced by setting the <i>LC_NUMERIC</i>
variable (such as <a href="../utilities/awk.html"><i>awk</i></a>, <a href="../utilities/bc.html"><i>bc</i></a>, <a href=
"../utilities/printf.html"><i>printf</i></a>, or <a href="../functions/printf.html"><i>printf</i>()</a>).</p>
<p class="tent">Unless explicitly stated otherwise in the utility description, Guideline 9 requires applications to put options
before operands, and requires utilities to accept any such usage without misinterpreting operands as options. For example, if an
implementation of the <a href="../utilities/printf.html"><i>printf</i></a> utility supports a <b>-e</b> option as an extension, the
command:</p>
<pre>
<tt>printf %s -e
</tt></pre>
<p class="tent">must output the string <tt>"-e"</tt> without interpreting the <b>-e</b> as an option. Similarly, the command:</p>
<pre>
<tt>ls myfile -l
</tt></pre>
<p class="tent">must interpret the <b>-l</b> argument as a second file operand, not as a <b>-l</b> option.</p>
<p class="tent">Applications calling any utility with a first operand starting with <tt>'-'</tt> should usually specify <b>--</b>,
as indicated by Guideline 10, to mark the end of the options. This is true even if the SYNOPSIS in the Shell and Utilities volume
of POSIX.1-2024 does not specify any options; implementations may provide options as extensions to the Shell and Utilities volume
of POSIX.1-2024. The standard utilities that do not support Guideline 10 indicate that fact in the OPTIONS section of the utility
description.</p>
<p class="tent">Guideline 7 allows any string to be an option-argument; an option-argument can begin with any character, can be
<b>-</b> or <b>--</b>, and can be an empty string. For example, the commands <a href="../utilities/pr.html"><i>pr</i></a> <b>-h
-</b>, <a href="../utilities/pr.html"><i>pr</i></a> <b>-h --</b>, <a href="../utilities/pr.html"><i>pr</i></a> <b>-h -d</b>,
<a href="../utilities/pr.html"><i>pr</i></a> <b>-h +2</b>, and <a href="../utilities/pr.html"><i>pr</i></a> <b>-h &quot;</b> contain
the option-arguments <b>-</b>, <b>--</b>, <b>-d</b>, <b>+2</b>, and an empty string, respectively. Conversely, the command <a href=
"../utilities/pr.html"><i>pr</i></a> <b>-h -- -d</b> treats <b>-d</b> as an option, not as an argument, because the <b>--</b> is an
option-argument here, not a delimiter.</p>
<p class="tent">Guideline 11 was modified to clarify that the order of different options should not matter relative to one another.
However, the order of repeated options that also have option-arguments may be significant; therefore, such options are required to
be interpreted in the order that they are specified. The <a href="../utilities/make.html"><i>make</i></a> utility is an instance of
a historical utility that uses repeated options in which the order is significant. Multiple files are specified by giving multiple
instances of the <b>-f</b> option; for example:</p>
<pre>
<tt>make -f common_header -f specific_rules target
</tt></pre>
<p class="tent">Guideline 13 does not imply that all of the standard utilities automatically accept the operand <tt>'-'</tt> to
mean standard input or output, nor does it specify the actions of the utility upon encountering multiple <tt>'-'</tt> operands. It
simply says that, by default, <tt>'-'</tt> operands are not used for other purposes in the file reading or writing (but not when
using <a href="../functions/stat.html"><i>stat</i>()</a>, <a href="../functions/unlink.html"><i>unlink</i>()</a>, <a href=
"../utilities/touch.html"><i>touch</i></a>, and so on) utilities. In earlier versions of this standard, all information concerning
actual treatment of the <tt>'-'</tt> operand is found in the individual utility sections. Many implementations, however, treated
<tt>'-'</tt> as standard input or output and many applications depended on this behavior even though it was not standard. This
behavior is now implementation-defined. Portable applications should not use <tt>'-'</tt> to mean standard input or output unless
it is explicitly stated to do so in the utility description and they should always use <tt>'./-'</tt> if they intend to refer to a
file named <b>-</b> in the current working directory.</p>
<p class="tent">Guideline 14 is intended to prohibit implementations that would treat the command <a href=
"../utilities/ls.html"><i>ls</i></a> <b>-l -d</b> as if it were <a href="../utilities/ls.html"><i>ls</i></a> <b>-- -l -d</b> or
<a href="../utilities/ls.html"><i>ls</i></a> <b>-l -- -d</b>.</p>
<p class="tent">The standard permits implementations to have extensions that violate the Utility Syntax Guidelines so long as when
the utility is used in line with the forms defined by the standard it follows the Utility Syntax Guidelines. Thus, CONVERSION ERROR
(.Cm) head -42 file and <a href="../utilities/ls.html"><i>ls</i></a>--help are permitted extensions. The intent is to allow
extensions so long as the standard form is accepted and follows the guidelines.</p>
<p class="tent">An area of concern was that as implementations mature, implementation-defined utilities and implementation-defined
utility options will result. The idea was expressed that there needed to be a standard way, say an environment variable or some
such mechanism, to identify implementation-defined utilities separately from standard utilities that may have the same name. It was
decided that there already exist several ways of dealing with this situation and that it is outside of the scope to attempt to
standardize in the area of non-standard items. A method that exists on some historical implementations is the use of the so-called
<b>/local/bin</b> or <b>/usr/local/bin</b> directory to separate local or additional copies or versions of utilities. Another
method that is also used is to isolate utilities into completely separate domains. Still another method to ensure that the desired
utility is being used is to request the utility by its full pathname. There are many approaches to this situation; the examples
given above serve to illustrate that there is more than one.</p>
<h3><a name="tag_21_13" id="tag_21_13"></a>A.13 Namespace and Future Directions</h3>
Austin Group Defect 1071 is applied, adding this chapter.
<h3><a name="tag_21_14" id="tag_21_14"></a>A.14 Headers</h3>
<h4><a name="tag_21_14_01" id="tag_21_14_01"></a>A.14.1 Format of Entries</h4>
<p class="tent">Each header reference page has a common layout of sections describing the interface. This layout is similar to the
manual page or &quot;man&quot; page format shipped with most UNIX systems, and each header has sections describing the SYNOPSIS and
DESCRIPTION. These are the two sections that relate to conformance.</p>
<p class="tent">Additional sections are informative, and add considerable information for the application developer. APPLICATION
USAGE sections provide additional caveats, issues, and recommendations to the developer. RATIONALE sections give additional
information on the decisions made in defining the interface.</p>
<p class="tent">FUTURE DIRECTIONS sections act as pointers to related work that may impact the interface in the future, and often
cautions the developer to architect the code to account for a change in this area. Note that a future directions statement should
not be taken as a commitment to adopt a feature or interface in the future.</p>
<p class="tent">The CHANGE HISTORY section describes when the interface was introduced, and how it has changed.</p>
<p class="tent">Option labels and margin markings in the page can be useful in guiding the application developer.</p>
<h4><a name="tag_21_14_02" id="tag_21_14_02"></a>A.14.2 Removed Headers in Issue 8</h4>
<p class="tent">The headers removed in Issue 8 (from the Issue 7 base document) are as follows:</p>
<center>
<table border="1" cellpadding="3" align="center">
<tr valign="top">
<th colspan="2" align="center">
<p class="tent"><b>Removed Headers in Issue 8</b></p>
</th>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><br>
<b>&lt;stropts.h&gt;</b><br>
&nbsp;</p>
</td>
<td align="left">
<p class="tent"><br>
<b>&lt;trace.h&gt;</b><br>
&nbsp;</p>
</td>
</tr>
<tr valign="top">
<td align="left">
<p class="tent"><br>
<b>&lt;ulimit.h&gt;</b><br>
&nbsp;</p>
</td>
<td align="left">
<p class="tent"><br>
<b>&lt;utime.h&gt;</b><br>
&nbsp;</p>
</td>
</tr>
</table>
</center>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../utilities/zcat.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../xrat/V4_xsh_chap01.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
