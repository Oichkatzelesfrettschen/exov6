<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>cnd_timedwait</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/cnd_destroy.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/confstr.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="cnd_timedwait" id="cnd_timedwait"></a> <a name="tag_17_86" id="tag_17_86"></a> 
<!-- cnd_timedwait -->
<h4 class="mansect"><a name="tag_17_86_01" id="tag_17_86_01"></a>NAME</h4>
<blockquote>cnd_timedwait, cnd_wait — wait on a condition</blockquote>
<h4 class="mansect"><a name="tag_17_86_02" id="tag_17_86_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/threads.h.html">threads.h</a>&gt;<br>
<br>
int cnd_timedwait(cnd_t * restrict</tt> <i>cond</i><tt>, mtx_t * restrict</tt> <i>mtx</i><tt>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const struct timespec * restrict</tt> <i>ts</i><tt>);<br>
int cnd_wait(cnd_t *</tt><i>cond</i><tt>, mtx_t *</tt><i>mtx</i><tt>);<br></tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_86_03" id="tag_17_86_03"></a>DESCRIPTION</h4>
<blockquote>
<div class="box"><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]"
border="0"> The functionality described on this reference page is aligned with the ISO&nbsp;C standard. Any conflict between the
requirements described here and the ISO&nbsp;C standard is unintentional. This volume of POSIX.1-2024 defers to the ISO&nbsp;C
standard. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></div>
<p>The <i>cnd_timedwait</i>() function shall atomically unlock the mutex pointed to by <i>mtx</i> and block until the condition
variable pointed to by <i>cond</i> is signaled by a call to <a href="../functions/cnd_signal.html"><i>cnd_signal</i>()</a> or to
<a href="../functions/cnd_broadcast.html"><i>cnd_broadcast</i>()</a>, or until after the TIME_UTC-based calendar time pointed to by
<i>ts</i>, or until it is unblocked due to an unspecified reason.</p>
<p>The <i>cnd_wait</i>() function shall atomically unlock the mutex pointed to by <i>mtx</i> and block until the condition variable
pointed to by <i>cond</i> is signaled by a call to <a href="../functions/cnd_signal.html"><i>cnd_signal</i>()</a> or to <a href=
"../functions/cnd_broadcast.html"><i>cnd_broadcast</i>()</a>, or until it is unblocked due to an unspecified reason.</p>
<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
Atomically here means &quot;atomically with respect to access by another thread to the mutex and then the condition variable&quot;. That
is, if another thread is able to acquire the mutex after the about-to-block thread has released it, then a subsequent call to
<a href="../functions/cnd_broadcast.html"><i>cnd_broadcast</i>()</a> or <a href=
"../functions/cnd_signal.html"><i>cnd_signal</i>()</a> in that thread shall behave as if it were issued after the about-to-block
thread has blocked. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
<p>When the calling thread becomes unblocked, these functions shall lock the mutex pointed to by <i>mtx</i> before they return. The
application shall ensure that the mutex pointed to by <i>mtx</i> is locked by the calling thread before it calls these
functions.</p>
<p>When using condition variables there is always a Boolean predicate involving shared variables associated with each condition
wait that is true if the thread should proceed. Spurious wakeups from the <i>cnd_timedwait</i>() and <i>cnd_wait</i>() functions
may occur. Since the return from <i>cnd_timedwait</i>() or <i>cnd_wait</i>() does not imply anything about the value of this
predicate, the predicate should be re-evaluated upon such return.</p>
<p>When a thread waits on a condition variable, having specified a particular mutex to either the <i>cnd_timedwait</i>() or the
<i>cnd_wait</i>() operation, a dynamic binding is formed between that mutex and condition variable that remains in effect as long
as at least one thread is blocked on the condition variable. During this time, the effect of an attempt by any thread to wait on
that condition variable using a different mutex is undefined. Once all waiting threads have been unblocked (as by the <a href=
"../functions/cnd_broadcast.html"><i>cnd_broadcast</i>()</a> operation), the next wait operation on that condition variable shall
form a new dynamic binding with the mutex specified by that wait operation. Even though the dynamic binding between condition
variable and mutex might be removed or replaced between the time a thread is unblocked from a wait on the condition variable and
the time that it returns to the caller or begins cancellation cleanup, the unblocked thread shall always re-acquire the mutex
specified in the condition wait operation call from which it is returning.</p>
<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> A
condition wait (whether timed or not) is a cancellation point. When the cancelability type of a thread is set to
PTHREAD_CANCEL_DEFERRED, a side-effect of acting upon a cancellation request while in a condition wait is that the mutex is (in
effect) re-acquired before calling the first cancellation cleanup handler. The effect is as if the thread were unblocked, allowed
to execute up to the point of returning from the call to <i>cnd_timedwait</i>() or <i>cnd_wait</i>(), but at that point notices the
cancellation request and instead of returning to the caller of <i>cnd_timedwait</i>() or <i>cnd_wait</i>(), starts the thread
cancellation activities, which includes calling cancellation cleanup handlers.</p>
<p>A thread that has been unblocked because it has been canceled while blocked in a call to <i>cnd_timedwait</i>() or
<i>cnd_wait</i>() shall not consume any condition signal that may be directed concurrently at the condition variable if there are
other threads blocked on the condition variable. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
<p>When <i>cnd_timedwait</i>() times out, it shall nonetheless release and re-acquire the mutex referenced by <i>mtx</i>, and may
consume a condition signal directed concurrently at the condition variable.</p>
<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
These functions shall not be affected if the calling thread executes a signal handler during the call, except that if a signal is
delivered to a thread waiting for a condition variable, upon return from the signal handler either the thread shall resume waiting
for the condition variable as if it was not interrupted, or it shall return <tt>thrd_success</tt> due to spurious wakeup. <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></p>
<p>The behavior is undefined if the value specified by the <i>cond</i> or <i>mtx</i> argument to these functions does not refer to
an initialized condition variable or an initialized mutex object, respectively.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_86_04" id="tag_17_86_04"></a>RETURN VALUE</h4>
<blockquote>
<p>The <i>cnd_timedwait</i>() function shall return <tt>thrd_success</tt> upon success, or <tt>thrd_timedout</tt> if the time
specified in the call was reached without acquiring the requested resource, or <tt>thrd_error</tt> if the request could not be
honored.</p>
<p>The <i>cnd_wait</i>() function shall return <tt>thrd_success</tt> upon success or <tt>thrd_error</tt> if the request could not
be honored.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_86_05" id="tag_17_86_05"></a>ERRORS</h4>
<blockquote>
<p>See RETURN VALUE.</p>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_86_06" id="tag_17_86_06"></a>EXAMPLES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_86_07" id="tag_17_86_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_86_08" id="tag_17_86_08"></a>RATIONALE</h4>
<blockquote>
<p>These functions are not affected by signal handlers (except as stated in the DESCRIPTION) for the reasons stated in XRAT
<a href="../xrat/V4_xsh_chap01.html#tag_22_02_03"><i>B.2.3 Error Numbers</i></a>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_86_09" id="tag_17_86_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_86_10" id="tag_17_86_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/cnd_broadcast.html#"><i>cnd_broadcast</i>()</a>, <a href=
"../functions/cnd_destroy.html#"><i>cnd_destroy</i>()</a>, <a href="../functions/timespec_get.html#"><i>timespec_get</i>()</a></p>
<p>XBD <a href="../basedefs/V1_chap04.html#tag_04_15_02"><i>4.15.2 Memory Synchronization</i></a>, <a href=
"../basedefs/threads.h.html"><i>&lt;threads.h&gt;</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_86_11" id="tag_17_86_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 8. Included for alignment with the ISO/IEC&nbsp;9899:2018 standard.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/cnd_destroy.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/confstr.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
