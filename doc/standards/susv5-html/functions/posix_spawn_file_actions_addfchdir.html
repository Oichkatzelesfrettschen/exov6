<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>posix_spawn_file_actions_addchdir</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/posix_spawn.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/posix_spawn_file_actions_addclose.html" accesskey=
"N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="posix_spawn_file_actions_addchdir" id="posix_spawn_file_actions_addchdir"></a> <a name=
"tag_17_389" id="tag_17_389"></a><!-- posix_spawn_file_actions_addchdir -->
<h4 class="mansect"><a name="tag_17_389_01" id="tag_17_389_01"></a>NAME</h4>
<blockquote>posix_spawn_file_actions_addchdir, posix_spawn_file_actions_addfchdir — add chdir or fchdir action to spawn file
actions object (<b>ADVANCED REALTIME</b>)</blockquote>
<h4 class="mansect"><a name="tag_17_389_02" id="tag_17_389_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<div class="box"><code><tt><sup>[<a href="javascript:open_code('SPN')">SPN</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> #include &lt;<a href="../basedefs/spawn.h.html">spawn.h</a>&gt;<br>
<br>
int posix_spawn_file_actions_addchdir(posix_spawn_file_actions_t<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *restrict</tt> <i>file_actions</i><tt>, const char *restrict</tt> <i>path</i><tt>);<br>
int posix_spawn_file_actions_addfchdir(posix_spawn_file_actions_t<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *</tt><i>file_actions</i><tt>, int</tt> <i>fildes</i><tt>); <img src="../images/opt-end.gif"
alt="[Option End]" border="0"></tt></code></div>
<tt><br></tt></blockquote>
<h4 class="mansect"><a name="tag_17_389_03" id="tag_17_389_03"></a>DESCRIPTION</h4>
<blockquote>
<p>The <i>posix_spawn_file_actions_addchdir</i>() function shall add a <i>chdir</i> action to the object referenced by
<i>file_actions</i> that shall cause the working directory to be set to <i>path</i> (as if <i>chdir</i>(<i>path</i>) had been
called) when a new process is spawned using this file actions object. A relative <i>path</i> shall be interpreted in relation to
the working directory determined by any prior actions. The string pointed to by <i>path</i> shall be copied by the
<i>posix_spawn_file_actions_addchdir</i>() function.</p>
<p>The <i>posix_spawn_file_actions_addfchdir</i>() function shall add an <i>fchdir</i> action to the object referenced by
<i>file_actions</i> that shall cause the working directory to be set to <i>fildes</i> (as if <i>fchdir</i>(<i>fildes</i>) had been
called) when a new process is spawned using this file actions object.</p>
<p>A spawn file actions object is as defined in <a href=
"../functions/posix_spawn_file_actions_addclose.html#"><i>posix_spawn_file_actions_addclose</i>()</a>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_389_04" id="tag_17_389_04"></a>RETURN VALUE</h4>
<blockquote>
<p>Upon successful completion, these functions shall return zero; otherwise, an error number shall be returned to indicate the
error.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_389_05" id="tag_17_389_05"></a>ERRORS</h4>
<blockquote>
<p>The <i>posix_spawn_file_actions_addfchdir</i>() function shall fail if:</p>
<dl compact>
<dd></dd>
<dt>[EBADF]</dt>
<dd>The value specified by <i>fildes</i> is negative.</dd>
</dl>
<p>These functions shall fail if:</p>
<dl compact>
<dd></dd>
<dt>[ENOMEM]</dt>
<dd>Insufficient memory exists to add to the spawn file actions object.</dd>
</dl>
<p>These functions may fail if:</p>
<dl compact>
<dd></dd>
<dt>[EINVAL]</dt>
<dd>The value specified by <i>file_actions</i> is invalid.</dd>
</dl>
<p>It shall not be considered an error for the <i>path</i> or <i>fildes</i> argument passed to these functions to specify a
pathname or file descriptor for which the specified operation could not be performed at the time of the call. Any such error shall
be detected when the associated file actions object is later used during a <a href=
"../functions/posix_spawn.html"><i>posix_spawn</i>()</a> or <a href="../functions/posix_spawnp.html"><i>posix_spawnp</i>()</a>
operation.</p>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_389_06" id="tag_17_389_06"></a>EXAMPLES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_389_07" id="tag_17_389_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>The <i>posix_spawn_file_actions_addchdir</i>() and <i>posix_spawn_file_actions_addfchdir</i>() functions are part of the Spawn
option and need not be provided on all implementations.</p>
<p>Changing the working directory of a child process can be useful when invoking utilities such as <a href=
"../utilities/pax.html"><i>pax</i></a>. Furthermore, the ability to add <i>fchdir</i> actions to <a href=
"../functions/posix_spawn.html"><i>posix_spawn</i>()</a> gives the caller as much control over relative pathnames processed in the
context of the child as it would otherwise have using <a href="../functions/openat.html"><i>openat</i>()</a>, since all file
actions are processed in sequence in the context of the child at a point where the child process is still single-threaded. Without
<i>chdir</i> or <i>fchdir</i> actions, changing the working directory of the child would require a shim utility (some
implementations provide</p>
<pre>
<tt>env -C /new/path program args...
</tt></pre>
<p>as an extension, but the standard does not require this extension), or else temporarily changing the working directory in the
parent process prior to calling <a href="../functions/posix_spawn.html"><i>posix_spawn</i>()</a> (but this requires locking in a
multi-threaded process, to ensure that no other thread is impacted by the temporary change to global state).</p>
<p>File actions are performed in a new process created by <a href="../functions/posix_spawn.html"><i>posix_spawn</i>()</a> or
<a href="../functions/posix_spawnp.html"><i>posix_spawnp</i>()</a> in the same order that they were added to the file actions
object. Thus, the execution of an <i>open</i> action that was created by a call to <a href=
"../functions/posix_spawn_file_actions_addopen.html"><i>posix_spawn_file_actions_addopen</i>()</a> that specifies a relative path
will be affected by the execution of a <i>chdir</i> or <i>fchdir</i> action that was created by a previous call to
<i>posix_spawn_file_actions_addchdir</i>() or <i>posix_spawn_file_actions_addfchdir</i>(). Likewise, a relative path passed to
<a href="../functions/posix_spawn.html"><i>posix_spawn</i>()</a> will be affected by the last <i>chdir</i> or <i>fchdir</i> action
in the file action list.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_389_08" id="tag_17_389_08"></a>RATIONALE</h4>
<blockquote>
<p>Refer to the RATIONALE section in <a href=
"../functions/posix_spawn_file_actions_addclose.html#"><i>posix_spawn_file_actions_addclose</i>()</a>.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_389_09" id="tag_17_389_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_389_10" id="tag_17_389_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/chdir.html#"><i>chdir</i>()</a>, <a href="../functions/fchdir.html#"><i>fchdir</i>()</a>, <a href=
"../functions/posix_spawn.html#"><i>posix_spawn</i>()</a>, <a href=
"../functions/posix_spawn_file_actions_addclose.html#"><i>posix_spawn_file_actions_addclose</i>()</a>, <a href=
"../functions/posix_spawn_file_actions_destroy.html#"><i>posix_spawn_file_actions_destroy</i>()</a></p>
<p>XBD <a href="../basedefs/spawn.h.html"><i>&lt;spawn.h&gt;</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_389_11" id="tag_17_389_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 8. Derived from Solaris <i>posix_spawn_file_actions_addchdir_np</i>.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/posix_spawn.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/posix_spawn_file_actions_addclose.html" accesskey=
"N">Next &gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
