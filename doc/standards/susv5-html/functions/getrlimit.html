<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>getrlimit</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/getresuid.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/getrusage.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="getrlimit" id="getrlimit"></a> <a name="tag_17_232" id="tag_17_232"></a><!-- getrlimit -->
<h4 class="mansect"><a name="tag_17_232_01" id="tag_17_232_01"></a>NAME</h4>
<blockquote>getrlimit, setrlimit — control maximum resource consumption</blockquote>
<h4 class="mansect"><a name="tag_17_232_02" id="tag_17_232_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/sys_resource.h.html">sys/resource.h</a>&gt;<br>
<br>
int getrlimit(int</tt> <i>resource</i><tt>, struct rlimit *</tt><i>rlp</i><tt>);<br>
int setrlimit(int</tt> <i>resource</i><tt>, const struct rlimit *</tt><i>rlp</i><tt>);<br></tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_03" id="tag_17_232_03"></a>DESCRIPTION</h4>
<blockquote>
<p>The <i>getrlimit</i>() function shall get, and the <i>setrlimit</i>() function shall set, limits on the consumption of a variety
of resources.</p>
<p>Each call to either <i>getrlimit</i>() or <i>setrlimit</i>() identifies a specific resource to be operated upon as well as a
resource limit. A resource limit is represented by an <b>rlimit</b> structure. The <i>rlim_cur</i> member specifies the current or
soft limit and the <i>rlim_max</i> member specifies the maximum or hard limit. Soft limits can be changed by a process to any value
that is less than or equal to the hard limit. A process can (irreversibly) lower its hard limit to any value that is greater than
or equal to the soft limit. Only a process with appropriate privileges can raise a hard limit. Both hard and soft limits can be
changed in a single call to <i>setrlimit</i>() subject to the constraints described above.</p>
<p>The value RLIM_INFINITY, defined in <a href="../basedefs/sys_resource.h.html"><i>&lt;sys/resource.h&gt;</i></a>, shall be
considered to be larger than any other limit value. If a call to <i>getrlimit</i>() returns RLIM_INFINITY for a resource, it means
the implementation shall not enforce limits on that resource. Specifying RLIM_INFINITY as any resource limit value on a successful
call to <i>setrlimit</i>() shall inhibit enforcement of that resource limit.</p>
<p>The following resources are defined:</p>
<dl compact>
<dd></dd>
<dt>RLIMIT_CORE</dt>
<dd>This is the maximum size of a file containing a core image, in bytes, that can be created by a process. A limit of 0 shall
prevent the creation of such a file. If this limit is exceeded, the writing of a file containing a core image shall terminate at
this size. Note that the production of such a file may be one of the implementation-defined actions for abnormal termination.</dd>
<dt>RLIMIT_CPU</dt>
<dd><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
This is the maximum amount of CPU time, in seconds, used by a process. If this limit is exceeded, SIGXCPU shall be generated for
the process. If the process is catching or ignoring SIGXCPU, or all threads belonging to that process are blocking SIGXCPU, the
behavior is unspecified. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt>RLIMIT_DATA</dt>
<dd>This is the maximum size of a data segment of the process, in bytes. If this limit is exceeded, the <a href=
"../functions/malloc.html"><i>malloc</i>()</a> function shall fail with <i>errno</i> set to [ENOMEM].</dd>
<dt>RLIMIT_FSIZE</dt>
<dd>This is the maximum size of a file, in bytes, that can be created by a process. If a write or truncate operation would cause
this limit to be exceeded, <sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt=
"[Option Start]" border="0"> &nbsp;a SIGXFSZ shall be generated for the thread; if the thread is blocking, or the process is
catching or ignoring SIGXFSZ, <img src="../images/opt-end.gif" alt="[Option End]" border="0"> &nbsp;the operation shall fail with
an [EFBIG] error.</dd>
<dt>RLIMIT_NOFILE</dt>
<dd>This is a number one greater than the maximum value that the system shall assign to a newly-created descriptor. If this limit
is exceeded, functions that allocate a file descriptor shall fail with <i>errno</i> set to [EMFILE]. This limit constrains the
number of file descriptors that a process can allocate.</dd>
<dt>RLIMIT_STACK</dt>
<dd>This is the maximum size of the initial thread's stack, in bytes. The implementation does not automatically grow the stack
beyond this limit. If this limit is exceeded, SIGSEGV shall be generated for the thread. If the thread is blocking SIGSEGV, or the
process is ignoring or catching SIGSEGV and has not made arrangements to use an alternate stack, the disposition of SIGSEGV shall
be set to SIG_DFL before it is generated.</dd>
<dt>RLIMIT_AS</dt>
<dd>This is the maximum size of total available memory of the process, in bytes. If this limit is exceeded, the <a href=
"../functions/malloc.html"><i>malloc</i>()</a> and <a href="../functions/mmap.html"><i>mmap</i>()</a> functions shall fail with
<i>errno</i> set to [ENOMEM]. In addition, the automatic stack growth fails with the effects outlined above.</dd>
</dl>
<p>When using the <i>getrlimit</i>() function, if a resource limit can be represented correctly in an object of type <b>rlim_t</b>,
then its representation is returned; otherwise, if the value of the resource limit is equal to that of the corresponding saved hard
limit, the value returned shall be RLIM_SAVED_MAX; otherwise, the value returned shall be RLIM_SAVED_CUR.</p>
<p>When using the <i>setrlimit</i>() function, if the requested new limit is RLIM_INFINITY, the new limit shall be &quot;no limit&quot;;
otherwise, if the requested new limit is RLIM_SAVED_MAX, the new limit shall be the corresponding saved hard limit; otherwise, if
the requested new limit is RLIM_SAVED_CUR, the new limit shall be the corresponding saved soft limit; otherwise, the new limit
shall be the requested value. In addition, if the corresponding saved limit can be represented correctly in an object of type
<b>rlim_t</b> then it shall be overwritten with the new limit.</p>
<p>The result of setting a limit to RLIM_SAVED_MAX or RLIM_SAVED_CUR is unspecified unless a previous call to <i>getrlimit</i>()
returned that value as the soft or hard limit for the corresponding resource limit.</p>
<p>The determination of whether a limit can be correctly represented in an object of type <b>rlim_t</b> is implementation-defined.
For example, some implementations permit a limit whose value is greater than RLIM_INFINITY and others do not.</p>
<p>The <i><a href="../functions/exec.html">exec</a></i> family of functions shall cause resource limits to be saved.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_04" id="tag_17_232_04"></a>RETURN VALUE</h4>
<blockquote>
<p>Upon successful completion, <i>getrlimit</i>() and <i>setrlimit</i>() shall return 0. Otherwise, these functions shall return -1
and set <i>errno</i> to indicate the error.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_05" id="tag_17_232_05"></a>ERRORS</h4>
<blockquote>
<p>The <i>getrlimit</i>() and <i>setrlimit</i>() functions shall fail if:</p>
<dl compact>
<dd></dd>
<dt>[EINVAL]</dt>
<dd>An invalid <i>resource</i> was specified; or in a <i>setrlimit</i>() call, the new <i>rlim_cur</i> exceeds the new
<i>rlim_max</i>.</dd>
<dt>[EPERM]</dt>
<dd>The limit specified to <i>setrlimit</i>() would have raised the maximum limit value, and the calling process does not have
appropriate privileges.</dd>
</dl>
<p>The <i>setrlimit</i>() function may fail if:</p>
<dl compact>
<dd></dd>
<dt>[EINVAL]</dt>
<dd>The limit specified cannot be lowered because current usage is already higher than the limit.</dd>
</dl>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_232_06" id="tag_17_232_06"></a>EXAMPLES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_07" id="tag_17_232_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>If a process attempts to set the hard limit or soft limit for RLIMIT_NOFILE to less than the value of {_POSIX_OPEN_MAX} from
<a href="../basedefs/limits.h.html"><i>&lt;limits.h&gt;</i></a>, unexpected behavior may occur.</p>
<p>If a process attempts to set the hard limit or soft limit for RLIMIT_NOFILE to less than the highest currently open file
descriptor +1, unexpected behavior may occur.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_08" id="tag_17_232_08"></a>RATIONALE</h4>
<blockquote>
<p>These functions were previously part of the XSI option and have been moved to the Base so that portable shells, and other
utilities that need to relay the wait status of a child process to a parent, can terminate themselves with the same signal that
terminated the child but without overwriting a core image created by the child (through setting RLIMIT_CORE to zero, which disables
core image creation). The RLIMIT_CPU and RLIMIT_FSIZE limits remain in the XSI option because they relate to other XSI
functionality (SIGXCPU and SIGXFSZ).</p>
<p>It should be noted that RLIMIT_STACK applies &quot;at least&quot; to the stack of the initial thread in the process, and not to the sum
of all the stacks in the process, as that would be very limiting unless the value is so big as to provide no value at all with a
single thread.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_09" id="tag_17_232_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_10" id="tag_17_232_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/exec.html#tag_17_129"></a><a href="../functions/exec.html">exec</a>, <a href=
"../functions/fork.html#"><i>fork</i>()</a>, <a href="../functions/malloc.html#"><i>malloc</i>()</a>, <a href=
"../functions/open.html#"><i>open</i>()</a>, <a href="../functions/sigaltstack.html#"><i>sigaltstack</i>()</a>, <a href=
"../functions/sysconf.html#"><i>sysconf</i>()</a></p>
<p>XBD <a href="../basedefs/sys_resource.h.html"><i>&lt;sys/resource.h&gt;</i></a></p>
<p>XCU <a href="../utilities/ulimit.html#tag_20_131"><i>ulimit</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_11" id="tag_17_232_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 4, Version 2.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_12" id="tag_17_232_12"></a>Issue 5</h4>
<blockquote>
<p>Moved from X/OPEN UNIX extension to BASE.</p>
<p>An APPLICATION USAGE section is added.</p>
<p>Large File Summit extensions are added.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_13" id="tag_17_232_13"></a>Issue 6</h4>
<blockquote>
<p>IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;1-2002, item XSH/TC1/D6/25 is applied, changing wording for RLIMIT_NOFILE in the
DESCRIPTION related to functions that allocate a file descriptor failing with [EMFILE]. Text is added to the APPLICATION USAGE
section noting the consequences of a process attempting to set the hard or soft limit for RLIMIT_NOFILE less than the highest
currently open file descriptor +1.</p>
<p>IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XSH/TC2/D6/46 is applied, updating the definition of RLIMIT_STACK in the
DESCRIPTION from &quot;the maximum size of a process stack&quot; to &quot;the maximum size of the initial thread's stack&quot;. Text is added to
the RATIONALE section.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_232_14" id="tag_17_232_14"></a>Issue 8</h4>
<blockquote>
<p>Austin Group Defects 51 and 1669 are applied, moving the <i>getrlimit</i>() and <i>setrlimit</i>() functions, excluding the
RLIMIT_CPU limit, from the XSI option to the Base.</p>
<p>Austin Group Defect 1141 is applied, changing the description of RLIMIT_CORE.</p>
<p>Austin Group Defect 1416 is applied, changing some uses of &quot;may&quot; to &quot;can&quot; and one to &quot;shall&quot;.</p>
<p>Austin Group Defect 1418 is applied, changing the SEE ALSO section.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/getresuid.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/getrusage.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
