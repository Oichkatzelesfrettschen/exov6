<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>free</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/fread.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/freeaddrinfo.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="free" id="free"></a> <a name="tag_17_181" id="tag_17_181"></a><!-- free -->
<h4 class="mansect"><a name="tag_17_181_01" id="tag_17_181_01"></a>NAME</h4>
<blockquote>free — free allocated memory</blockquote>
<h4 class="mansect"><a name="tag_17_181_02" id="tag_17_181_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/stdlib.h.html">stdlib.h</a>&gt;<br>
<br>
void free(void *</tt><i>ptr</i><tt>);<br></tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_03" id="tag_17_181_03"></a>DESCRIPTION</h4>
<blockquote>
<div class="box"><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]"
border="0"> The functionality described on this reference page is aligned with the ISO&nbsp;C standard. Any conflict between the
requirements described here and the ISO&nbsp;C standard is unintentional. This volume of POSIX.1-2024 defers to the ISO&nbsp;C
standard. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></div>
<p>The <i>free</i>() function shall cause the space pointed to by <i>ptr</i> to be deallocated; that is, made available for further
allocation. If <i>ptr</i> is a null pointer, no action shall occur. Otherwise, if the argument does not match a pointer earlier
returned by <a href="../functions/aligned_alloc.html"><i>aligned_alloc</i>()</a>, <a href=
"../functions/calloc.html"><i>calloc</i>()</a>, <a href="../functions/malloc.html"><i>malloc</i>()</a>,<br>
<sup>[<a href="javascript:open_code('ADV')">ADV</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
<a href="../functions/posix_memalign.html"><i>posix_memalign</i>()</a>, <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"> <a href="../functions/realloc.html"><i>realloc</i>()</a>,<br>
<sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
<a href="../functions/reallocarray.html"><i>reallocarray</i>()</a>, or a function in POSIX.1-2024 that allocates memory as if by
<a href="../functions/malloc.html"><i>malloc</i>()</a>, <img src="../images/opt-end.gif" alt="[Option End]" border="0"> or if the
space has been deallocated by a call to <i>free</i>(), <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> <a href="../functions/reallocarray.html"><i>reallocarray</i>()</a>,
<img src="../images/opt-end.gif" alt="[Option End]" border="0"> or <a href="../functions/realloc.html"><i>realloc</i>()</a>, the
behavior is undefined.</p>
<p>Any use of a pointer that refers to freed space results in undefined behavior.</p>
<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> The
<i>free</i>() function shall not modify <i>errno</i> if <i>ptr</i> is a null pointer or a pointer previously returned as if by
<a href="../functions/malloc.html"><i>malloc</i>()</a> and not yet deallocated. <img src="../images/opt-end.gif" alt="[Option End]"
border="0"></p>
<p>For purposes of determining the existence of a data race, <i>free</i>() shall behave as though it accessed only memory locations
accessible through its argument and not other static duration storage. The function may, however, visibly modify the storage that
it deallocates. Calls to <a href="../functions/aligned_alloc.html"><i>aligned_alloc</i>()</a>, <a href=
"../functions/calloc.html"><i>calloc</i>()</a>, <i>free</i>(), <a href="../functions/malloc.html"><i>malloc</i>()</a>,
<sup>[<a href="javascript:open_code('ADV')">ADV</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
<a href="../functions/posix_memalign.html"><i>posix_memalign</i>()</a>, <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"><br>
<sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
<a href="../functions/reallocarray.html"><i>reallocarray</i>()</a>, <img src="../images/opt-end.gif" alt="[Option End]" border="0">
and <a href="../functions/realloc.html"><i>realloc</i>()</a> that allocate or deallocate a particular region of memory shall occur
in a single total order (see XBD <a href="../basedefs/V1_chap04.html#tag_04_15_01"><i>4.15.1 Memory Ordering</i></a>), and each
such deallocation call shall synchronize with the next allocation (if any) in this order.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_04" id="tag_17_181_04"></a>RETURN VALUE</h4>
<blockquote>
<p>The <i>free</i>() function shall not return a value.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_05" id="tag_17_181_05"></a>ERRORS</h4>
<blockquote>
<p>No errors are defined.</p>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_181_06" id="tag_17_181_06"></a>EXAMPLES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_07" id="tag_17_181_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>There is now no requirement for the implementation to support the inclusion of <i>&lt;malloc.h&gt;</i>.</p>
<p>Because the <i>free</i>() function does not modify <i>errno</i> for valid pointers, it is safe to use it in cleanup code without
corrupting earlier errors, such as in this example code:</p>
<pre>
<tt>    // buf was obtained by malloc(buflen)
    ret = write(fd, buf, buflen);
    if (ret &lt; 0) {
        free(buf);
        return ret;
    }
</tt></pre>
<p>However, earlier versions of this standard did not require this, and the same example had to be written as:</p>
<pre>
<tt>    // buf was obtained by malloc(buflen)
    ret = write(fd, buf, buflen);
    if (ret &lt; 0) {
        int save = errno;
        free(buf);
        errno = save;
        return ret;
    }
</tt></pre></blockquote>
<h4 class="mansect"><a name="tag_17_181_08" id="tag_17_181_08"></a>RATIONALE</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_09" id="tag_17_181_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_10" id="tag_17_181_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/aligned_alloc.html#"><i>aligned_alloc</i>()</a>, <a href="../functions/calloc.html#"><i>calloc</i>()</a>
, <a href="../functions/malloc.html#"><i>malloc</i>()</a>, <a href="../functions/posix_memalign.html#"><i>posix_memalign</i>()</a>
, <a href="../functions/realloc.html#"><i>realloc</i>()</a></p>
<p>XBD <a href="../basedefs/stdlib.h.html"><i>&lt;stdlib.h&gt;</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_11" id="tag_17_181_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 1. Derived from Issue 1 of the SVID.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_12" id="tag_17_181_12"></a>Issue 6</h4>
<blockquote>
<p>Reference to the <i>valloc</i>() function is removed.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_13" id="tag_17_181_13"></a>Issue 7</h4>
<blockquote>
<p>The DESCRIPTION is updated to clarify that if the pointer returned is not by a function that allocates memory as if by <a href=
"../functions/malloc.html"><i>malloc</i>()</a>, then the behavior is undefined.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_181_14" id="tag_17_181_14"></a>Issue 8</h4>
<blockquote>
<p>Austin Group Defect 385 is applied, adding a requirement that <i>free</i>() does not modify <i>errno</i> when passed a pointer
to an object than can be freed.</p>
<p>Austin Group Defect 1218 is applied, adding <a href="../functions/reallocarray.html"><i>reallocarray</i>()</a>.</p>
<p>Austin Group Defect 1302 is applied, aligning this function with the ISO/IEC&nbsp;9899:2018 standard.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/fread.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/freeaddrinfo.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
