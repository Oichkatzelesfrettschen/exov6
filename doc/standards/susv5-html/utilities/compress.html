<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!doctype HTML>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><link type="text/css" rel="stylesheet" href="style.css">
<!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>compress</title>
</head><body bgcolor="white"><DIV CLASS="NAVHEADER">
<TABLE SUMMARY="Header navigation table" class="nav" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0">
<TR class="nav"><TD class="nav" WIDTH="15%" ALIGN="left" VALIGN="bottom"><A href="../utilities/command.html" ACCESSKEY="P" >&#60;&#60;&#60; Previous</A></TD><TD class="nav" WIDTH="70%" ALIGN="center" VALIGN="bottom" ><a href="contents.html">Home</a></TD><TD class="nav" WIDTH="15%" ALIGN="right" VALIGN="bottom"> <A href="../utilities/cp.html" ACCESSKEY="N" >Next &#62;&#62;&#62;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV>
<script LANGUAGE="JavaScript" src="../jscript/codes.js"></script><basefont size=3>
<center><font size="2">
The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright &copy; 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top"></a>

<a name="compress"></a>
<a name = "tag_20_23"></a><!-- compress -->



<h4 class="mansect"><a name = "tag_20_23_01"></a>NAME</h4><blockquote>
compress, uncompress, zcat &mdash; compress and decompress data






</blockquote><h4 class="mansect"><a name = "tag_20_23_02"></a>SYNOPSIS</h4><blockquote class="synopsis">
<p>
<p>
<tt><div class="box"><code><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup>
<img src="../images/opt-start.gif" alt="[Option Start]" border=0>
compress </tt><b>[</b><tt>-fv</tt><b>] [</b><tt>-b </tt><i>value</i><b>] [</b><tt>-g | -m </tt><i>algo</i><b>] [</b><i>file</i><tt>...</tt><b>]</b><tt>
<br>
<br>
compress -c </tt><b>[</b><tt>-fv</tt><b>] [</b><tt>-b </tt><i>value</i><b>] [</b><tt>-g | -m </tt><i>algo</i><b>] [</b><i>file</i><b>]</b><tt>
<br>
<br>
compress -d </tt><b>[</b><tt>-cfv</tt><b>] [</b><i>file</i><tt>...</tt><b>]</b><tt>
<br>
<br>
uncompress </tt><b>[</b><tt>-cfv</tt><b>] [</b><i>file</i><tt>...</tt><b>]</b><tt>
<br>
<br>
zcat </tt><b>[</b><i>file</i><tt>...</tt><b>]</b><tt>
<img src="../images/opt-end.gif" alt="[Option End]" border=0>
</code></div>
<br>
</tt>
</blockquote><h4 class="mansect"><a name = "tag_20_23_03"></a>DESCRIPTION</h4><blockquote>
<p>
The
<i>compress</i>
utility, when the
<b>-d</b>
option is not specified, shall apply the compression algorithm identified
by the
<b>-g</b>
option or the
<b>-m</b>
<i>algo</i>
option to the named files to attempt to reduce their size without loss
of information. The compress utility with the
<b>-d</b>
option shall apply the appropriate decompression algorithm to the
named files to restore the data to their original state.
<p>
The
<i>uncompress</i>
utility shall be equivalent to
<i>compress</i>
<b>-d</b>.
The
<i>zcat</i>
utility shall be equivalent to
<i>compress</i>
<b>-c -d</b>.
If multiple
<i>file</i>
operands are specified, the decompressed data from each input file
shall be concatenated to standard output.
<p>
When compressing data, unless the
<b>-c</b>
option is specified, after an input file other than standard input has
been compressed, the compressed data from the input file shall be
stored in a file with the same pathname as the input file but with an
added suffix. The added suffix shall be the suffix associated with the
algorithm (see the algorithms in
<a href="#tagtcjh_17">
Compression algorithms, algo option-argument values, and suffixes
</a>
).
If appending the suffix would make the size of the last component of
the output file's pathname exceed
{NAME_MAX}
bytes, the command shall fail. If appending the suffix would make the
size of the pathname exceed
{PATH_MAX}
bytes, the command may fail.
<p>
When decompressing data, unless the
<b>-c</b>
option is specified, after an input file other than standard input has
been decompressed, the decompressed data from the input file shall be
stored in a file with the same pathname as the input file but with the
suffix associated with the algorithm removed.
<sup>[<a href="javascript:open_code('OB')">OB</a>]</sup>
<img src="../images/opt-start.gif" alt="[Option Start]" border=0>
&nbsp;If
<i>file</i>
has no suffix associated with a known compression algorithm or
<i>file</i>
does not exist and does not have a
<b>.Z</b>
suffix,
<i>file</i>
shall be used as the name of the output file, and the default suffix
<b>.Z</b>
shall be appended to
<i>file</i>
to form the input pathname.
<img src="../images/opt-end.gif" alt="[Option End]" border=0>
The behavior is unspecified if the input pathname ends with a suffix
other than the suffix associated with the algorithm used to compress
the data. When the
<b>-c</b>
option is specified,
<i>file</i>
can have any suffix, or no suffix, and the utility shall use
<i>file</i>
as the input file and examine the file's contents to determine which
algorithm to use to decompress the data (it is not an error if
<i>file</i>
does not have a suffix that matches the suffix associated with the
compression algorithm).
<p>
When compressing or decompressing a file other than standard input and the
<b>-c</b>
option is not specified, if the invoking process has sufficient privilege,
the ownership, modes, access time, and modification time of the output
file shall match the ownership, modes, access time, and modification
time of the input file. After the output file has been successfully
created, the input file shall be removed if the invoking process has
sufficient privileges. If the invoking process does not have sufficient
privileges to remove the input file (for example, if the directory has
the S_ISVTX bit set) the behavior depends on whether the
<b>-f</b>
option is specified: if
<b>-f</b>
is not specified, the output file shall be removed, a diagnostic
message shall be written and the utility shall continue processing
other files but the final exit status shall be non-zero; if
<b>-f</b>
is specified, the output file shall not be removed and it is
unspecified whether the inability to remove the input file is treated
as an error. If it is not treated as an error, a warning message may
be written to standard error
<p>
If no
<i>file</i>
operands are specified, standard input shall be compressed or
decompressed to standard output.
<p>
<sup>[<a href="javascript:open_code('OB')">OB</a>]</sup>
<img src="../images/opt-start.gif" alt="[Option Start]" border=0>
If an input file that is to be removed after processing has multiple
hard links, the
<i>compress</i>
and
<i>uncompress</i>
utilities may write a diagnostic message to standard error and do
nothing with the file; this behavior may depend on whether the
<b>-f</b>
option is specified. If a diagnostic message is written, the final
exit status shall be non-zero.
<img src="../images/opt-end.gif" alt="[Option End]" border=0>
</blockquote><h4 class="mansect"><a name = "tag_20_23_04"></a>OPTIONS</h4><blockquote>
<p>
The
<i>compress</i>,
<i>uncompress</i>,
and
<i>zcat</i>
utilities shall conform to XBD
<a href="../basedefs/V1_chap12.html#tag_12_02">
<i>12.2 Utility Syntax Guidelines</i>
</a>
,
except that Guideline 1 does not apply to
<i>uncompress</i>
since the utility name has ten letters.
<p>
The following options shall be supported:
<dl compact><dd>
<p><dt><b>-b&nbsp;</b><i>value</i><dd>If the compression algorithm is LZW,
<i>value</i>
specifies the maximum number of bits to use in a code. For a
conforming application, the
<i>value</i>
argument shall be:
<pre>
<tt>9 &lt;= </tt><i>value</i><tt> &lt;= 16
</tt></pre>
<p>
The implementation may allow values of greater than 16. The default
shall be 14, 15, or 16.
<p>
If the compression algorithm is DEFLATE,
<i>value</i>
specifies the compression level. For a conforming application, the
<i>value</i>
argument shall be:
<pre>
<tt>1 &lt;= </tt><i>value</i><tt> &lt;= 9
</tt></pre>
<p>
The default shall be 6.
<p>
For other algorithms, value specifies implementation-defined tuning.
<p><dt><b>-c</b><dd>Write to standard output; the input files shall not be changed, and no
output files shall be created.
<p><dt><b>-d</b><dd>Decompress files. When invoked with the
<b>-d</b>
option, the
<i>compress</i>
utility shall restore previously compressed files to their original state.
<p><dt><b>-f</b><dd>Force compression or decompression of file, even if it does not (for
compression) actually reduce the size of the file, or if the
corresponding output file already exists. If the
<b>-f</b>
option is not given and the standard input is a terminal, the user
shall be prompted as to whether an existing output file should be
overwritten. If the response is affirmative, the existing file shall
be overwritten. If the standard input is not a terminal and
<b>-f</b>
is not given,
<i>compress</i>
or
<i>uncompress</i>
shall write a diagnostic message to standard error, the existing file
shall not be overwritten, and the utility shall exit with a status
greater than zero. If the
<b>-f</b>
option is specified and an input file other than standard input has
multiple hard links, it is implementation-defined whether the input
file is unlinked after the corresponding output file is successfully
written, or if processing of that file is skipped and a diagnostic
message is written to standard error.
<p><dt><b>-g</b><dd>Equivalent to
<b>-m</b>
<i>gzip</i>.
<p><dt><b>-m </b><i>algo</i><dd>Use the algorithm defined by
<i>algo</i>
to compress the files. The following algorithms shall be supported:
<br>
<p class="caption"><xref table="Compression algorithms, algo option-argument values, and suffixes"><a name="tagtcjh_17"></a>
Table: Compression algorithms, algo option-argument values, and suffixes</p>


<p>
<center>
<p>
<table border=1 cellpadding=3 align=center>
<tr valign=top><th align=center><p class="tent"><b>Algorithm</b></p></th>
<th align=center><p class="tent">algo</p></th>
<th align=center><p class="tent"><b>Filename Suffix</b></p></th>
</p></tr>
<tr valign=top><td align=left><p class="tent">Adaptive LZW
<td align=left><p class="tent"><b>lzw</b>
<td align=left><p class="tent"><b>.Z</b>
</p></tr>
<tr valign=top><td align=left><p class="tent">RFC1951 DEFLATE
<td align=left><p class="tent"><b>deflate</b>
<td align=left><p class="tent"><b>.gz</b>
</p></tr>
<tr valign=top><td align=left><p class="tent">Synonym for DEFLATE
<td align=left><p class="tent"><b>gzip</b>
<td align=left><p class="tent"><b>.gz</b>
</tr>
</table>
</center>
<p class="tent">
Other implementation-defined algorithms may be supported.
<p class="tent">
If neither of the
<b>-m</b>
<i>algo</i>
and
<b>-g</b>
options is specified,
<b>lzw</b>
shall be used as a default
<i>algo</i>
value. Specifying more than one of the mutually exclusive
<b>-g</b>
and
<b>-m</b>
<i>algo</i>
options, or multiple
<b>-m</b>
<i>algo</i>
options, shall not be considered an error. The last option specified
shall determine the behavior of the utility.
<p class="tent">
On systems not supporting the selected algorithm, the input files
shall not be changed and an exit status greater than two shall be
returned.
<basefont size=2>
<dl><dt><b>Note:</b>
<dd>The Lempel-Ziv compression algorithm is described in the now-expired
US Patent 4464650, which was issued to William Eastman, Abraham Lempel,
Jacob Ziv, and Martin Cohn on August 7th, 1984 and assigned to Sperry
Corporation.
<p class="tent">
The Lempel-Ziv-Welch compression algorithm is described in the
now-expired US Patent 4558302, which was issued to Terry A. Welch on
December 10th, 1985 and assigned to Sperry Corporation.
</dl>
<basefont size=3>
<p><dt><b>-v</b><dd>For
<i>compress</i>,
write the percentage reduction of each file to standard error. For
<i>uncompress</i>,
write messages to standard error concerning the expansion of each file.
</dl>
</blockquote><h4 class="mansect"><a name = "tag_20_23_05"></a>OPERANDS</h4><blockquote>
<p>
The following operand shall be supported:
<dl compact><dd>
<p><dt><i>file</i><dd>A pathname of a file to be compressed or decompressed. If a
<i>file</i>
is
<tt>'-'</tt>,
the utility shall read from standard input at that point in the
sequence and write to standard output. If more than one
<i>file</i>
operand is
<tt>'-'</tt>,
the behavior is unspecified.
</dl>
</blockquote><h4 class="mansect"><a name = "tag_20_23_06"></a>STDIN</h4><blockquote>
<p>
The standard input shall be used only if no
<i>file</i>
operands are specified, or if a
<i>file</i>
operand is
<tt>'-'</tt>.
</blockquote><h4 class="mansect"><a name = "tag_20_23_07"></a>INPUT FILES</h4><blockquote>
<p>
If
<i>file</i>
operands are specified, the corresponding input files contain the data
to be compressed or decompressed.
</blockquote><h4 class="mansect"><a name = "tag_20_23_08"></a>ENVIRONMENT VARIABLES</h4><blockquote>
<p>
The following environment variables shall affect the execution of
<i>compress</i>:
<dl compact><dd>
<p><dt><i>LANG</i><dd>Provide a default value for the internationalization variables that are
unset or null. (See XBD
<a href="../basedefs/V1_chap08.html#tag_08_02">
<i>8.2 Internationalization Variables</i>
</a>
for the precedence of internationalization variables used to determine
the values of locale categories.)
<p><dt><i>LC_ALL</i><dd>If set to a non-empty string value, override the values of all the
other internationalization variables.
<p><dt><i>LC_COLLATE</i><dd><br>
Determine the locale for the behavior of ranges, equivalence classes,
and multi-character collating elements used in the extended regular
expression defined for the
<b>yesexpr</b>
locale keyword in the
<i>LC_MESSAGES</i>
category.
<p><dt><i>LC_CTYPE</i><dd>Determine the locale for the interpretation of sequences of bytes of text
data as characters (for example, single-byte as opposed to multi-byte
characters in arguments), the behavior of character classes used in the
extended regular expression defined for the
<b>yesexpr</b>
locale keyword in the
<i>LC_MESSAGES</i>
category.
<p><dt><i>LC_MESSAGES</i><dd><br>
Determine the locale used to process affirmative responses, and the
locale used to affect the format and contents of diagnostic messages,
prompts, and the output from the
<b>-v</b>
option written to standard error.
<p><dt><i>NLSPATH</i><dd>Determine the location of messages objects and message catalogs.
</dl>
</blockquote><h4 class="mansect"><a name = "tag_20_23_09"></a>ASYNCHRONOUS EVENTS</h4><blockquote>
<p>
Default.
</blockquote><h4 class="mansect"><a name = "tag_20_23_10"></a>STDOUT</h4><blockquote>
<p>
For the
<i>compress</i>
and
<i>uncompress</i>
utilities, the standard output shall be used if no
<i>file</i>
operands are specified, if a
<i>file</i>
operand is
<tt>'-'</tt>,
or if the
<b>-c</b>
option is specified. Otherwise, the standard output shall not be used.
<p class="tent">
The
<i>zcat</i>
utility shall write the decompressed data to the standard output.
</blockquote><h4 class="mansect"><a name = "tag_20_23_11"></a>STDERR</h4><blockquote>
<p>
The standard error shall be used only for diagnostic and prompt
messages, the optional warning message described in DESCRIPTION, and
the output from
<b>-v</b>.
</blockquote><h4 class="mansect"><a name = "tag_20_23_12"></a>OUTPUT FILES</h4><blockquote>
<p>
When decompressing input files other than standard input, the
corresponding output files shall contain the decompressed input data.
When compressing input files other than standard input, the
corresponding output files shall contain the compressed input data.
If the selected
<i>algo</i>
is
<b>deflate</b>
or
<b>gzip</b>,
the compressed output shall be in the GZIP format described in RFC 1952.
For other algorithms, the compressed output file format is
implementation-defined and interchange of such files between
implementations (including access via unspecified file sharing
mechanisms) is not required by POSIX.1-2024.
</blockquote><h4 class="mansect"><a name = "tag_20_23_13"></a>EXTENDED DESCRIPTION</h4><blockquote>
<p>
None.
</blockquote><h4 class="mansect"><a name = "tag_20_23_14"></a>EXIT STATUS</h4><blockquote>
<p>
The following exit values shall be returned for
<i>compress</i>:
<dl compact><dd>
<p><dt>&nbsp;0<dd>Successful completion.
<p><dt>&nbsp;1<dd>An error occurred.
<p><dt>&nbsp;2<dd>One or more files were not compressed because they would have increased
in size (and the
<b>-f</b>
option was not specified).
<p><dt>&gt;2<dd>An error occurred.
</dl>
<p class="tent">
The following exit values shall be returned for
<i>uncompress</i>
and
<i>zcat</i>:
<dl compact><dd>
<p><dt>&nbsp;0<dd>Successful completion.
<p><dt>&gt;0<dd>An error occurred.
</dl>
</blockquote><h4 class="mansect"><a name = "tag_20_23_15"></a>CONSEQUENCES OF ERRORS</h4><blockquote>
<p>
If an error occurs while compressing or decompressing an input file
other than standard input, the input file shall remain unmodified.
</blockquote>
<hr><div class="box"><em>The following sections are informative.</em></div>
<blockquote>
</blockquote><h4 class="mansect"><a name = "tag_20_23_16"></a>APPLICATION USAGE</h4><blockquote>
<p>
The amount of compression obtained depends on the size of the input,
the number of bits
per code, and the distribution of common substrings. Typically, text
such as source code or English is reduced by 50-60%. Compression is
generally much better than that achieved by Huffman coding
or adaptive Huffman coding (<i>compact</i>),
and takes less time to compute.
<p class="tent">
Although
<i>compress</i>
strictly follows the default actions upon receipt of a signal or when
an error occurs, some unexpected results may occur. In some
implementations it is likely that a partially compressed file is left
in place, alongside its uncompressed input file. Since the general
operation of
<i>compress</i>
is to delete the uncompressed file only after the
<b>.Z</b>
file has been successfully filled, an application should always
carefully check the exit status of
<i>compress</i>
before arbitrarily deleting files that have like-named neighbors with
<b>.Z</b>
suffixes.
<p class="tent">
In addition to trying
<i>file</i>
and
<i>file</i><b>.Z</b>
when looking for a file to decompress, some implementations of
<i>uncompress</i>
and
<i>zcat</i>
also try suffixes for other known compression algorithms if neither
<i>file</i>
nor
<i>file</i><b>.Z</b>
is found. This version of the standard allows, but does not require
this behavior. Portable applications should always specify the full
pathname (including the suffix) of files to be decompressed.
</blockquote><h4 class="mansect"><a name = "tag_20_23_17"></a>EXAMPLES</h4><blockquote>
<p>
None.
</blockquote><h4 class="mansect"><a name = "tag_20_23_18"></a>RATIONALE</h4><blockquote>
<p>
Earlier versions of this standard limited the number of bits used by
conforming applications for the
<b>lzw</b>
algorithm to 14 due to address space limitations on 16-bit
architectures. Using 15 or 16 is a much more common default when using
current hardware.
<p class="tent">
Earlier versions of this standard only supported LZW compression. The
standard developers noted that existing implementations added other
compression utilities, such as
<i>gzip</i>,
and found it desirable to support this widespread usage. Some
implementations had extended the
<i>compress</i>
utility to support such other schemes. The standard developers
generalized this practice by the addition of the
<b>-m</b>
option, even though this was not previous practice.
<p class="tent">
The
<i>uncompress</i>
<b>-d</b>
option is added to match undocumented existing practice of tested
implementations.
</blockquote><h4 class="mansect"><a name = "tag_20_23_19"></a>FUTURE DIRECTIONS</h4><blockquote>
<p>
If this utility is directed to create a new directory entry that
contains any bytes that have the encoded value of a
&lt;newline&gt;
character, implementations are encouraged to treat this as an error.
A future version of this standard may require implementations to treat
this as an error.
<p class="tent">
When decompressing a file, the requirement to add
<b>.Z</b>
to a
<i>file</i>
operand if the given pathname does not include a suffix associated
with a known compression algorithm or if
<i>file</i>
does not exist and does not already have a
<b>.Z</b>
extension is an obsolescent feature and may be removed in a future version.
</blockquote><h4 class="mansect"><a name = "tag_20_23_20"></a>SEE ALSO</h4><blockquote>
<p>
XBD
<a href="../basedefs/V1_chap08.html#tag_08">
<i>8. Environment Variables</i>
</a>
,
<a href="../basedefs/V1_chap12.html#tag_12_02">
<i>12.2 Utility Syntax Guidelines</i>
</a>
</blockquote><h4 class="mansect"><a name = "tag_20_23_21"></a>CHANGE HISTORY</h4><blockquote>
<p>
First released in Issue 4.
</blockquote><h4 class="mansect"><a name = "tag_20_23_22"></a>Issue 6</h4><blockquote>
<p>
The normative text is reworded to avoid use of the term &quot;must&quot;
for application requirements.
<p class="tent">
An error case is added for systems not supporting adaptive Lempel-Ziv
coding.
</blockquote><h4 class="mansect"><a name = "tag_20_23_23"></a>Issue 7</h4><blockquote>
<p>
SD5-XCU-ERN-97 is applied, updating the SYNOPSIS.
<p class="tent">
Austin Group Interpretation 1003.1-2001 #125 is applied, revising
the ENVIRONMENT VARIABLES section.
</blockquote><h4 class="mansect"><a name = "tag_20_23_24"></a>Issue 8</h4><blockquote>
<p>
Austin Group Defect 251 is applied, encouraging implementations to
disallow the creation of filenames containing any bytes that have the
encoded value of a
&lt;newline&gt;
character.
<p class="tent">
Austin Group Defect 1041 is applied, combining the
<i>compress</i>,
<i>uncompress</i>
and
<i>zcat</i>
pages into one and extensively modifying most sections.
<p class="tent">
Austin Group Defect 1122 is applied, changing the description of
<i>NLSPATH .
</i></blockquote>
<div class="box"><em>End of informative text.</em></div><hr>
<blockquote>
</blockquote>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX&reg; is a registered Trademark of The Open Group.<br>
POSIX&trade; is a Trademark of The IEEE.<br>
Copyright &copy; 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | 
<a href="../basedefs/contents.html">XBD</a> | 
<a href="../functions/contents.html">XSH</a> | 
<a href="../utilities/contents.html">XCU</a> | 
<a href="../xrat/contents.html">XRAT</a> ]
</font></center>
<hr size="2" noshade>

<DIV CLASS="NAVHEADER">
<TABLE SUMMARY="Header navigation table" class="nav" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0">
<TR class="nav"><TD class="nav" WIDTH="15%" ALIGN="left" VALIGN="bottom"><A href="../utilities/command.html" ACCESSKEY="P" >&#60;&#60;&#60; Previous</A></TD><TD class="nav" WIDTH="70%" ALIGN="center" VALIGN="bottom" ><a href="contents.html">Home</a></TD><TD class="nav" WIDTH="15%" ALIGN="right" VALIGN="bottom"> <A href="../utilities/cp.html" ACCESSKEY="N" >Next &#62;&#62;&#62;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV></body></html>
