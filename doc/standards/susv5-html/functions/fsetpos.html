<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>fsetpos</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/fseek.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/fstat.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="fsetpos" id="fsetpos"></a> <a name="tag_17_188" id="tag_17_188"></a><!-- fsetpos -->
<h4 class="mansect"><a name="tag_17_188_01" id="tag_17_188_01"></a>NAME</h4>
<blockquote>fsetpos — set current file position</blockquote>
<h4 class="mansect"><a name="tag_17_188_02" id="tag_17_188_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>#include &lt;<a href="../basedefs/stdio.h.html">stdio.h</a>&gt;<br>
<br>
int fsetpos(FILE *</tt><i>stream</i><tt>, const fpos_t *</tt><i>pos</i><tt>);<br></tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_03" id="tag_17_188_03"></a>DESCRIPTION</h4>
<blockquote>
<div class="box"><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]"
border="0"> The functionality described on this reference page is aligned with the ISO&nbsp;C standard. Any conflict between the
requirements described here and the ISO&nbsp;C standard is unintentional. This volume of POSIX.1-2024 defers to the ISO&nbsp;C
standard. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></div>
<p>The <i>fsetpos</i>() function shall set the <b>mbstate_t</b> object (if any) and file position indicator for the stream pointed
to by <i>stream</i> according to the value of the object pointed to by <i>pos</i>, which the application shall ensure is a value
obtained from an earlier call to <a href="../functions/fgetpos.html"><i>fgetpos</i>()</a> on the same stream. If a read or write
error occurs, the error indicator for the stream shall be set and <i>fsetpos</i>() fails.</p>
<p>A successful call to the <i>fsetpos</i>() function shall undo any effects of the <a href=
"../functions/ungetc.html"><i>ungetc</i>()</a> function on the stream, clear the end-of-file indicator for the stream, and then
establish the new parse state and position. After a successful <i>fsetpos</i>() call, the next operation on an update stream can be
either input or output.</p>
<p><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> The
behavior of <i>fsetpos</i>() on devices which are incapable of seeking is implementation-defined. The value of the file offset
associated with such a device is undefined.</p>
<p>If the stream has an underlying file description and is writable, and buffered data has not been written to the underlying file,
<i>fsetpos</i>() shall cause the unwritten data to be written to the file and shall mark the last data modification and last file
status change timestamps of the file for update.</p>
<p>If the stream was created by <a href="../functions/fmemopen.html"><i>fmemopen</i>()</a>, <a href=
"../functions/open_memstream.html"><i>open_memstream</i>()</a>, or <a href=
"../functions/open_wmemstream.html"><i>open_wmemstream</i>()</a> and the stream is writable, and if the stream is buffered and data
in the stream's buffer has not been written to the underlying memory buffer, <i>fsetpos</i>() shall cause the unwritten data to be
written to the underlying memory buffer. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></p>
<p>The <i>fsetpos</i>() function shall not change the setting of <i>errno</i> if successful.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_04" id="tag_17_188_04"></a>RETURN VALUE</h4>
<blockquote>
<p>The <i>fsetpos</i>() function shall return 0 if it succeeds; otherwise, it shall return a non-zero value and set <i>errno</i> to
indicate the error.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_05" id="tag_17_188_05"></a>ERRORS</h4>
<blockquote>
<p>The <i>fsetpos</i>() function shall fail if, <sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src=
"../images/opt-start.gif" alt="[Option Start]" border="0"> &nbsp;either the <i>stream</i> is unbuffered or the <i>stream</i>'s
buffer needed to be flushed, and the call to <i>fsetpos</i>() causes an underlying <a href=
"../functions/lseek.html"><i>lseek</i>()</a> or <a href="../functions/write.html"><i>write</i>()</a> to be invoked, and: <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></p>
<dl compact>
<dd></dd>
<dt>[EAGAIN]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
The O_NONBLOCK flag is set for the file descriptor and the thread would be delayed in the write operation. <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt>[EBADF]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
The file descriptor underlying the stream file is not open for writing or the stream's buffer needed to be flushed and the file is
not open. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt>[EFBIG]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> An
attempt was made to write a file that exceeds the maximum file size. <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"></dd>
<dt>[EFBIG]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> An
attempt was made to write a file that exceeds the file size limit of the process.<br>
<img src="../images/opt-end.gif" alt="[Option End]" border="0"> <sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup>
<img src="../images/opt-start.gif" alt="[Option Start]" border="0"> A SIGXFSZ signal shall also be generated for the thread.
<img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt>[EFBIG]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
The file is a regular file and an attempt was made to write at or beyond the offset maximum associated with the corresponding
stream. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt>[EINTR]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
The write operation was terminated due to the receipt of a signal, and no data was transferred. <img src="../images/opt-end.gif"
alt="[Option End]" border="0"></dd>
<dt>[EIO]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> A
physical I/O error has occurred, or the process is a member of a background process group attempting to perform a <a href=
"../functions/write.html"><i>write</i>()</a> to its controlling terminal, TOSTOP is set, the calling thread is not blocking
SIGTTOU, the process is not ignoring SIGTTOU, and the process group of the process is orphaned. This error may also be returned
under implementation-defined conditions. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt>[ENOMEM]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
The stream was created by <a href="../functions/open_memstream.html"><i>open_memstream</i>()</a> or <a href=
"../functions/open_wmemstream.html"><i>open_wmemstream</i>()</a> and insufficient memory is available. <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt>[ENOSPC]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
There was no free space remaining on the device containing the file or in the buffer used by the <a href=
"../functions/fmemopen.html"><i>fmemopen</i>()</a> function. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt>[EPIPE]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> An
attempt was made to write to a pipe or FIFO that is not open for reading by any process; a SIGPIPE signal shall also be sent to the
thread. <img src="../images/opt-end.gif" alt="[Option End]" border="0"></dd>
<dt>[ESPIPE]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
The file descriptor underlying <i>stream</i> is associated with a pipe, FIFO, or socket. <img src="../images/opt-end.gif" alt=
"[Option End]" border="0"></dd>
</dl>
<p>The <i>fsetpos</i>() function may fail if:</p>
<dl compact>
<dd></dd>
<dt>[ENXIO]</dt>
<dd><sup>[<a href="javascript:open_code('CX')">CX</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0"> A
request was made of a nonexistent device, or the request was outside the capabilities of the device. <img src=
"../images/opt-end.gif" alt="[Option End]" border="0"></dd>
</dl>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_17_188_06" id="tag_17_188_06"></a>EXAMPLES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_07" id="tag_17_188_07"></a>APPLICATION USAGE</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_08" id="tag_17_188_08"></a>RATIONALE</h4>
<blockquote>
<p>The ERRORS section does not include an [EINVAL] error equivalent to the one for <a href=
"../functions/fseek.html"><i>fseek</i>()</a> because applications are required to obtain the <b>fpos_t</b> value using <a href=
"../functions/fgetpos.html"><i>fgetpos</i>()</a>, in which case the file position to be set will always be valid. Directly
manipulating the <b>fpos_t</b> object to set a position results in undefined behavior. However, if an implementation detects that
the requested file position would be a negative value, or would be beyond the end of the underlying memory buffer of a stream that
was created by <a href="../functions/fmemopen.html"><i>fmemopen</i>()</a>, it is recommended that <i>fsetpos</i>() returns a
non-zero value and sets errno to [EINVAL].</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_09" id="tag_17_188_09"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_10" id="tag_17_188_10"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../functions/V2_chap02.html#tag_16_05"><i>2.5 Standard I/O Streams</i></a>, <a href=
"../functions/fopen.html#"><i>fopen</i>()</a>, <a href="../functions/fmemopen.html#"><i>fmemopen</i>()</a>, <a href=
"../functions/ftell.html#"><i>ftell</i>()</a>, <a href="../functions/lseek.html#"><i>lseek</i>()</a>, <a href=
"../functions/open_memstream.html#"><i>open_memstream</i>()</a>, <a href="../functions/rewind.html#"><i>rewind</i>()</a>,
<a href="../functions/ungetc.html#"><i>ungetc</i>()</a>, <a href="../functions/write.html#tag_17_699"><i>write</i>()</a></p>
<p>XBD <a href="../basedefs/stdio.h.html"><i>&lt;stdio.h&gt;</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_11" id="tag_17_188_11"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 4. Derived from the ISO&nbsp;C standard.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_12" id="tag_17_188_12"></a>Issue 6</h4>
<blockquote>
<p>Extensions beyond the ISO&nbsp;C standard are marked.</p>
<p>The normative text is updated to avoid use of the term &quot;must&quot; for application requirements.</p>
<p>The DESCRIPTION is updated to clarify that the error indicator is set for the stream on a read or write error. This is for
alignment with the ISO/IEC&nbsp;9899:1999 standard.</p>
<p>IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;1-2002, item XSH/TC1/D6/21 is applied, deleting an erroneous [EINVAL] error case from
the ERRORS section.</p>
<p>IEEE&nbsp;Std&nbsp;1003.1-2001/Cor&nbsp;2-2004, item XSH/TC2/D6/43 is applied, updating the [EAGAIN] error in the ERRORS section
from &quot;the process would be delayed&quot; to &quot;the thread would be delayed&quot;.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_13" id="tag_17_188_13"></a>Issue 7</h4>
<blockquote>
<p>SD5-XSH-ERN-220 is applied.</p>
<p>POSIX.1-2008, Technical Corrigendum 1, XSH/TC1-2008/0192 [105], XSH/TC1-2008/0193 [79], XSH/TC1-2008/0194 [225],
XSH/TC1-2008/0195 [450], XSH/TC1-2008/0196 [450], and XSH/TC1-2008/0197 [14] are applied.</p>
</blockquote>
<h4 class="mansect"><a name="tag_17_188_14" id="tag_17_188_14"></a>Issue 8</h4>
<blockquote>
<p>Austin Group Defect 308 is applied, clarifying the handling of [EFBIG] errors.</p>
<p>Austin Group Defect 1225 is applied, aligning the CX requirements with <a href="../functions/fseek.html"><i>fseek</i>()</a>.</p>
<p>Austin Group Defect 1249 is applied, correcting some text mismatches with the ISO&nbsp;C standard.</p>
<p>Austin Group Defect 1669 is applied, removing XSI shading from part of the [EFBIG] error relating to the file size limit for the
process.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../functions/fseek.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../functions/fstat.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
