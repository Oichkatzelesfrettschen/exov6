<!-- Copyright 2001-2024 IEEE and The Open Group, All Rights Reserved -->
<!DOCTYPE HTML>
<html lang="en">
<head>
<meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link type="text/css" rel="stylesheet" href="style.css"><!-- Generated by The Open Group rhtm tool v1.2.4 -->
<!-- Copyright (c) 2001-2024 The Open Group, All Rights Reserved -->
<title>read</title>
</head>
<body bgcolor="white">
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../utilities/pwd.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../utilities/readlink.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
<script language="JavaScript" src="../jscript/codes.js"></script><basefont size="3">
<center><font size="2">The Open Group Base Specifications Issue 8<br>
IEEE Std 1003.1-2024<br>
Copyright © 2001-2024 The IEEE and The Open Group</font></center>
<hr size="2" noshade>
<a name="top" id="top"></a> <a name="read" id="read"></a> <a name="tag_20_100" id="tag_20_100"></a><!-- read -->
<h4 class="mansect"><a name="tag_20_100_01" id="tag_20_100_01"></a>NAME</h4>
<blockquote>read — read from standard input into shell variables</blockquote>
<h4 class="mansect"><a name="tag_20_100_02" id="tag_20_100_02"></a>SYNOPSIS</h4>
<blockquote class="synopsis">
<p><code><tt>read</tt> <b>[</b><tt>-r</tt><b>] [</b><tt>-d</tt> <i>delim</i><b>]</b> <i>var</i><tt>...</tt></code></p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_03" id="tag_20_100_03"></a>DESCRIPTION</h4>
<blockquote>
<p>The <i>read</i> utility shall read a single logical line from standard input into one or more shell variables.</p>
<p>If the <b>-r</b> option is not specified, &lt;backslash&gt; shall act as an escape character. An unescaped &lt;backslash&gt;
shall preserve the literal value of a following &lt;backslash&gt; and shall prevent a following byte (if any) from being used to
split fields, with the exception of either &lt;newline&gt; or the logical line delimiter specified with the <b>-d</b> <i>delim</i>
option (if it is used and <i>delim</i> is not &lt;newline&gt;); it is unspecified which. If this excepted character follows the
&lt;backslash&gt;, the <i>read</i> utility shall interpret this as line continuation. The &lt;backslash&gt; and the excepted
character shall be removed before splitting the input into fields. All other unescaped &lt;backslash&gt; characters shall be
removed after splitting the input into fields.</p>
<p>If standard input is a terminal device and the invoking shell is interactive, <i>read</i> shall prompt for a continuation line
when it reads an input line ending with a &lt;backslash&gt; &lt;newline&gt;, unless the <b>-r</b> option is specified.</p>
<p>The terminating logical line delimiter (if any) shall be removed from the input. Then, if the shell variable <i>IFS</i> (see
<a href="../utilities/V3_chap02.html#tag_19_05_03"><i>2.5.3 Shell Variables</i></a>) is set, and its value is an empty string, the
resulting data shall be assigned to the variable named by the first <i>var</i> operand, and the variables named by other <i>var</i>
operands (if any) shall be set to the empty string. No other processing shall be performed in this case.</p>
<p>If <i>IFS</i> is unset, or is set to any non-empty value, then a modified version of the field splitting algorithm specified in
<a href="../utilities/V3_chap02.html#tag_19_06_05"><i>2.6.5 Field Splitting</i></a> shall be applied, with the modifications as
follows:</p>
<ol>
<li>
<p>The input to the algorithm shall be the logical line (minus terminating delimiter) that was read from standard input, and shall
be considered as a single initial field, all of which resulted from expansions, with any escaped byte and the preceding
&lt;backslash&gt; escape character treated as if they were the result of a quoted expansion, and all other bytes treated as if they
were the results of unquoted expansions.</p>
</li>
<li>
<p>The loop over the contents of that initial field shall cease when either the input is empty or <i>n</i> output fields have been
generated, where <i>n</i> is one less than the number of <i>var</i> operands passed to the <i>read</i> utility. Any remaining input
in the original field being processed shall be returned to the <i>read</i> utility &quot;unsplit&quot;; that is, unmodified except that any
leading or trailing <i>IFS</i> white space, as defined in <a href="../utilities/V3_chap02.html#tag_19_06_05"><i>2.6.5 Field
Splitting</i></a>, shall be removed.</p>
</li>
</ol>
<p>The specified <i>var</i> operands shall be processed in the order they appear on the command line, and the output fields
generated by the field splitting algorithm shall be used in the order they were generated, by repeating the following checks until
neither is true:</p>
<ul>
<li>
<p>If more than one <i>var</i> operand is yet to be processed and one or more output fields are yet to be used, the variable named
by the first unprocessed <i>var</i> operand shall be assigned the value of the first unused output field.</p>
</li>
<li>
<p>If exactly one <i>var</i> operand is yet to be processed and there was some remaining unsplit input returned from the modified
field splitting algorithm, the variable named by the unprocessed <i>var</i> operand shall be assigned the unsplit input.</p>
</li>
</ul>
<p>If there are still one or more unprocessed <i>var</i> operands, each of the variables names by those operands shall be assigned
an empty string.</p>
<p>Note that in the case where just one <i>var</i> operand is given on the <i>read</i> command line, the modified field splitting
algorithm ceases after producing zero output fields and simply returns the original input field, with any leading and trailing
<i>IFS</i> white space removed, as unsplit input. This unsplit input is assigned to the variable named by the <i>var</i>
operand.</p>
<p>The setting of variables specified by the <i>var</i> operands shall affect the current shell execution environment; see <a href=
"../utilities/V3_chap02.html#tag_19_13"><i>2.13 Shell Execution Environment</i></a>. An error in setting any variable (such as if
a <i>var</i> has previously been marked <i>readonly</i>) shall be considered an error of <i>read</i> processing, and shall result
in a return value greater than one. Variables named before the one generating the error shall be set as described above; it is
unspecified whether variables named later shall be set as above, or <i>read</i> simply ceases processing when the error occurs,
leaving later named variables unaltered. If <i>read</i> is called in a subshell or separate utility execution environment, such as
one of the following:</p>
<pre>
<tt>(read foo)
nohup read ...
find . -exec read ... \;
</tt></pre>
<p>it shall not affect the shell variables in the caller's environment.</p>
<p>If end-of-file is detected before a terminating logical line delimiter is encountered, the variables specified by the <i>var</i>
operands shall be set as described above and the exit status shall be 1.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_04" id="tag_20_100_04"></a>OPTIONS</h4>
<blockquote>
<p>The <i>read</i> utility shall conform to XBD <a href="../basedefs/V1_chap12.html#tag_12_02"><i>12.2 Utility Syntax
Guidelines</i></a>.</p>
<p>The following options shall be supported:</p>
<dl compact>
<dd></dd>
<dt><b>-d</b> <i>delim</i></dt>
<dd>If <i>delim</i> consists of one single-byte character, that byte shall be used as the logical line delimiter. If <i>delim</i>
is the null string, the logical line delimiter shall be the null byte. Otherwise, the behavior is unspecified.</dd>
<dt><b>-r</b></dt>
<dd>Do not treat a &lt;backslash&gt; character in any special way. Consider each &lt;backslash&gt; to be part of the input
line.</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_05" id="tag_20_100_05"></a>OPERANDS</h4>
<blockquote>
<p>The following operand shall be supported:</p>
<dl compact>
<dd></dd>
<dt><i>var</i></dt>
<dd>The name of an existing or nonexisting shell variable. If a <i>var</i> operand names the variable <i>IFS ,</i> the behavior is
unspecified.
<p>If a <i>var</i> operand names one of the variables <i>LANG ,</i> <i>LC_CTYPE ,</i> or <i>LC_ALL</i> and the new value assigned
to the variable would change how the bytes in <i>IFS</i> form characters, or which characters in <i>IFS</i> are considered to be
<i>IFS</i> white space (see <a href="../utilities/V3_chap02.html#tag_19_06_05"><i>2.6.5 Field Splitting</i></a>), it is
unspecified what effects, if any, the change has on how <i>read</i> performs field splitting.</p>
</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_06" id="tag_20_100_06"></a>STDIN</h4>
<blockquote>
<p>If the <b>-d</b> <i>delim</i> option is not specified, or if it is specified and <i>delim</i> is not the null string, the
standard input shall contain zero or more bytes (which need not form valid characters) and shall not contain any null bytes.</p>
<p>If the <b>-d</b> <i>delim</i> option is specified and <i>delim</i> is the null string, the standard input shall contain zero or
more bytes (which need not form valid characters).</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_07" id="tag_20_100_07"></a>INPUT FILES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_08" id="tag_20_100_08"></a>ENVIRONMENT VARIABLES</h4>
<blockquote>
<p>The following environment variables shall affect the execution of <i>read</i>:</p>
<dl compact>
<dd></dd>
<dt><i>IFS</i></dt>
<dd>Determine the internal field separators used to delimit fields; see <a href="../utilities/V3_chap02.html#tag_19_05_03"><i>2.5.3
Shell Variables</i></a>.</dd>
<dt><i>LANG</i></dt>
<dd>Provide a default value for the internationalization variables that are unset or null. (See XBD <a href=
"../basedefs/V1_chap08.html#tag_08_02"><i>8.2 Internationalization Variables</i></a> for the precedence of internationalization
variables used to determine the values of locale categories.)</dd>
<dt><i>LC_ALL</i></dt>
<dd>If set to a non-empty string value, override the values of all the other internationalization variables.</dd>
<dt><i>LC_CTYPE</i></dt>
<dd>Determine the locale for the interpretation of sequences of bytes of text data as characters (for example, single-byte as
opposed to multi-byte characters in arguments).</dd>
<dt><i>LC_MESSAGES</i></dt>
<dd><br>
Determine the locale that should be used to affect the format and contents of diagnostic messages written to standard error.</dd>
<dt><i>NLSPATH</i></dt>
<dd><sup>[<a href="javascript:open_code('XSI')">XSI</a>]</sup> <img src="../images/opt-start.gif" alt="[Option Start]" border="0">
Determine the location of messages objects and message catalogs. <img src="../images/opt-end.gif" alt="[Option End]" border=
"0"></dd>
<dt><i>PS2</i></dt>
<dd>Provide the prompt string that an interactive shell shall write to standard error when a line ending with a &lt;backslash&gt;
&lt;newline&gt; is read and the <b>-r</b> option was not specified.</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_09" id="tag_20_100_09"></a>ASYNCHRONOUS EVENTS</h4>
<blockquote>
<p>Default.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_10" id="tag_20_100_10"></a>STDOUT</h4>
<blockquote>
<p>Not used.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_11" id="tag_20_100_11"></a>STDERR</h4>
<blockquote>
<p>The standard error shall be used for diagnostic messages and prompts for continued input.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_12" id="tag_20_100_12"></a>OUTPUT FILES</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_13" id="tag_20_100_13"></a>EXTENDED DESCRIPTION</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_14" id="tag_20_100_14"></a>EXIT STATUS</h4>
<blockquote>
<p>The following exit values shall be returned:</p>
<dl compact>
<dd></dd>
<dt>&nbsp;0</dt>
<dd>Successful completion.</dd>
<dt>&nbsp;1</dt>
<dd>End-of-file was detected.</dd>
<dt>&gt;1</dt>
<dd>An error occurred.</dd>
</dl>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_15" id="tag_20_100_15"></a>CONSEQUENCES OF ERRORS</h4>
<blockquote>
<p>Default.</p>
</blockquote>
<hr>
<div class="box"><em>The following sections are informative.</em></div>
<h4 class="mansect"><a name="tag_20_100_16" id="tag_20_100_16"></a>APPLICATION USAGE</h4>
<blockquote>
<p>This utility is required to be intrinsic. See <a href="../utilities/V3_chap01.html#tag_18_07"><i>1.7 Intrinsic Utilities</i></a>
for details.</p>
<p>The <b>-r</b> option is included to enable <i>read</i> to subsume the purpose of the <i>line</i> utility, which is not included
in POSIX.1-2024.</p>
<p>The <b>-d</b> <i>delim</i> option enables reading up to an arbitrary single-byte delimiter. When <i>delim</i> is the null
string, the delimiter is the null byte and this allows <i>read</i> to be used to process null-terminated lists of pathnames (as
produced by the <a href="../utilities/find.html"><i>find</i></a> <b>-print0</b> primary), with correct handling of pathnames that
contain &lt;newline&gt; characters. Note that in order to specify the null string as the delimiter, <b>-d</b> and <i>delim</i> need
to be specified as two separate arguments. Implementations differ in their handling of &lt;backslash&gt; for line continuation when
<b>-d</b> <i>delim</i> is specified (and <i>delim</i> is not &lt;newline&gt;); some treat &lt;backslash&gt;<i>delim</i> (or
&lt;backslash&gt;&lt;NUL&gt; if <i>delim</i> is the null string) as a line continuation, whereas others still treat
&lt;backslash&gt;&lt;newline&gt; as a line continuation. Consequently, portable applications need to specify <b>-r</b> whenever
they specify <b>-d</b> <i>delim</i> (and <i>delim</i> is not &lt;newline&gt;).</p>
<p>When reading a pathname it is inadvisable to use the contents of the first <i>var</i> operand, if non-empty, when the exit
status of <i>read</i> is 1, as it is likely the result of the command used to generate the list of pathnames (for example <a href=
"../utilities/find.html"><i>find</i></a> with <b>-print</b> or <b>-print0</b>) being terminated after it has written a partial
pathname, and consequently using it could result in the wrong pathname being processed.</p>
<p>Since the <i>var</i> operands are processed in the order specified on the command line, if any variable name is specified more
than once as a <i>var</i> operand, the last assignment made is the one that is in effect when <i>read</i> returns, including when
an empty string is assigned because no field data was available.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_17" id="tag_20_100_17"></a>EXAMPLES</h4>
<blockquote>
<p>The following command:</p>
<pre>
<tt>while read -r xx yy
do
    printf "%s %s\n" "$yy" "$xx"
done &lt; </tt><i>input_file</i><tt>
</tt></pre>
<p>prints a file with the first field of each line moved to the end of the line.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_18" id="tag_20_100_18"></a>RATIONALE</h4>
<blockquote>
<p>The <i>read</i> utility historically has been a shell built-in. It was separated off into its own utility to take advantage of
the richer description of functionality introduced by this volume of POSIX.1-2024.</p>
<p>Since <i>read</i> affects the current shell execution environment, it is required to be intrinsic. If it is called in a subshell
or separate utility execution environment, such as one of the following:</p>
<pre>
<tt>(read foo)
nohup read ...
find . -exec read ... \;
</tt></pre>
<p>it does not affect the shell variables in the environment of the caller.</p>
<p>Earlier versions of this standard required the standard input to be a text file, and therefore the results were undefined if the
input was not empty and end-of-file was detected before a &lt;newline&gt; character was encountered. However, all of the most
popular shell implementations have been found to have consistent behavior in this case, and so the behavior is now specified and
the requirement for standard input to be a text file has been relaxed to allow non-empty input that does not end with a
&lt;newline&gt;.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_19" id="tag_20_100_19"></a>FUTURE DIRECTIONS</h4>
<blockquote>
<p>None.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_20" id="tag_20_100_20"></a>SEE ALSO</h4>
<blockquote>
<p><a href="../utilities/V3_chap02.html#tag_19"><i>2. Shell Command Language</i></a></p>
<p>XBD <a href="../basedefs/V1_chap08.html#tag_08"><i>8. Environment Variables</i></a>, <a href=
"../basedefs/V1_chap12.html#tag_12_02"><i>12.2 Utility Syntax Guidelines</i></a></p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_21" id="tag_20_100_21"></a>CHANGE HISTORY</h4>
<blockquote>
<p>First released in Issue 2.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_22" id="tag_20_100_22"></a>Issue 7</h4>
<blockquote>
<p>Austin Group Interpretation 1003.1-2001 #194 is applied, clarifying the handling of the &lt;backslash&gt; escape character.</p>
<p>SD5-XCU-ERN-126 is applied, clarifying that input lines end with a &lt;newline&gt;.</p>
<p>The description of here-documents is removed from the <i>read</i> reference page.</p>
<p>POSIX.1-2008, Technical Corrigendum 2, XCU/TC2-2008/0162 [958] is applied.</p>
</blockquote>
<h4 class="mansect"><a name="tag_20_100_23" id="tag_20_100_23"></a>Issue 8</h4>
<blockquote>
<p>Austin Group Defect 243 is applied, adding the <b>-d</b> option and relaxing the requirement for standard input to be a text
file.</p>
<p>Austin Group Defect 367 is applied, requiring that <i>read</i> distinguishes between detecting end-of-file and an error
occurring, setting its exit status to one and greater than one, respectively.</p>
<p>Austin Group Defect 854 is applied, adding a note to the APPLICATION USAGE section that this utility is required to be
intrinsic.</p>
<p>Austin Group Defect 1122 is applied, changing the description of <i>NLSPATH .</i></p>
<p>Austin Group Defect 1778 is applied, clarifying how field splitting is performed.</p>
<p>Austin Group Defect 1779 is applied, clarifying how an error in setting any variable affects the processing of variables named
before or after the one generating the error.</p>
</blockquote>
<div class="box"><em>End of informative text.</em></div>
<hr>
<p>&nbsp;</p>
<a href="#top"><span class="topOfPage">return to top of page</span></a><br>
<hr size="2" noshade>
<center><font size="2">UNIX® is a registered Trademark of The Open Group.<br>
POSIX™ is a Trademark of The IEEE.<br>
Copyright © 2001-2024 The IEEE and The Open Group, All Rights Reserved<br>
[ <a href="../mindex.html">Main Index</a> | <a href="../basedefs/contents.html">XBD</a> | <a href=
"../functions/contents.html">XSH</a> | <a href="../utilities/contents.html">XCU</a> | <a href="../xrat/contents.html">XRAT</a>
]</font></center>
<hr size="2" noshade>
<div class="NAVHEADER">
<table summary="Header navigation table" class="nav" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr class="nav">
<td class="nav" width="15%" align="left" valign="bottom"><a href="../utilities/pwd.html" accesskey="P">&lt;&lt;&lt;
Previous</a></td>
<td class="nav" width="70%" align="center" valign="bottom"><a href="contents.html">Home</a></td>
<td class="nav" width="15%" align="right" valign="bottom"><a href="../utilities/readlink.html" accesskey="N">Next
&gt;&gt;&gt;</a></td>
</tr>
</table>
<hr align="left" width="100%"></div>
</body>
</html>
